/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var VIEW_TYPE_VOCAB_SIDEBAR = "vocab-sidebar";
var DEFAULT_SETTINGS = {
  saveSentences: false
};
var MyPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.cedictMap = /* @__PURE__ */ new Map();
    this.activeHighlight = null;
    this.activeWord = null;
    this.activeEntries = null;
    this.hoverBoxEl = null;
    this.tooltipEl = null;
    this.refreshVocabSidebar = null;
    // not update vocab list on every keystroke
    this.refreshTimer = null;
    // save currentMarkdownView so vocab list doesnt disappear when i click on vocab sidebar
    this.currentMarkdownView = null;
    // For if the user wants to store the current sentence as an example
    this.activeExampleSentence = null;
    this.hoverHandlerChars = (event) => {
      var _a, _b;
      const el = event.target;
      const isEditLine = el.closest(".cm-line");
      const isPreviewBlock = (_a = el.closest(".markdown-preview-view")) == null ? void 0 : _a.querySelector(".markdown-preview-sizer");
      const isPreviewTarget = el.closest(".el-p, .el-h1, .el-h2, .el-h3, .el-li, .el-blockquote, .el-table");
      if (!isEditLine && !(isPreviewBlock && isPreviewTarget)) {
        this.hideHoverBox();
        this.hideTooltip();
        return;
      }
      const range = document.caretRangeFromPoint(event.clientX, event.clientY);
      if (!range || range.startContainer.nodeType !== Node.TEXT_NODE) {
        this.hideHoverBox();
        this.hideTooltip();
        this.activeHighlight = null;
        this.activeWord = null;
        this.activeEntries = null;
        return;
      }
      const textNode = range.startContainer;
      const offset = range.startOffset;
      const text = (_b = textNode.textContent) != null ? _b : "";
      if (offset < 0 || offset >= text.length) {
        this.hideHoverBox();
        return;
      }
      const chineseChar = /[\u4e00-\u9fff]/;
      if (!chineseChar.test(text[offset])) {
        this.hideHoverBox();
        return;
      }
      const match = this.getForwardMatchedWord(text, offset);
      if (!match) {
        this.hideHoverBox();
        return;
      }
      const start = offset;
      const end = Math.min(match.end, textNode.length);
      const rangeForWord = document.createRange();
      rangeForWord.setStart(textNode, start);
      rangeForWord.setEnd(textNode, end);
      const rect = rangeForWord.getBoundingClientRect();
      if (this.hoverBoxEl) {
        this.hoverBoxEl.style.left = `${rect.left + window.scrollX}px`;
        this.hoverBoxEl.style.top = `${rect.top + window.scrollY}px`;
        this.hoverBoxEl.style.width = `${rect.width}px`;
        this.hoverBoxEl.style.height = `${rect.height}px`;
        this.hoverBoxEl.style.display = "block";
      }
      if (this.settings.saveSentences) {
        const sentence = this.extractSentenceFromTextAtOffset(text, offset, match.word);
        this.activeExampleSentence = sentence;
      }
      this.showTooltipForWord(match.word, rect.left + window.scrollX, rect.top + window.scrollY);
    };
  }
  async onload() {
    await this.loadSettings();
    const data = await this.loadDictionaryFile(`.obsidian/plugins/${this.manifest.id}/cedict_ts.u8`);
    this.loadCedictFromText(data);
    console.log("Cedict loaded.");
    const style = document.createElement("style");
    style.id = "cedict-hover-style";
    style.innerText = `
		.cedict-hover-box {
			position: absolute;
			z-index: 0 !important;
			background-color: hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3);
			pointer-events: none;
			border-radius: 3px;
			transition: all 0.05s ease;
		}
		.cedict-line-hover {
			background-color: hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3);
			transition: background-color 0.3s ease;
		}
		.cm-line{
			transition: all 0.5s ease;
		}

		.vocab-entry {
			margin-bottom: 1rem;
			padding-bottom: 0.5rem;
			border-bottom: 1px solid var(--background-modifier-border);
			cursor: pointer;
		}
	
		.vocab-word {
			font-weight: bold;
			font-size: 1.1em;
		}
	
		.vocab-pinyin {
			font-style: italic;
			color: var(--text-muted);
			margin-top: 2px;
		}
	
		.vocab-defs {
			margin-top: 4px;
			color: var(--text-normal);
			font-size: 0.95em;
			line-height: 1.4;
		}
		`;
    document.head.appendChild(style);
    this.hoverBoxEl = document.createElement("div");
    this.hoverBoxEl.className = "cedict-hover-box";
    document.body.appendChild(this.hoverBoxEl);
    this.tooltipEl = document.createElement("div");
    this.tooltipEl.style.position = "absolute";
    this.tooltipEl.style.padding = "6px 10px";
    this.tooltipEl.style.background = "var(--background-secondary)";
    this.tooltipEl.style.color = "var(--text-normal)";
    this.tooltipEl.style.border = "1px solid var(--background-modifier-border)";
    this.tooltipEl.style.borderRadius = "6px";
    this.tooltipEl.style.boxShadow = "0 4px 8px rgba(0,0,0,0.1)";
    this.tooltipEl.style.whiteSpace = "pre-line";
    this.tooltipEl.style.zIndex = "10000";
    this.tooltipEl.style.pointerEvents = "none";
    this.tooltipEl.style.display = "none";
    document.body.appendChild(this.tooltipEl);
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.hoverHandler = this.hoverHandlerChars.bind(this);
    document.addEventListener("mousemove", this.hoverHandler);
    this.registerDomEvent(document, "keydown", (event) => {
      if (event.key.toLowerCase() === "s" && this.activeWord && this.activeEntries) {
        this.addToVocab(this.activeWord, this.activeEntries);
      }
    });
    this.addCommand({
      id: "export-vocab-flashcards",
      name: "Export Vocab to Flashcards",
      callback: () => this.exportVocabToFlashcards()
    });
    this.registerView(
      VIEW_TYPE_VOCAB_SIDEBAR,
      (leaf) => new VocabSidebarView(leaf, this)
    );
    this.addRibbonIcon("book-open", "Open Vocab Sidebar", async () => {
      await this.activateView();
    });
    await this.activateView();
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (view) {
          this.currentMarkdownView = view;
          this.triggerSidebarRefresh();
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-change", () => {
        if (this.refreshTimer)
          window.clearTimeout(this.refreshTimer);
        this.refreshTimer = window.setTimeout(() => {
          const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
          if (view) {
            this.currentMarkdownView = view;
            this.triggerSidebarRefresh();
          }
        }, 300);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (view) {
          this.currentMarkdownView = view;
          this.triggerSidebarRefresh();
        }
      })
    );
  }
  onunload() {
    document.removeEventListener("mousemove", this.hoverHandler);
    if (this.activeHighlight) {
      const parent = this.activeHighlight.parentNode;
      if (parent) {
        parent.replaceChild(
          document.createTextNode(this.activeHighlight.innerText),
          this.activeHighlight
        );
      }
      this.activeHighlight = null;
    }
    if (this.hoverBoxEl) {
      this.hoverBoxEl.remove();
      this.hoverBoxEl = null;
    }
    if (this.tooltipEl) {
      this.tooltipEl.style.display = "none";
      this.tooltipEl.remove();
      this.tooltipEl = null;
    }
    const styleEl = document.getElementById("cedict-hover-style");
    if (styleEl)
      styleEl.remove();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async loadDictionaryFile(fileName) {
    const arrayBuffer = await this.app.vault.adapter.readBinary(fileName);
    const decoder = new TextDecoder("utf-8");
    return decoder.decode(arrayBuffer);
  }
  parseCedictLine(line) {
    const match = line.match(/^(\S+)\s+(\S+)\s+\[(.+?)\]\s+\/(.+)\//);
    if (!match)
      return null;
    const [, trad, simp, pinyin, defs] = match;
    return {
      traditional: trad,
      simplified: simp,
      pinyin,
      definitions: defs.split("/")
    };
  }
  loadCedictFromText(cedictText) {
    const lines = cedictText.split("\n");
    for (const line of lines) {
      if (line.startsWith("#") || line.trim() === "")
        continue;
      const entry = this.parseCedictLine(line);
      if (entry) {
        [entry.traditional, entry.simplified].forEach((form) => {
          if (!this.cedictMap.has(form))
            this.cedictMap.set(form, []);
          this.cedictMap.get(form).push(entry);
        });
      }
    }
  }
  hideHoverBox() {
    if (this.hoverBoxEl) {
      this.hoverBoxEl.style.display = "none";
    }
  }
  getForwardMatchedWord(text, offset) {
    const maxWordLen = 5;
    const substr = text.slice(offset, offset + maxWordLen);
    for (let len = maxWordLen; len > 0; len--) {
      const candidate = substr.slice(0, len);
      if (this.cedictMap.has(candidate)) {
        return { word: candidate, end: offset + len };
      }
    }
    return null;
  }
  showTooltipForWord(word, x, y) {
    if (!this.tooltipEl)
      return;
    const entries = this.cedictMap.get(word);
    if (!entries || entries.length === 0) {
      this.tooltipEl.style.display = "none";
      return;
    }
    const seen = /* @__PURE__ */ new Set();
    const uniqueEntries = entries.filter((entry) => {
      const id = `${entry.traditional}-${entry.simplified}-${entry.pinyin}-${entry.definitions.join(",")}`;
      if (seen.has(id))
        return false;
      seen.add(id);
      return true;
    });
    this.activeWord = word;
    this.activeEntries = uniqueEntries;
    const text = uniqueEntries.map(
      (entry) => `${entry.simplified} ${entry.simplified !== entry.traditional ? entry.traditional : ""} (${this.processPinyin(entry.pinyin)})
${entry.definitions.join("; ")}`
    ).join("\n\n");
    this.tooltipEl.innerText = text;
    if (!this.hoverBoxEl)
      return;
    const hoverRect = this.hoverBoxEl.getBoundingClientRect();
    this.tooltipEl.style.left = `${hoverRect.left + window.scrollX}px`;
    this.tooltipEl.style.top = `${hoverRect.bottom + window.scrollY + 4}px`;
    this.tooltipEl.style.display = "block";
  }
  processPinyin(pinyin) {
    const toneMap = {
      "a": ["\u0101", "\xE1", "\u01CE", "\xE0", "a"],
      "e": ["\u0113", "\xE9", "\u011B", "\xE8", "e"],
      "i": ["\u012B", "\xED", "\u01D0", "\xEC", "i"],
      "o": ["\u014D", "\xF3", "\u01D2", "\xF2", "o"],
      "u": ["\u016B", "\xFA", "\u01D4", "\xF9", "u"],
      "\xFC": ["\u01D6", "\u01D8", "\u01DA", "\u01DC", "\xFC"]
    };
    const vowels = ["a", "o", "e", "i", "u", "\xFC"];
    return pinyin.split(" ").map((syllable) => {
      const tone = parseInt(syllable[syllable.length - 1]);
      if (tone < 1 || tone > 5)
        return syllable;
      let core = syllable.slice(0, -1);
      let vowelToReplace = "";
      for (const v of vowels) {
        if (core.includes(v)) {
          vowelToReplace = v;
          break;
        }
      }
      if (!vowelToReplace)
        return syllable;
      const accented = toneMap[vowelToReplace][tone - 1];
      const regex = new RegExp(vowelToReplace + "(?!.*" + vowelToReplace + ")", "g");
      core = core.replace(regex, accented);
      return core;
    }).join(" ");
  }
  hideTooltip() {
    this.tooltipEl.style.display = "none";
  }
  async addToVocab(word, entries) {
    var _a, _b, _c, _d;
    console.log("called addToVocab!");
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    let list = [];
    try {
      const file = await this.app.vault.adapter.read(path);
      list = JSON.parse(file);
    } catch (e) {
      list = [];
    }
    const newSentence = (((_a = this.activeExampleSentence) == null ? void 0 : _a.trim()) === word ? "" : (_b = this.activeExampleSentence) == null ? void 0 : _b.trim()) || "";
    const existingEntry = list.find((e) => e.simplified === word);
    if (existingEntry) {
      if (this.settings.saveSentences && newSentence) {
        if (!existingEntry.exampleSentences)
          existingEntry.exampleSentences = [];
        if (!existingEntry.exampleSentences.includes(newSentence)) {
          existingEntry.exampleSentences.push(newSentence);
          await this.app.vault.adapter.write(path, JSON.stringify(list, null, 2));
          new import_obsidian.Notice(`Added new sentence to ${word}.`);
        } else {
          new import_obsidian.Notice(`${word} is already in your vocab list.`);
        }
      } else {
        new import_obsidian.Notice(`${word} is already in your vocab list.`);
      }
      this.activeExampleSentence = null;
      (_c = this.refreshVocabSidebar) == null ? void 0 : _c.call(this);
      return;
    }
    const allDefs = entries.flatMap((e) => e.definitions);
    const uniqueDefs = Array.from(new Set(allDefs));
    const rep = entries[0];
    const newEntry = {
      simplified: rep.simplified,
      traditional: rep.traditional,
      pinyin: rep.pinyin,
      definitions: uniqueDefs,
      addedAt: new Date().toISOString(),
      ...this.settings.saveSentences && this.activeExampleSentence ? { exampleSentences: [this.activeExampleSentence] } : {}
    };
    list.push(newEntry);
    await this.app.vault.adapter.write(path, JSON.stringify(list, null, 2));
    new import_obsidian.Notice(`Added ${word} to vocab list!`);
    (_d = this.refreshVocabSidebar) == null ? void 0 : _d.call(this);
    this.activeExampleSentence = null;
  }
  async exportVocabToFlashcards() {
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    const outputPath = `Vocab Deck.md`;
    let list = [];
    try {
      const file = await this.app.vault.adapter.read(path);
      list = JSON.parse(file);
    } catch (e) {
      new import_obsidian.Notice("No vocab list found.");
      return;
    }
    const lines = list.map((entry) => {
      const defs = entry.definitions.join("; ");
      return `${entry.simplified}::${defs}`;
    });
    const content = `#ChineseVocab

${lines.join("\n\n")}`;
    await this.app.vault.adapter.write(outputPath, content);
    new import_obsidian.Notice("Exported vocab to flashcard deck!");
  }
  extractSentenceFromTextAtOffset(text, offset, word) {
    var _a;
    if (!this.settings.saveSentences)
      return "";
    const punctuation = /[。！？!?]/;
    let start = offset;
    while (start > 0 && !punctuation.test(text[start - 1])) {
      start--;
    }
    let end = offset;
    while (end < text.length && !punctuation.test(text[end])) {
      end++;
    }
    if (end < text.length)
      end++;
    const sentence = text.slice(start, end).trim();
    if (!sentence || !sentence.includes(word)) {
      if (line.trim() === word)
        return "";
      const line = (_a = text.split("\n").find((l) => l.includes(word))) != null ? _a : text;
      return line.trim();
    }
    return sentence;
  }
  async activateView() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_VOCAB_SIDEBAR);
    if (leaves.length === 0) {
      await this.app.workspace.getRightLeaf(false).setViewState({
        type: VIEW_TYPE_VOCAB_SIDEBAR,
        active: true
      });
    }
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_VOCAB_SIDEBAR)[0]
    );
  }
  // needs to be accessed by VocabSidebarView
  async loadVocabList() {
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    try {
      const file = await this.app.vault.adapter.read(path);
      return JSON.parse(file);
    } catch (e) {
      return [];
    }
  }
  // Do this so sidebar doesnt get double rendered when I switch leaves
  triggerSidebarRefresh() {
    if (this.refreshTimer)
      window.clearTimeout(this.refreshTimer);
    this.refreshTimer = window.setTimeout(() => {
      var _a;
      (_a = this.refreshVocabSidebar) == null ? void 0 : _a.call(this);
    }, 100);
  }
  scrollToWordInActiveFile(word) {
    var _a;
    console.log(`scrolling to ${word}`);
    const view = this.currentMarkdownView;
    const mode = view.getMode();
    if (!view) {
      console.warn("No active Markdown view");
      return;
    }
    let scroller;
    if (mode === "source") {
      scroller = view.containerEl.querySelector(".cm-scroller");
    } else {
      scroller = view.containerEl.querySelector(".markdown-preview-sizer");
    }
    if (!scroller)
      return;
    let lines;
    if (mode === "source") {
      lines = scroller.querySelectorAll(".cm-line");
    } else {
      lines = scroller.querySelectorAll(
        ".el-p, .el-h1, .el-h2, .el-h3, .el-li, .el-blockquote, .el-table"
      );
      console.log(lines);
    }
    for (const line of lines) {
      if ((_a = line.textContent) == null ? void 0 : _a.includes(word)) {
        console.log("Found match!");
        console.log("LINE:", line.textContent);
        line.scrollIntoView({ behavior: "smooth", block: "center" });
        setTimeout(() => {
          line.classList.add("cedict-line-hover");
          setTimeout(() => {
            line.classList.remove("cedict-line-hover");
          }, 5e3);
        }, 100);
        break;
      }
    }
  }
};
var VocabSidebarView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_VOCAB_SIDEBAR;
  }
  getDisplayText() {
    return "Vocabulary";
  }
  getIcon() {
    return "book-open";
  }
  async onOpen() {
    const container = this.containerEl;
    container.querySelectorAll(".vocab-entry").forEach((el) => el.remove());
    this.plugin.refreshVocabSidebar = () => this.renderSidebar();
    await this.waitForView();
    await this.renderSidebar();
  }
  async onClose() {
    this.plugin.refreshVocabSidebar = null;
  }
  async waitForView() {
    let retries = 10;
    while (!this.plugin.currentMarkdownView && retries-- > 0) {
      await new Promise((resolve) => setTimeout(resolve, 100));
    }
  }
  async renderSidebar() {
    var _a, _b, _c, _d;
    const container = this.containerEl.children[1];
    container.empty();
    const vocabList = await this.plugin.loadVocabList();
    const view = this.plugin.currentMarkdownView;
    const currentFileText = (view == null ? void 0 : view.editor) ? view.editor.getValue() : (_a = view == null ? void 0 : view.contentEl.textContent) != null ? _a : "";
    const matchingVocab = vocabList.filter(
      (entry) => currentFileText.includes(entry.simplified)
    );
    container.createEl("h3", {
      text: "Vocab in this note",
      cls: "vocab-heading"
    });
    if (!matchingVocab.length) {
      container.createEl("p", { text: "No vocab yet." });
      return;
    }
    for (const entry of matchingVocab) {
      const wrapper = container.createEl("div", { cls: "vocab-entry" });
      wrapper.createEl("div", {
        text: `${entry.simplified} ${entry.simplified !== entry.traditional ? "(" + entry.traditional + ")" : ""}`,
        cls: "vocab-word"
      });
      wrapper.createEl("div", {
        text: (_d = (_c = this.plugin).processPinyin) == null ? void 0 : _d.call(_c, (_b = entry.pinyin) != null ? _b : ""),
        cls: "vocab-pinyin"
      });
      wrapper.createEl("div", {
        text: entry.definitions.join(";\n "),
        cls: "vocab-defs"
      });
      wrapper.style.cursor = "pointer";
      wrapper.onclick = () => {
        this.plugin.scrollToWordInActiveFile(entry.simplified);
      };
    }
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Save example sentences").setDesc("When saving a vocab word, also store the sentence it appears in.").addToggle((toggle) => toggle.setValue(this.plugin.settings.saveSentences).onChange(async (value) => {
      this.plugin.settings.saveSentences = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBJdGVtVmlldyB9IGZyb20gJ29ic2lkaWFuJztcblxuY29uc3QgVklFV19UWVBFX1ZPQ0FCX1NJREVCQVIgPSBcInZvY2FiLXNpZGViYXJcIjtcblxuLy8gVGhpcyBkZWZpbmVzIHRoZSBzdHJ1Y3R1cmUgZm9yIGRpY3Rpb25hcnkgZW50cmllc1xuaW50ZXJmYWNlIENlZGljdEVudHJ5IHtcblx0dHJhZGl0aW9uYWw6IHN0cmluZztcblx0c2ltcGxpZmllZDogc3RyaW5nO1xuXHRwaW55aW46IHN0cmluZztcblx0ZGVmaW5pdGlvbnM6IHN0cmluZ1tdO1xuICB9XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XG5cdHNhdmVTZW50ZW5jZXM6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBWb2NhYkVudHJ5IHtcblx0c2ltcGxpZmllZDogc3RyaW5nO1xuXHR0cmFkaXRpb25hbDogc3RyaW5nO1xuXHRwaW55aW46IHN0cmluZztcblx0ZGVmaW5pdGlvbnM6IHN0cmluZ1tdO1xuXHRhZGRlZEF0OiBzdHJpbmc7XG5cdGV4YW1wbGVTZW50ZW5jZXM/OiBzdHJpbmdbXTsgLy8gb3B0aW9uYWxcbn07XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XG5cdHNhdmVTZW50ZW5jZXM6IGZhbHNlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XG5cdHByaXZhdGUgY2VkaWN0TWFwOiBNYXA8c3RyaW5nLCBDZWRpY3RFbnRyeVtdPiA9IG5ldyBNYXAoKTtcblx0cHJpdmF0ZSBhY3RpdmVIaWdobGlnaHQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYWN0aXZlV29yZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYWN0aXZlRW50cmllczogQ2VkaWN0RW50cnlbXSB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGhvdmVyQm94RWw6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgdG9vbHRpcEVsOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwdWJsaWMgcmVmcmVzaFZvY2FiU2lkZWJhcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gbm90IHVwZGF0ZSB2b2NhYiBsaXN0IG9uIGV2ZXJ5IGtleXN0cm9rZVxuXHRwcml2YXRlIHJlZnJlc2hUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gc2F2ZSBjdXJyZW50TWFya2Rvd25WaWV3IHNvIHZvY2FiIGxpc3QgZG9lc250IGRpc2FwcGVhciB3aGVuIGkgY2xpY2sgb24gdm9jYWIgc2lkZWJhclxuXHRwdWJsaWMgY3VycmVudE1hcmtkb3duVmlldzogTWFya2Rvd25WaWV3IHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gRm9yIGlmIHRoZSB1c2VyIHdhbnRzIHRvIHN0b3JlIHRoZSBjdXJyZW50IHNlbnRlbmNlIGFzIGFuIGV4YW1wbGVcblx0cHJpdmF0ZSBhY3RpdmVFeGFtcGxlU2VudGVuY2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG5cblx0cHJpdmF0ZSBob3ZlckhhbmRsZXI6IChlOiBNb3VzZUV2ZW50KSA9PiB2b2lkO1x0XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFxuXHRcdC8vIExvYWQgZGljdGlvbmFyeVxuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREaWN0aW9uYXJ5RmlsZShgLm9ic2lkaWFuL3BsdWdpbnMvJHt0aGlzLm1hbmlmZXN0LmlkfS9jZWRpY3RfdHMudThgKTtcbiAgICBcdHRoaXMubG9hZENlZGljdEZyb21UZXh0KGRhdGEpO1xuXHRcdGNvbnNvbGUubG9nKFwiQ2VkaWN0IGxvYWRlZC5cIilcblxuXHRcdC8vIEhvdmVyIGJveFxuXG5cdFx0Ly8gU3R5bGVzXG5cdFx0Y29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdFx0c3R5bGUuaWQgPSBcImNlZGljdC1ob3Zlci1zdHlsZVwiO1xuXHRcdHN0eWxlLmlubmVyVGV4dCA9IGBcblx0XHQuY2VkaWN0LWhvdmVyLWJveCB7XG5cdFx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XG5cdFx0XHR6LWluZGV4OiAwICFpbXBvcnRhbnQ7XG5cdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiBoc2xhKHZhcigtLWFjY2VudC1oKSwgdmFyKC0tYWNjZW50LXMpLCB2YXIoLS1hY2NlbnQtbCksIDAuMyk7XG5cdFx0XHRwb2ludGVyLWV2ZW50czogbm9uZTtcblx0XHRcdGJvcmRlci1yYWRpdXM6IDNweDtcblx0XHRcdHRyYW5zaXRpb246IGFsbCAwLjA1cyBlYXNlO1xuXHRcdH1cblx0XHQuY2VkaWN0LWxpbmUtaG92ZXIge1xuXHRcdFx0YmFja2dyb3VuZC1jb2xvcjogaHNsYSh2YXIoLS1hY2NlbnQtaCksIHZhcigtLWFjY2VudC1zKSwgdmFyKC0tYWNjZW50LWwpLCAwLjMpO1xuXHRcdFx0dHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7XG5cdFx0fVxuXHRcdC5jbS1saW5le1xuXHRcdFx0dHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTtcblx0XHR9XG5cblx0XHQudm9jYWItZW50cnkge1xuXHRcdFx0bWFyZ2luLWJvdHRvbTogMXJlbTtcblx0XHRcdHBhZGRpbmctYm90dG9tOiAwLjVyZW07XG5cdFx0XHRib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuXHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdH1cblx0XG5cdFx0LnZvY2FiLXdvcmQge1xuXHRcdFx0Zm9udC13ZWlnaHQ6IGJvbGQ7XG5cdFx0XHRmb250LXNpemU6IDEuMWVtO1xuXHRcdH1cblx0XG5cdFx0LnZvY2FiLXBpbnlpbiB7XG5cdFx0XHRmb250LXN0eWxlOiBpdGFsaWM7XG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG5cdFx0XHRtYXJnaW4tdG9wOiAycHg7XG5cdFx0fVxuXHRcblx0XHQudm9jYWItZGVmcyB7XG5cdFx0XHRtYXJnaW4tdG9wOiA0cHg7XG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuXHRcdFx0Zm9udC1zaXplOiAwLjk1ZW07XG5cdFx0XHRsaW5lLWhlaWdodDogMS40O1xuXHRcdH1cblx0XHRgO1xuXHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG5cdFx0dGhpcy5ob3ZlckJveEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLmhvdmVyQm94RWwuY2xhc3NOYW1lID0gXCJjZWRpY3QtaG92ZXItYm94XCI7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmhvdmVyQm94RWwpO1xuXG5cdFx0Ly8gVG9vbHRpcFxuXHRcdHRoaXMudG9vbHRpcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5wYWRkaW5nID0gXCI2cHggMTBweFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmJhY2tncm91bmQgPSBcInZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KVwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmNvbG9yID0gXCJ2YXIoLS10ZXh0LW5vcm1hbClcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjZweFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmJveFNoYWRvdyA9IFwiMCA0cHggOHB4IHJnYmEoMCwwLDAsMC4xKVwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLndoaXRlU3BhY2UgPSBcInByZS1saW5lXCI7XG5cdFx0dGhpcy50b29sdGlwRWwuc3R5bGUuekluZGV4ID0gXCIxMDAwMFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnRvb2x0aXBFbCk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1x0XG5cblx0XHR0aGlzLmhvdmVySGFuZGxlciA9IHRoaXMuaG92ZXJIYW5kbGVyQ2hhcnMuYmluZCh0aGlzKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuaG92ZXJIYW5kbGVyKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgXCJrZXlkb3duXCIsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSBcInNcIiAmJiB0aGlzLmFjdGl2ZVdvcmQgJiYgdGhpcy5hY3RpdmVFbnRyaWVzKSB7XG5cdFx0XHRcdHRoaXMuYWRkVG9Wb2NhYih0aGlzLmFjdGl2ZVdvcmQsIHRoaXMuYWN0aXZlRW50cmllcyk7XG5cdFx0XHR9XG5cdFx0fSk7XHRcdFxuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImV4cG9ydC12b2NhYi1mbGFzaGNhcmRzXCIsXG5cdFx0XHRuYW1lOiBcIkV4cG9ydCBWb2NhYiB0byBGbGFzaGNhcmRzXCIsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5leHBvcnRWb2NhYlRvRmxhc2hjYXJkcygpXG5cdFx0fSk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcblx0XHRcdFZJRVdfVFlQRV9WT0NBQl9TSURFQkFSLFxuXHRcdFx0KGxlYWYpID0+IG5ldyBWb2NhYlNpZGViYXJWaWV3KGxlYWYsIHRoaXMpXG5cdFx0KTtcblx0XHRcblx0XHR0aGlzLmFkZFJpYmJvbkljb24oXCJib29rLW9wZW5cIiwgXCJPcGVuIFZvY2FiIFNpZGViYXJcIiwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5hY3RpdmF0ZVZpZXcoKTtcblx0XHR9KTtcblx0XHRhd2FpdCB0aGlzLmFjdGl2YXRlVmlldygpOyAvLyBUT0RPOiBtYWtlIHN1cmUgdGhpcyBhbHdheXMgb3BlbnMgaW4gdGhlIHJpZ2h0IHNpZGViYXJcblxuXHRcdC8vIENoYW5nZSB2b2NhYiBzaWRlYmFyIHdoZW4gSSBjaGFuZ2UgbGVhZlxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImFjdGl2ZS1sZWFmLWNoYW5nZVwiLCAoKSA9PiB7XG5cdFx0XHRcdC8vIG9ubHkgY2hhbmdlIGN1cnJNRHZpZXcgaWYgbmV3IHZpZXcgaXMgYWxzbyBNRCwgb3RoZXJ3aXNlIGN1cnJlbnRNYXJrZG93blZpZXcgYmVjb21lcyBudWxsIHdoZW4gaSBjbGljayBvbiBzaWRlYmFyXG5cdFx0XHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdFx0XHRpZiAodmlldykge1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudE1hcmtkb3duVmlldyA9IHZpZXc7XG5cdFx0XHRcdFx0dGhpcy50cmlnZ2VyU2lkZWJhclJlZnJlc2goKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXHRcdFxuXHRcdC8vIENoYW5nZSB2b2NhYiBzaWRlYmFyIHdoZW4gSSBlZGl0IGxlYWZcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJlZGl0b3ItY2hhbmdlXCIsICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMucmVmcmVzaFRpbWVyKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmVmcmVzaFRpbWVyKTtcblx0XHRcdFx0dGhpcy5yZWZyZXNoVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdFx0aWYgKHZpZXcpIHtcblx0XHRcdFx0XHRcdHRoaXMuY3VycmVudE1hcmtkb3duVmlldyA9IHZpZXc7XG5cdFx0XHRcdFx0XHR0aGlzLnRyaWdnZXJTaWRlYmFyUmVmcmVzaCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgMzAwKTsgLy8gMzAwbXMgZGVsYXkgYWZ0ZXIgbGFzdCBlZGl0XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsICgpID0+IHtcblx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdGlmICh2aWV3KSB7XG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50TWFya2Rvd25WaWV3ID0gdmlldztcblx0XHRcdFx0XHR0aGlzLnRyaWdnZXJTaWRlYmFyUmVmcmVzaCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuaG92ZXJIYW5kbGVyKTtcblx0XHRpZiAodGhpcy5hY3RpdmVIaWdobGlnaHQpIHtcblx0XHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuYWN0aXZlSGlnaGxpZ2h0LnBhcmVudE5vZGU7XG5cdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdHBhcmVudC5yZXBsYWNlQ2hpbGQoXG5cdFx0XHRcdFx0ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5hY3RpdmVIaWdobGlnaHQuaW5uZXJUZXh0KSxcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUhpZ2hsaWdodFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5hY3RpdmVIaWdobGlnaHQgPSBudWxsO1xuXHRcdH1cblx0XHRpZiAodGhpcy5ob3ZlckJveEVsKSB7XG5cdFx0XHR0aGlzLmhvdmVyQm94RWwucmVtb3ZlKCk7XG5cdFx0XHR0aGlzLmhvdmVyQm94RWwgPSBudWxsO1xuXHRcdH1cblx0XHRcblx0XHRpZiAodGhpcy50b29sdGlwRWwpIHtcblx0XHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgLy8ganVzdCB0byBiZSBzYWZlXG5cdFx0XHR0aGlzLnRvb2x0aXBFbC5yZW1vdmUoKTtcblx0XHRcdHRoaXMudG9vbHRpcEVsID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBDbGVhbiB1cCBzdHlsZXNcblx0XHRjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjZWRpY3QtaG92ZXItc3R5bGVcIik7XG5cdFx0aWYgKHN0eWxlRWwpIHN0eWxlRWwucmVtb3ZlKCk7XHRcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBsb2FkRGljdGlvbmFyeUZpbGUoZmlsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0Y29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWRCaW5hcnkoZmlsZU5hbWUpO1xuXHRcdGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKTtcblx0XHRyZXR1cm4gZGVjb2Rlci5kZWNvZGUoYXJyYXlCdWZmZXIpO1xuXHR9XG5cdHByaXZhdGUgcGFyc2VDZWRpY3RMaW5lKGxpbmU6IHN0cmluZyk6IENlZGljdEVudHJ5IHwgbnVsbCB7XG5cdFx0Y29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFxcUyspXFxzKyhcXFMrKVxccytcXFsoLis/KVxcXVxccytcXC8oLispXFwvLyk7XG5cdFx0aWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XG5cdFxuXHRcdGNvbnN0IFssIHRyYWQsIHNpbXAsIHBpbnlpbiwgZGVmc10gPSBtYXRjaDtcblx0XHRyZXR1cm4ge1xuXHRcdCAgdHJhZGl0aW9uYWw6IHRyYWQsXG5cdFx0ICBzaW1wbGlmaWVkOiBzaW1wLFxuXHRcdCAgcGlueWluLFxuXHRcdCAgZGVmaW5pdGlvbnM6IGRlZnMuc3BsaXQoJy8nKVxuXHRcdH07XG5cdCAgfVxuXHRcblx0cHJpdmF0ZSBsb2FkQ2VkaWN0RnJvbVRleHQoY2VkaWN0VGV4dDogc3RyaW5nKSB7XG5cdGNvbnN0IGxpbmVzID0gY2VkaWN0VGV4dC5zcGxpdCgnXFxuJyk7XG5cdFx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKCcjJykgfHwgbGluZS50cmltKCkgPT09ICcnKSBjb250aW51ZTtcblx0XHRcdGNvbnN0IGVudHJ5ID0gdGhpcy5wYXJzZUNlZGljdExpbmUobGluZSk7XG5cdFx0XHRpZiAoZW50cnkpIHtcblx0XHRcdFx0W2VudHJ5LnRyYWRpdGlvbmFsLCBlbnRyeS5zaW1wbGlmaWVkXS5mb3JFYWNoKChmb3JtKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLmNlZGljdE1hcC5oYXMoZm9ybSkpIHRoaXMuY2VkaWN0TWFwLnNldChmb3JtLCBbXSk7XG5cdFx0XHRcdFx0dGhpcy5jZWRpY3RNYXAuZ2V0KGZvcm0pIS5wdXNoKGVudHJ5KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHByaXZhdGUgaG92ZXJIYW5kbGVyQ2hhcnMgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRjb25zdCBlbCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcblx0XHRjb25zdCBpc0VkaXRMaW5lID0gZWwuY2xvc2VzdChcIi5jbS1saW5lXCIpO1xuXHRcdGNvbnN0IGlzUHJldmlld0Jsb2NrID0gZWwuY2xvc2VzdChcIi5tYXJrZG93bi1wcmV2aWV3LXZpZXdcIik/LnF1ZXJ5U2VsZWN0b3IoXCIubWFya2Rvd24tcHJldmlldy1zaXplclwiKTtcblx0XHRjb25zdCBpc1ByZXZpZXdUYXJnZXQgPSBlbC5jbG9zZXN0KFwiLmVsLXAsIC5lbC1oMSwgLmVsLWgyLCAuZWwtaDMsIC5lbC1saSwgLmVsLWJsb2NrcXVvdGUsIC5lbC10YWJsZVwiKTtcblxuXHRcdGlmICghaXNFZGl0TGluZSAmJiAhKGlzUHJldmlld0Jsb2NrICYmIGlzUHJldmlld1RhcmdldCkpIHtcblx0XHRcdHRoaXMuaGlkZUhvdmVyQm94KCk7XG5cdFx0XHR0aGlzLmhpZGVUb29sdGlwKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFx0XG5cdFx0Y29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jYXJldFJhbmdlRnJvbVBvaW50KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuXHRcdGlmICghcmFuZ2UgfHwgcmFuZ2Uuc3RhcnRDb250YWluZXIubm9kZVR5cGUgIT09IE5vZGUuVEVYVF9OT0RFKSB7XG5cdFx0XHR0aGlzLmhpZGVIb3ZlckJveCgpO1xuXHRcdFx0dGhpcy5oaWRlVG9vbHRpcCgpO1xuXHRcdFx0dGhpcy5hY3RpdmVIaWdobGlnaHQgPSBudWxsO1xuXHRcdFx0dGhpcy5hY3RpdmVXb3JkID0gbnVsbDtcblx0XHRcdHRoaXMuYWN0aXZlRW50cmllcyA9IG51bGw7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHRjb25zdCB0ZXh0Tm9kZSA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyIGFzIFRleHQ7XG5cdFx0Y29uc3Qgb2Zmc2V0ID0gcmFuZ2Uuc3RhcnRPZmZzZXQ7XG5cdFx0Y29uc3QgdGV4dCA9IHRleHROb2RlLnRleHRDb250ZW50ID8/IFwiXCI7XG5cdFxuXHRcdC8vIG91dC1vZi1ib3VuZHNcblx0XHRpZiAob2Zmc2V0IDwgMCB8fCBvZmZzZXQgPj0gdGV4dC5sZW5ndGgpIHtcblx0XHRcdHRoaXMuaGlkZUhvdmVyQm94KCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25seSBwcm9jZWVkIGlmIHRoZSBob3ZlcmVkIGNoYXJhY3RlciBpcyBDaGluZXNlXG5cdFx0Y29uc3QgY2hpbmVzZUNoYXIgPSAvW1xcdTRlMDAtXFx1OWZmZl0vO1xuXHRcdGlmICghY2hpbmVzZUNoYXIudGVzdCh0ZXh0W29mZnNldF0pKSB7XG5cdFx0XHR0aGlzLmhpZGVIb3ZlckJveCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XG5cdFx0Ly8gT25seSB0cnkgdG8gbWF0Y2ggYSB3b3JkIGZyb20gdGhlIGhvdmVyZWQgY2hhciBmb3J3YXJkXG5cdFx0Y29uc3QgbWF0Y2ggPSB0aGlzLmdldEZvcndhcmRNYXRjaGVkV29yZCh0ZXh0LCBvZmZzZXQpO1xuXHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdHRoaXMuaGlkZUhvdmVyQm94KCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RhcnQgPSBvZmZzZXQ7XG5cdFx0Y29uc3QgZW5kID0gTWF0aC5taW4obWF0Y2guZW5kLCB0ZXh0Tm9kZS5sZW5ndGgpOyAvLyBjbGFtcHMgc2FmZWx5XG5cblx0XHQvLyBIaWdobGlnaHQgbWF0Y2hlZCB3b3JkXG5cdFx0Y29uc3QgcmFuZ2VGb3JXb3JkID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcblx0XHRyYW5nZUZvcldvcmQuc2V0U3RhcnQodGV4dE5vZGUsIHN0YXJ0KTtcblx0XHRyYW5nZUZvcldvcmQuc2V0RW5kKHRleHROb2RlLCBlbmQpO1xuXHRcblx0XHRjb25zdCByZWN0ID0gcmFuZ2VGb3JXb3JkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcblx0XHRpZiAodGhpcy5ob3ZlckJveEVsKSB7XG5cdFx0XHR0aGlzLmhvdmVyQm94RWwuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdCArIHdpbmRvdy5zY3JvbGxYfXB4YDtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5zdHlsZS50b3AgPSBgJHtyZWN0LnRvcCArIHdpbmRvdy5zY3JvbGxZfXB4YDtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5zdHlsZS53aWR0aCA9IGAke3JlY3Qud2lkdGh9cHhgO1xuXHRcdFx0dGhpcy5ob3ZlckJveEVsLnN0eWxlLmhlaWdodCA9IGAke3JlY3QuaGVpZ2h0fXB4YDtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNhdmVTZW50ZW5jZXMpIHtcblx0XHRcdGNvbnN0IHNlbnRlbmNlID0gdGhpcy5leHRyYWN0U2VudGVuY2VGcm9tVGV4dEF0T2Zmc2V0KHRleHQsIG9mZnNldCwgbWF0Y2gud29yZCk7XG5cdFx0XHR0aGlzLmFjdGl2ZUV4YW1wbGVTZW50ZW5jZSA9IHNlbnRlbmNlO1xuXHRcdH1cblxuXHRcdC8vIFRvb2x0aXBcblx0XHR0aGlzLnNob3dUb29sdGlwRm9yV29yZChtYXRjaC53b3JkLCByZWN0LmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCwgcmVjdC50b3AgKyB3aW5kb3cuc2Nyb2xsWSk7XG5cdH07XG5cdFxuXHRwcml2YXRlIGhpZGVIb3ZlckJveCgpIHtcblx0XHRpZiAodGhpcy5ob3ZlckJveEVsKSB7XG5cdFx0XHR0aGlzLmhvdmVyQm94RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH1cblx0fVxuXHRcblx0cHJpdmF0ZSBnZXRGb3J3YXJkTWF0Y2hlZFdvcmQodGV4dDogc3RyaW5nLCBvZmZzZXQ6IG51bWJlcik6IHsgd29yZDogc3RyaW5nOyBlbmQ6IG51bWJlciB9IHwgbnVsbCB7XG5cdFx0Y29uc3QgbWF4V29yZExlbiA9IDU7XG5cdFx0Y29uc3Qgc3Vic3RyID0gdGV4dC5zbGljZShvZmZzZXQsIG9mZnNldCArIG1heFdvcmRMZW4pO1xuXHRcblx0XHQvLyBUcnkgbG9uZ2VzdCB0byBzaG9ydGVzdFxuXHRcdGZvciAobGV0IGxlbiA9IG1heFdvcmRMZW47IGxlbiA+IDA7IGxlbi0tKSB7XG5cdFx0XHRjb25zdCBjYW5kaWRhdGUgPSBzdWJzdHIuc2xpY2UoMCwgbGVuKTtcblx0XHRcdGlmICh0aGlzLmNlZGljdE1hcC5oYXMoY2FuZGlkYXRlKSkge1xuXHRcdFx0XHRyZXR1cm4geyB3b3JkOiBjYW5kaWRhdGUsIGVuZDogb2Zmc2V0ICsgbGVuIH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH07XHRcblx0ICBcblx0XG5cdHByaXZhdGUgc2hvd1Rvb2x0aXBGb3JXb3JkKHdvcmQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcblx0XHRpZiAoIXRoaXMudG9vbHRpcEVsKSByZXR1cm47XG5cdFxuXHRcdGNvbnN0IGVudHJpZXMgPSB0aGlzLmNlZGljdE1hcC5nZXQod29yZCk7XG5cdFx0aWYgKCFlbnRyaWVzIHx8IGVudHJpZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZSBlbnRyaWVzIC0gZG8gSSBuZWVkIHRoaXM/IFxuXHRcdGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHRjb25zdCB1bmlxdWVFbnRyaWVzID0gZW50cmllcy5maWx0ZXIoZW50cnkgPT4ge1xuXHRcdFx0Y29uc3QgaWQgPSBgJHtlbnRyeS50cmFkaXRpb25hbH0tJHtlbnRyeS5zaW1wbGlmaWVkfS0ke2VudHJ5LnBpbnlpbn0tJHtlbnRyeS5kZWZpbml0aW9ucy5qb2luKFwiLFwiKX1gO1xuXHRcdFx0aWYgKHNlZW4uaGFzKGlkKSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0c2Vlbi5hZGQoaWQpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFjdGl2ZVdvcmQgPSB3b3JkO1xuXHRcdHRoaXMuYWN0aXZlRW50cmllcyA9IHVuaXF1ZUVudHJpZXM7XG5cblx0XHRjb25zdCB0ZXh0ID0gdW5pcXVlRW50cmllcy5tYXAoZW50cnkgPT4gXG5cdFx0XHRgJHtlbnRyeS5zaW1wbGlmaWVkfSAke2VudHJ5LnNpbXBsaWZpZWQgIT09IGVudHJ5LnRyYWRpdGlvbmFsPyBlbnRyeS50cmFkaXRpb25hbDogXCJcIn0gKCR7dGhpcy5wcm9jZXNzUGlueWluKGVudHJ5LnBpbnlpbil9KVxcbiR7ZW50cnkuZGVmaW5pdGlvbnMuam9pbignOyAnKX1gXG5cdFx0KS5qb2luKCdcXG5cXG4nKTtcblxuXHRcdHRoaXMudG9vbHRpcEVsLmlubmVyVGV4dCA9IHRleHQ7XG5cdFx0aWYgKCF0aGlzLmhvdmVyQm94RWwpIHJldHVybjsgLy8gRmVlbCBsaWtlIEkgZG9udCBuZWVkIHRoaXM/IFxuXHRcdGNvbnN0IGhvdmVyUmVjdCA9IHRoaXMuaG92ZXJCb3hFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5sZWZ0ID0gYCR7aG92ZXJSZWN0LmxlZnQgKyB3aW5kb3cuc2Nyb2xsWH1weGA7XG5cdFx0dGhpcy50b29sdGlwRWwuc3R5bGUudG9wID0gYCR7aG92ZXJSZWN0LmJvdHRvbSArIHdpbmRvdy5zY3JvbGxZICsgNH1weGA7IC8vIDRweCBwYWRkaW5nXG5cblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXHR9XG5cblx0cHVibGljIHByb2Nlc3NQaW55aW4ocGlueWluOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHRvbmVNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcblx0XHRcdFwiYVwiOiBbXCJcdTAxMDFcIiwgXCJcdTAwRTFcIiwgXCJcdTAxQ0VcIiwgXCJcdTAwRTBcIiwgXCJhXCJdLFxuXHRcdFx0XCJlXCI6IFtcIlx1MDExM1wiLCBcIlx1MDBFOVwiLCBcIlx1MDExQlwiLCBcIlx1MDBFOFwiLCBcImVcIl0sXG5cdFx0XHRcImlcIjogW1wiXHUwMTJCXCIsIFwiXHUwMEVEXCIsIFwiXHUwMUQwXCIsIFwiXHUwMEVDXCIsIFwiaVwiXSxcblx0XHRcdFwib1wiOiBbXCJcdTAxNERcIiwgXCJcdTAwRjNcIiwgXCJcdTAxRDJcIiwgXCJcdTAwRjJcIiwgXCJvXCJdLFxuXHRcdFx0XCJ1XCI6IFtcIlx1MDE2QlwiLCBcIlx1MDBGQVwiLCBcIlx1MDFENFwiLCBcIlx1MDBGOVwiLCBcInVcIl0sXG5cdFx0XHRcIlx1MDBGQ1wiOiBbXCJcdTAxRDZcIiwgXCJcdTAxRDhcIiwgXCJcdTAxREFcIiwgXCJcdTAxRENcIiwgXCJcdTAwRkNcIl1cblx0XHR9O1xuXHRcblx0XHRjb25zdCB2b3dlbHMgPSBbXCJhXCIsIFwib1wiLCBcImVcIiwgXCJpXCIsIFwidVwiLCBcIlx1MDBGQ1wiXTtcblx0XG5cdFx0Ly8gUHJvY2VzcyBlYWNoIHN5bGxhYmxlIChzcGxpdCBvbiBzcGFjZSlcblx0XHRyZXR1cm4gcGlueWluLnNwbGl0KFwiIFwiKS5tYXAoc3lsbGFibGUgPT4ge1xuXHRcdFx0Y29uc3QgdG9uZSA9IHBhcnNlSW50KHN5bGxhYmxlW3N5bGxhYmxlLmxlbmd0aCAtIDFdKTtcblx0XHRcdGlmICh0b25lIDwgMSB8fCB0b25lID4gNSkgcmV0dXJuIHN5bGxhYmxlOyAvLyBza2lwIGlmIG5vIHZhbGlkIHRvbmUgbnVtYmVyXG5cdFxuXHRcdFx0bGV0IGNvcmUgPSBzeWxsYWJsZS5zbGljZSgwLCAtMSk7IC8vIHJlbW92ZSB0b25lIG51bWJlclxuXHRcdFx0bGV0IHZvd2VsVG9SZXBsYWNlID0gXCJcIjtcblx0XG5cdFx0XHQvLyBmaW5kIGNvcnJlY3Qgdm93ZWwgdG8gcmVwbGFjZSAocHJpb3JpdHkgb3JkZXIpXG5cdFx0XHRmb3IgKGNvbnN0IHYgb2Ygdm93ZWxzKSB7XG5cdFx0XHRcdGlmIChjb3JlLmluY2x1ZGVzKHYpKSB7XG5cdFx0XHRcdFx0dm93ZWxUb1JlcGxhY2UgPSB2O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCF2b3dlbFRvUmVwbGFjZSkgcmV0dXJuIHN5bGxhYmxlOyAvLyBmYWxsYmFjazogbm8gdm93ZWwgdG8gbW9kaWZ5XG5cdFxuXHRcdFx0Y29uc3QgYWNjZW50ZWQgPSB0b25lTWFwW3Zvd2VsVG9SZXBsYWNlXVt0b25lIC0gMV07XG5cdFx0XHRjb25zdCByZWdleCA9IG5ldyBSZWdFeHAodm93ZWxUb1JlcGxhY2UgKyBcIig/IS4qXCIgKyB2b3dlbFRvUmVwbGFjZSArIFwiKVwiLCBcImdcIik7IC8vIHJlcGxhY2UgTEFTVCBvY2N1cnJlbmNlXG5cdFxuXHRcdFx0Y29yZSA9IGNvcmUucmVwbGFjZShyZWdleCwgYWNjZW50ZWQpO1xuXHRcdFx0cmV0dXJuIGNvcmU7XG5cdFx0fSkuam9pbihcIiBcIik7XG5cdH1cblx0XG5cdHByaXZhdGUgaGlkZVRvb2x0aXAoKSB7XG5cdFx0dGhpcy50b29sdGlwRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHR9XG5cdHByaXZhdGUgYXN5bmMgYWRkVG9Wb2NhYih3b3JkOiBzdHJpbmcsIGVudHJpZXM6IENlZGljdEVudHJ5W10pIHtcblx0XHRjb25zb2xlLmxvZygnY2FsbGVkIGFkZFRvVm9jYWIhJylcblx0XHRjb25zdCBwYXRoID0gYC5vYnNpZGlhbi9wbHVnaW5zLyR7dGhpcy5tYW5pZmVzdC5pZH0vdm9jYWIuanNvbmA7XG5cdFxuXHRcdGxldCBsaXN0OiBWb2NhYkVudHJ5W10gPSBbXTtcblx0XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQocGF0aCk7XG5cdFx0XHRsaXN0ID0gSlNPTi5wYXJzZShmaWxlKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdGxpc3QgPSBbXTtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IG5ld1NlbnRlbmNlID0gKHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlPy50cmltKCkgPT09IHdvcmQgPyBcIlwiIDogdGhpcy5hY3RpdmVFeGFtcGxlU2VudGVuY2U/LnRyaW0oKSkgfHwgXCJcIjtcblx0XHQvLyBJJ20gc3VwcG9zZWQgdG8gaGF2ZSBhIGNoZWNrIGVhcmxpZXIgdGhhdCB0dXJucyBcIndvcmRcIiBpbnRvIFwiXCIgYnV0IGZvciBzb21lIHJlYXNvbiBub3Qgd29ya2luZyBzbyBJIGhhdmUgXlxuXHRcdC8vIERvIGkgbmVlZCB0aGUgXCJcIiBmYWxsYmFjaz9cblx0XHRjb25zdCBleGlzdGluZ0VudHJ5ID0gbGlzdC5maW5kKGUgPT4gZS5zaW1wbGlmaWVkID09PSB3b3JkKTtcblx0XHRpZiAoZXhpc3RpbmdFbnRyeSkge1xuXHRcdFx0Ly8gSWYgc2VudGVuY2Ugc2F2aW5nIGlzIG9uIGFuZCB3ZSBoYXZlIGEgc2VudGVuY2UuLi5cblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnNhdmVTZW50ZW5jZXMgJiYgbmV3U2VudGVuY2UpIHtcblx0XHRcdFx0aWYgKCFleGlzdGluZ0VudHJ5LmV4YW1wbGVTZW50ZW5jZXMpIGV4aXN0aW5nRW50cnkuZXhhbXBsZVNlbnRlbmNlcyA9IFtdO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQXZvaWQgZHVwbGljYXRlc1xuXHRcdFx0XHRpZiAoIWV4aXN0aW5nRW50cnkuZXhhbXBsZVNlbnRlbmNlcy5pbmNsdWRlcyhuZXdTZW50ZW5jZSkpIHtcblx0XHRcdFx0XHRleGlzdGluZ0VudHJ5LmV4YW1wbGVTZW50ZW5jZXMucHVzaChuZXdTZW50ZW5jZSk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShwYXRoLCBKU09OLnN0cmluZ2lmeShsaXN0LCBudWxsLCAyKSk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgQWRkZWQgbmV3IHNlbnRlbmNlIHRvICR7d29yZH0uYCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgJHt3b3JkfSBpcyBhbHJlYWR5IGluIHlvdXIgdm9jYWIgbGlzdC5gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmV3IE5vdGljZShgJHt3b3JkfSBpcyBhbHJlYWR5IGluIHlvdXIgdm9jYWIgbGlzdC5gKTtcblx0XHRcdH1cblx0XG5cdFx0XHR0aGlzLmFjdGl2ZUV4YW1wbGVTZW50ZW5jZSA9IG51bGw7XG5cdFx0XHR0aGlzLnJlZnJlc2hWb2NhYlNpZGViYXI/LigpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE1lcmdlIGRlZmluaXRpb25zIGFuZCBjaG9vc2UgYSByZXAgc2ltcGxpZmllZC90cmFkaXRpb25hbFxuXHRcdGNvbnN0IGFsbERlZnMgPSBlbnRyaWVzLmZsYXRNYXAoZSA9PiBlLmRlZmluaXRpb25zKTtcblx0XHRjb25zdCB1bmlxdWVEZWZzID0gQXJyYXkuZnJvbShuZXcgU2V0KGFsbERlZnMpKTsgLy8gcmVtb3ZlIGR1cGxpY2F0ZXNcblx0XG5cdFx0Y29uc3QgcmVwID0gZW50cmllc1swXTsgLy8gcmVwcmVzZW50YXRpdmUgZW50cnkgKHVzdWFsbHkgZmluZSBidXQgdGhlIHBpbnlpbiBjYW4gY2hhbmdlIHNvIGkgc2hvdWxkIGhhbmRsZSB0aGF0IGluIHRoZSBmdXR1cmUpXG5cdFxuXHRcdGNvbnN0IG5ld0VudHJ5OiBWb2NhYkVudHJ5ID0ge1xuXHRcdFx0c2ltcGxpZmllZDogcmVwLnNpbXBsaWZpZWQsXG5cdFx0XHR0cmFkaXRpb25hbDogcmVwLnRyYWRpdGlvbmFsLFxuXHRcdFx0cGlueWluOiByZXAucGlueWluLCBcblx0XHRcdGRlZmluaXRpb25zOiB1bmlxdWVEZWZzLFxuXHRcdFx0YWRkZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuXHRcdFx0Li4uKHRoaXMuc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcyAmJiB0aGlzLmFjdGl2ZUV4YW1wbGVTZW50ZW5jZVxuXHRcdFx0XHQ/IHsgZXhhbXBsZVNlbnRlbmNlczogW3RoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlXSB9XG5cdFx0XHRcdDoge30pXG5cdFx0fTtcblx0XG5cdFx0bGlzdC5wdXNoKG5ld0VudHJ5KTtcblx0XG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShwYXRoLCBKU09OLnN0cmluZ2lmeShsaXN0LCBudWxsLCAyKSk7XG5cdFx0bmV3IE5vdGljZShgQWRkZWQgJHt3b3JkfSB0byB2b2NhYiBsaXN0IWApO1xuXG5cdFx0dGhpcy5yZWZyZXNoVm9jYWJTaWRlYmFyPy4oKTtcblx0XHR0aGlzLmFjdGl2ZUV4YW1wbGVTZW50ZW5jZSA9IG51bGw7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGV4cG9ydFZvY2FiVG9GbGFzaGNhcmRzKCkge1xuXHRcdGNvbnN0IHBhdGggPSBgLm9ic2lkaWFuL3BsdWdpbnMvJHt0aGlzLm1hbmlmZXN0LmlkfS92b2NhYi5qc29uYDtcblx0XHRjb25zdCBvdXRwdXRQYXRoID0gYFZvY2FiIERlY2subWRgOyAvLyBZb3UgY291bGQgYWxzbyB1c2UgYSBmb2xkZXIgbGlrZSBcIkZsYXNoY2FyZHMvVm9jYWIubWRcIlxuXHRcblx0XHRsZXQgbGlzdDoge1xuXHRcdFx0c2ltcGxpZmllZDogc3RyaW5nO1xuXHRcdFx0dHJhZGl0aW9uYWw6IHN0cmluZztcblx0XHRcdGRlZmluaXRpb25zOiBzdHJpbmdbXTtcblx0XHRcdGFkZGVkQXQ6IHN0cmluZztcblx0XHR9W10gPSBbXTtcblx0XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQocGF0aCk7XG5cdFx0XHRsaXN0ID0gSlNPTi5wYXJzZShmaWxlKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiTm8gdm9jYWIgbGlzdCBmb3VuZC5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHRjb25zdCBsaW5lczogc3RyaW5nW10gPSBsaXN0Lm1hcChlbnRyeSA9PiB7XG5cdFx0XHRjb25zdCBkZWZzID0gZW50cnkuZGVmaW5pdGlvbnMuam9pbihcIjsgXCIpO1xuXHRcdFx0cmV0dXJuIGAke2VudHJ5LnNpbXBsaWZpZWR9Ojoke2RlZnN9YDtcblx0XHR9KTtcblx0XG5cdFx0Y29uc3QgY29udGVudCA9IGAjQ2hpbmVzZVZvY2FiXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXFxuXCIpfWA7XG5cdFxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUob3V0cHV0UGF0aCwgY29udGVudCk7XG5cdFxuXHRcdG5ldyBOb3RpY2UoXCJFeHBvcnRlZCB2b2NhYiB0byBmbGFzaGNhcmQgZGVjayFcIik7XG5cdH1cdFxuXG5cdHByaXZhdGUgZXh0cmFjdFNlbnRlbmNlRnJvbVRleHRBdE9mZnNldCh0ZXh0OiBzdHJpbmcsIG9mZnNldDogbnVtYmVyLCB3b3JkOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zYXZlU2VudGVuY2VzKSByZXR1cm4gXCJcIjtcblx0XHQvLyBGaW5kIHB1bmN0dWF0aW9uIGJvdW5kYXJpZXMgYXJvdW5kIHRoZSB3b3JkXG5cdFx0Y29uc3QgcHVuY3R1YXRpb24gPSAvW1x1MzAwMlx1RkYwMVx1RkYxRiE/XS87XG5cdFxuXHRcdGxldCBzdGFydCA9IG9mZnNldDtcblx0XHR3aGlsZSAoc3RhcnQgPiAwICYmICFwdW5jdHVhdGlvbi50ZXN0KHRleHRbc3RhcnQgLSAxXSkpIHtcblx0XHRcdHN0YXJ0LS07XG5cdFx0fVxuXHRcblx0XHRsZXQgZW5kID0gb2Zmc2V0O1xuXHRcdHdoaWxlIChlbmQgPCB0ZXh0Lmxlbmd0aCAmJiAhcHVuY3R1YXRpb24udGVzdCh0ZXh0W2VuZF0pKSB7XG5cdFx0XHRlbmQrKztcblx0XHR9XG5cdFx0aWYgKGVuZCA8IHRleHQubGVuZ3RoKSBlbmQrKzsgLy8gaW5jbHVkZSBwdW5jdHVhdGlvblxuXHRcblx0XHRjb25zdCBzZW50ZW5jZSA9IHRleHQuc2xpY2Uoc3RhcnQsIGVuZCkudHJpbSgpO1xuXHRcblx0XHQvLyBmYWxsYmFjayB0byBlbnRpcmUgbGluZSBpZiBzZW50ZW5jZSBpcyBlbXB0eSBvciBkb2Vzblx1MjAxOXQgY29udGFpbiB0aGUgd29yZFxuXHRcdGlmICghc2VudGVuY2UgfHwgIXNlbnRlbmNlLmluY2x1ZGVzKHdvcmQpKSB7XG5cdFx0XHRpZiAobGluZS50cmltKCkgPT09IHdvcmQpIHJldHVybiBcIlwiOyAvLyBkb24ndCBzYXZlIGxvbmVseSB3b3JkIGxpbmVzXG5cdFx0XHRjb25zdCBsaW5lID0gdGV4dC5zcGxpdCgnXFxuJykuZmluZChsID0+IGwuaW5jbHVkZXMod29yZCkpID8/IHRleHQ7XG5cdFx0XHRyZXR1cm4gbGluZS50cmltKCk7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gc2VudGVuY2U7XG5cdH1cdFxuXG5cdGFzeW5jIGFjdGl2YXRlVmlldygpIHtcblx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WT0NBQl9TSURFQkFSKTtcblx0XHRpZiAobGVhdmVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkuc2V0Vmlld1N0YXRlKHtcblx0XHRcdFx0dHlwZTogVklFV19UWVBFX1ZPQ0FCX1NJREVCQVIsXG5cdFx0XHRcdGFjdGl2ZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfVk9DQUJfU0lERUJBUilbMF1cblx0XHQpO1xuXHR9XG5cblx0Ly8gbmVlZHMgdG8gYmUgYWNjZXNzZWQgYnkgVm9jYWJTaWRlYmFyVmlld1xuXHRwdWJsaWMgYXN5bmMgbG9hZFZvY2FiTGlzdCgpOiBQcm9taXNlPFZvY2FiRW50cnlGbGF0W10+IHtcblx0XHRjb25zdCBwYXRoID0gYC5vYnNpZGlhbi9wbHVnaW5zLyR7dGhpcy5tYW5pZmVzdC5pZH0vdm9jYWIuanNvbmA7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQocGF0aCk7XG5cdFx0XHRyZXR1cm4gSlNPTi5wYXJzZShmaWxlKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdH1cblxuXHQvLyBEbyB0aGlzIHNvIHNpZGViYXIgZG9lc250IGdldCBkb3VibGUgcmVuZGVyZWQgd2hlbiBJIHN3aXRjaCBsZWF2ZXNcblx0cHVibGljIHRyaWdnZXJTaWRlYmFyUmVmcmVzaCgpIHtcblx0XHRpZiAodGhpcy5yZWZyZXNoVGltZXIpIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yZWZyZXNoVGltZXIpO1xuXG5cdFx0dGhpcy5yZWZyZXNoVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLnJlZnJlc2hWb2NhYlNpZGViYXI/LigpO1xuXHRcdH0sIDEwMCk7XG5cdH1cblx0XG5cdHB1YmxpYyBzY3JvbGxUb1dvcmRJbkFjdGl2ZUZpbGUod29yZDogc3RyaW5nKSB7XG5cdFx0Y29uc29sZS5sb2coYHNjcm9sbGluZyB0byAke3dvcmR9YClcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5jdXJyZW50TWFya2Rvd25WaWV3O1xuXHRcdGNvbnN0IG1vZGUgPSB2aWV3LmdldE1vZGUoKTtcblxuXHRcdGlmICghdmlldykge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiTm8gYWN0aXZlIE1hcmtkb3duIHZpZXdcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHRsZXQgc2Nyb2xsZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcblxuXHRcdGlmIChtb2RlID09PSBcInNvdXJjZVwiKSB7XG5cdFx0XHRzY3JvbGxlciA9IHZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5jbS1zY3JvbGxlclwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2Nyb2xsZXIgPSB2aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubWFya2Rvd24tcHJldmlldy1zaXplclwiKTtcblx0XHR9XG5cblx0XHRpZiAoIXNjcm9sbGVyKSByZXR1cm47XG5cdFxuXHRcdGxldCBsaW5lczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG5cdFx0aWYgKG1vZGUgPT09IFwic291cmNlXCIpIHtcblx0XHRcdGxpbmVzID0gc2Nyb2xsZXIucXVlcnlTZWxlY3RvckFsbChcIi5jbS1saW5lXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsaW5lcyA9IHNjcm9sbGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHRcdFwiLmVsLXAsIC5lbC1oMSwgLmVsLWgyLCAuZWwtaDMsIC5lbC1saSwgLmVsLWJsb2NrcXVvdGUsIC5lbC10YWJsZVwiXG5cdFx0XHQpO1xuXHRcdFx0Y29uc29sZS5sb2cobGluZXMpXG5cdFx0fVxuXHRcdFxuXHRcdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdFx0aWYgKGxpbmUudGV4dENvbnRlbnQ/LmluY2x1ZGVzKHdvcmQpKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRm91bmQgbWF0Y2ghXCIpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkxJTkU6XCIsIGxpbmUudGV4dENvbnRlbnQpO1xuXHRcdFx0XHQobGluZSBhcyBIVE1MRWxlbWVudCkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwiY2VudGVyXCIgfSk7XG5cdFxuXHRcdFx0XHQvLyBIaWdobGlnaHQgdGhlIGxpbmUgYnJpZWZseSwgZGVsYXllZCBieSAxMDAgdG8gYWxsb3cgRE9NIHRvIHNjcm9sbCBmaXJzdFxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRsaW5lLmNsYXNzTGlzdC5hZGQoXCJjZWRpY3QtbGluZS1ob3ZlclwiKTtcblx0XHRcdFx0XG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRsaW5lLmNsYXNzTGlzdC5yZW1vdmUoXCJjZWRpY3QtbGluZS1ob3ZlclwiKTtcblx0XHRcdFx0XHR9LCA1MDAwKTtcblx0XHRcdFx0fSwgMTAwKTtcblx0XG5cdFx0XHRcdC8vIFJlc3RvcmUgZm9jdXNcblx0XHRcdFx0Ly8gc2V0VGltZW91dCgoKSA9PiB2aWV3LmVkaXRvcj8uZm9jdXMoKSwgMTAwKTtcblx0XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5jbGFzcyBWb2NhYlNpZGViYXJWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwbHVnaW46IE15UGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTXlQbHVnaW4pIHtcblx0XHRzdXBlcihsZWFmKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGdldFZpZXdUeXBlKCkge1xuXHRcdHJldHVybiBWSUVXX1RZUEVfVk9DQUJfU0lERUJBUjtcblx0fVxuXG5cdGdldERpc3BsYXlUZXh0KCkge1xuXHRcdHJldHVybiBcIlZvY2FidWxhcnlcIjtcblx0fVxuXG5cdGdldEljb24oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gXCJib29rLW9wZW5cIjsgXG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Ly8gY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcblx0XHQvLyBjb25zdCBjb250ZW50ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1jb250ZW50XCIpID8/IGNvbnRhaW5lci5jaGlsZHJlblsxXTtcblx0XHQvLyBjb250ZW50LmVtcHR5KCk7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcblx0XHRjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi52b2NhYi1lbnRyeVwiKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcblxuXHRcblx0XHQvLyBSZWdpc3RlciB0aGUgcmVmcmVzaCBjYWxsYmFja1xuXHRcdHRoaXMucGx1Z2luLnJlZnJlc2hWb2NhYlNpZGViYXIgPSAoKSA9PiB0aGlzLnJlbmRlclNpZGViYXIoKTtcblx0XG5cdFx0YXdhaXQgdGhpcy53YWl0Rm9yVmlldygpO1xuXHRcdGF3YWl0IHRoaXMucmVuZGVyU2lkZWJhcigpO1x0XG5cdH1cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoVm9jYWJTaWRlYmFyID0gbnVsbDtcblx0fVxuXHRhc3luYyB3YWl0Rm9yVmlldygpIHtcblx0XHRsZXQgcmV0cmllcyA9IDEwO1xuXHRcdHdoaWxlICghdGhpcy5wbHVnaW4uY3VycmVudE1hcmtkb3duVmlldyAmJiByZXRyaWVzLS0gPiAwKSB7XG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG5cdFx0fVxuXHR9XG5cdFxuXHRhc3luYyByZW5kZXJTaWRlYmFyKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cdFxuXHRcdGNvbnN0IHZvY2FiTGlzdCA9IGF3YWl0IHRoaXMucGx1Z2luLmxvYWRWb2NhYkxpc3QoKTtcblxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLnBsdWdpbi5jdXJyZW50TWFya2Rvd25WaWV3O1xuXHRcdGNvbnN0IGN1cnJlbnRGaWxlVGV4dCA9IHZpZXc/LmVkaXRvclxuXHRcdFx0PyB2aWV3LmVkaXRvci5nZXRWYWx1ZSgpXG5cdFx0XHQ6IHZpZXc/LmNvbnRlbnRFbC50ZXh0Q29udGVudCA/PyBcIlwiO1xuXG5cdFx0Y29uc3QgbWF0Y2hpbmdWb2NhYiA9IHZvY2FiTGlzdC5maWx0ZXIoZW50cnkgPT5cblx0XHRcdGN1cnJlbnRGaWxlVGV4dC5pbmNsdWRlcyhlbnRyeS5zaW1wbGlmaWVkKVxuXHRcdCk7XG5cblx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJoM1wiLCB7XG5cdFx0XHR0ZXh0OiBcIlZvY2FiIGluIHRoaXMgbm90ZVwiLFxuXHRcdFx0Y2xzOiBcInZvY2FiLWhlYWRpbmdcIlxuXHRcdH0pO1xuXHRcdC8vIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7XG5cdFx0Ly8gXHR0ZXh0OiBcIlZvY2FiIGluIHRoaXMgbm90ZVwiLFxuXHRcdC8vIFx0Y2xzOiBcInZvY2FiLWhlYWRpbmdcIlxuXHRcdC8vIH0pO1xuXG5cdFx0aWYgKCFtYXRjaGluZ1ZvY2FiLmxlbmd0aCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gdm9jYWIgeWV0LlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XG5cdFx0Zm9yIChjb25zdCBlbnRyeSBvZiBtYXRjaGluZ1ZvY2FiKSB7XG5cdFx0XHRjb25zdCB3cmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInZvY2FiLWVudHJ5XCIgfSk7XG5cdFxuXHRcdFx0Ly8gVGl0bGU6IHNpbXBsaWZpZWQgKyB0cmFkaXRpb25hbFxuXHRcdFx0d3JhcHBlci5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IGAke2VudHJ5LnNpbXBsaWZpZWR9ICR7ZW50cnkuc2ltcGxpZmllZCAhPT0gZW50cnkudHJhZGl0aW9uYWwgPyBcIihcIiArIGVudHJ5LnRyYWRpdGlvbmFsICsgXCIpXCI6IFwiXCJ9YCxcblx0XHRcdFx0Y2xzOiAndm9jYWItd29yZCdcblx0XHRcdH0pO1xuXHRcblx0XHRcdC8vIFBpbnlpblxuXHRcdFx0d3JhcHBlci5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IHRoaXMucGx1Z2luLnByb2Nlc3NQaW55aW4/LihlbnRyeS5waW55aW4gPz8gXCJcIiksXG5cdFx0XHRcdGNsczogJ3ZvY2FiLXBpbnlpbidcblx0XHRcdH0pO1xuXHRcblx0XHRcdC8vIERlZmluaXRpb25zXG5cdFx0XHR3cmFwcGVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0dGV4dDogZW50cnkuZGVmaW5pdGlvbnMuam9pbihcIjtcXG4gXCIpLFxuXHRcdFx0XHRjbHM6ICd2b2NhYi1kZWZzJ1xuXHRcdFx0fSk7XG5cdFxuXHRcdFx0Ly8gRGl2aWRlclxuXHRcdFx0Ly8gd3JhcHBlci5jcmVhdGVFbChcImhyXCIpO1xuXG5cdFx0XHQvLyBNYWtlIHdyYXBwZXIgY2xpY2thYmxlXG5cdFx0XHR3cmFwcGVyLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXHRcdFx0d3JhcHBlci5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zY3JvbGxUb1dvcmRJbkFjdGl2ZUZpbGUoZW50cnkuc2ltcGxpZmllZCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0fVx0XG59XG5cblxuY2xhc3MgU2FtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLnNldFRleHQoJ1dvYWghJyk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogTXlQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJTYXZlIGV4YW1wbGUgc2VudGVuY2VzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIldoZW4gc2F2aW5nIGEgdm9jYWIgd29yZCwgYWxzbyBzdG9yZSB0aGUgc2VudGVuY2UgaXQgYXBwZWFycyBpbi5cIilcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNhdmVTZW50ZW5jZXMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGlu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
