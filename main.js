/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var VIEW_TYPE_VOCAB_SIDEBAR = "vocab-sidebar";
var DEFAULT_SETTINGS = {
  saveSentences: false
};
var MyPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.cedictMap = /* @__PURE__ */ new Map();
    this.activeHighlight = null;
    this.activeWord = null;
    this.activeEntries = null;
    this.hoverBoxEl = null;
    this.tooltipEl = null;
    this.refreshVocabSidebar = null;
    // not update vocab list on every keystroke
    this.refreshTimer = null;
    // save currentMarkdownView so vocab list doesnt disappear when i click on vocab sidebar
    this.currentMarkdownView = null;
    // For if the user wants to store the current sentence as an example
    this.activeExampleSentence = null;
    this.hoverHandlerChars = (event) => {
      var _a, _b;
      const el = event.target;
      const isEditLine = el.closest(".cm-line");
      const isPreviewBlock = (_a = el.closest(".markdown-preview-view")) == null ? void 0 : _a.querySelector(".markdown-preview-sizer");
      const isPreviewTarget = el.closest(".el-p, .el-h1, .el-h2, .el-h3, .el-li, .el-blockquote, .el-table");
      if (!isEditLine && !(isPreviewBlock && isPreviewTarget)) {
        this.hideHoverBox();
        this.hideTooltip();
        return;
      }
      const range = document.caretRangeFromPoint(event.clientX, event.clientY);
      if (!range || range.startContainer.nodeType !== Node.TEXT_NODE) {
        this.hideHoverBox();
        this.hideTooltip();
        this.activeHighlight = null;
        this.activeWord = null;
        this.activeEntries = null;
        return;
      }
      const textNode = range.startContainer;
      const offset = range.startOffset;
      const text = (_b = textNode.textContent) != null ? _b : "";
      if (offset < 0 || offset >= text.length) {
        this.hideHoverBox();
        return;
      }
      const chineseChar = /[\u4e00-\u9fff]/;
      if (!chineseChar.test(text[offset])) {
        this.hideHoverBox();
        return;
      }
      const match = this.getForwardMatchedWord(text, offset);
      if (!match) {
        this.hideHoverBox();
        return;
      }
      const start = offset;
      const end = Math.min(match.end, textNode.length);
      const rangeForWord = document.createRange();
      rangeForWord.setStart(textNode, start);
      rangeForWord.setEnd(textNode, end);
      const rect = rangeForWord.getBoundingClientRect();
      if (this.hoverBoxEl) {
        this.hoverBoxEl.style.left = `${rect.left + window.scrollX}px`;
        this.hoverBoxEl.style.top = `${rect.top + window.scrollY}px`;
        this.hoverBoxEl.style.width = `${rect.width}px`;
        this.hoverBoxEl.style.height = `${rect.height}px`;
        this.hoverBoxEl.style.display = "block";
      }
      if (this.settings.saveSentences) {
        const sentence = this.extractSentenceFromTextAtOffset(text, offset, match.word);
        this.activeExampleSentence = sentence;
      }
      this.showTooltipForWord(match.word, rect.left + window.scrollX, rect.top + window.scrollY);
    };
  }
  async onload() {
    await this.loadSettings();
    const data = await this.loadDictionaryFile(`.obsidian/plugins/${this.manifest.id}/cedict_ts.u8`);
    this.loadCedictFromText(data);
    console.log("Cedict loaded.");
    const style = document.createElement("style");
    style.id = "cedict-hover-style";
    style.innerText = `
		.cedict-hover-box {
			position: absolute;
			z-index: 0 !important;
			background-color: hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3);
			pointer-events: none;
			border-radius: 3px;
			transition: all 0.05s ease;
		}
		.cedict-line-hover {
			background-color: hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3);
			transition: background-color 0.3s ease;
		}
		.cm-line{
			transition: all 0.5s ease;
		}

		.vocab-entry {
			margin-bottom: 1rem;
			padding-bottom: 0.5rem;
			border-bottom: 1px solid var(--background-modifier-border);
			cursor: pointer;
		}
	
		.vocab-word {
			font-weight: bold;
			font-size: 1.1em;
		}
	
		.vocab-pinyin {
			font-style: italic;
			color: var(--text-muted);
			margin-top: 2px;
		}
	
		.vocab-defs {
			margin-top: 4px;
			color: var(--text-normal);
			font-size: 0.95em;
			line-height: 1.4;
		}
		`;
    document.head.appendChild(style);
    this.hoverBoxEl = document.createElement("div");
    this.hoverBoxEl.className = "cedict-hover-box";
    document.body.appendChild(this.hoverBoxEl);
    this.tooltipEl = document.createElement("div");
    this.tooltipEl.style.position = "absolute";
    this.tooltipEl.style.padding = "6px 10px";
    this.tooltipEl.style.background = "var(--background-secondary)";
    this.tooltipEl.style.color = "var(--text-normal)";
    this.tooltipEl.style.border = "1px solid var(--background-modifier-border)";
    this.tooltipEl.style.borderRadius = "6px";
    this.tooltipEl.style.boxShadow = "0 4px 8px rgba(0,0,0,0.1)";
    this.tooltipEl.style.whiteSpace = "pre-line";
    this.tooltipEl.style.zIndex = "10000";
    this.tooltipEl.style.pointerEvents = "none";
    this.tooltipEl.style.display = "none";
    document.body.appendChild(this.tooltipEl);
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.hoverHandler = this.hoverHandlerChars.bind(this);
    document.addEventListener("mousemove", this.hoverHandler);
    this.registerDomEvent(document, "keydown", (event) => {
      if (event.key.toLowerCase() === "s" && this.activeWord && this.activeEntries) {
        event.preventDefault();
        event.stopPropagation();
        this.addToVocab(this.activeWord, this.activeEntries);
      }
    });
    this.addCommand({
      id: "export-vocab-flashcards",
      name: "Export Vocab to Flashcards",
      callback: () => this.exportVocabToFlashcards()
    });
    this.registerView(
      VIEW_TYPE_VOCAB_SIDEBAR,
      (leaf) => new VocabSidebarView(leaf, this)
    );
    this.addRibbonIcon("book-open", "Open Vocab Sidebar", async () => {
      await this.activateView();
    });
    await this.activateView();
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (view) {
          this.currentMarkdownView = view;
          this.triggerSidebarRefresh();
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-change", () => {
        if (this.refreshTimer) window.clearTimeout(this.refreshTimer);
        this.refreshTimer = window.setTimeout(() => {
          const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
          if (view) {
            this.currentMarkdownView = view;
            this.triggerSidebarRefresh();
          }
        }, 300);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (view) {
          this.currentMarkdownView = view;
          this.triggerSidebarRefresh();
        }
      })
    );
  }
  onunload() {
    document.removeEventListener("mousemove", this.hoverHandler);
    if (this.activeHighlight) {
      const parent = this.activeHighlight.parentNode;
      if (parent) {
        parent.replaceChild(
          document.createTextNode(this.activeHighlight.innerText),
          this.activeHighlight
        );
      }
      this.activeHighlight = null;
    }
    if (this.hoverBoxEl) {
      this.hoverBoxEl.remove();
      this.hoverBoxEl = null;
    }
    if (this.tooltipEl) {
      this.tooltipEl.style.display = "none";
      this.tooltipEl.remove();
      this.tooltipEl = null;
    }
    const styleEl = document.getElementById("cedict-hover-style");
    if (styleEl) styleEl.remove();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async loadDictionaryFile(fileName) {
    const arrayBuffer = await this.app.vault.adapter.readBinary(fileName);
    const decoder = new TextDecoder("utf-8");
    return decoder.decode(arrayBuffer);
  }
  parseCedictLine(line) {
    const match = line.match(/^(\S+)\s+(\S+)\s+\[(.+?)\]\s+\/(.+)\//);
    if (!match) return null;
    const [, trad, simp, pinyin, defs] = match;
    return {
      traditional: trad,
      simplified: simp,
      pinyin,
      definitions: defs.split("/")
    };
  }
  loadCedictFromText(cedictText) {
    const lines = cedictText.split("\n");
    for (const line of lines) {
      if (line.startsWith("#") || line.trim() === "") continue;
      const entry = this.parseCedictLine(line);
      if (entry) {
        [entry.traditional, entry.simplified].forEach((form) => {
          if (!this.cedictMap.has(form)) this.cedictMap.set(form, []);
          this.cedictMap.get(form).push(entry);
        });
      }
    }
  }
  hideHoverBox() {
    if (this.hoverBoxEl) {
      this.hoverBoxEl.style.display = "none";
    }
  }
  getForwardMatchedWord(text, offset) {
    const maxWordLen = 5;
    const substr = text.slice(offset, offset + maxWordLen);
    for (let len = maxWordLen; len > 0; len--) {
      const candidate = substr.slice(0, len);
      if (this.cedictMap.has(candidate)) {
        return { word: candidate, end: offset + len };
      }
    }
    return null;
  }
  showTooltipForWord(word, x, y) {
    if (!this.tooltipEl) return;
    const entries = this.cedictMap.get(word);
    if (!entries || entries.length === 0) {
      this.tooltipEl.style.display = "none";
      return;
    }
    const seen = /* @__PURE__ */ new Set();
    const uniqueEntries = entries.filter((entry) => {
      const id = `${entry.traditional}-${entry.simplified}-${entry.pinyin}-${entry.definitions.join(",")}`;
      if (seen.has(id)) return false;
      seen.add(id);
      return true;
    });
    this.activeWord = word;
    this.activeEntries = uniqueEntries;
    const text = uniqueEntries.map(
      (entry) => `${entry.simplified} ${entry.simplified !== entry.traditional ? entry.traditional : ""} (${this.processPinyin(entry.pinyin)})
${entry.definitions.join("; ")}`
    ).join("\n\n");
    this.tooltipEl.innerText = text;
    if (!this.hoverBoxEl) return;
    const hoverRect = this.hoverBoxEl.getBoundingClientRect();
    this.tooltipEl.style.left = `${hoverRect.left + window.scrollX}px`;
    this.tooltipEl.style.top = `${hoverRect.bottom + window.scrollY + 4}px`;
    this.tooltipEl.style.display = "block";
  }
  processPinyin(pinyin) {
    const toneMap = {
      "a": ["\u0101", "\xE1", "\u01CE", "\xE0", "a"],
      "e": ["\u0113", "\xE9", "\u011B", "\xE8", "e"],
      "i": ["\u012B", "\xED", "\u01D0", "\xEC", "i"],
      "o": ["\u014D", "\xF3", "\u01D2", "\xF2", "o"],
      "u": ["\u016B", "\xFA", "\u01D4", "\xF9", "u"],
      "\xFC": ["\u01D6", "\u01D8", "\u01DA", "\u01DC", "\xFC"]
    };
    const vowels = ["a", "o", "e", "i", "u", "\xFC"];
    return pinyin.split(" ").map((syllable) => {
      const tone = parseInt(syllable[syllable.length - 1]);
      if (tone < 1 || tone > 5) return syllable;
      let core = syllable.slice(0, -1);
      let vowelToReplace = "";
      for (const v of vowels) {
        if (core.includes(v)) {
          vowelToReplace = v;
          break;
        }
      }
      if (!vowelToReplace) return syllable;
      const accented = toneMap[vowelToReplace][tone - 1];
      const regex = new RegExp(vowelToReplace + "(?!.*" + vowelToReplace + ")", "g");
      core = core.replace(regex, accented);
      return core;
    }).join(" ");
  }
  hideTooltip() {
    this.tooltipEl.style.display = "none";
  }
  async addToVocab(word, entries) {
    var _a, _b, _c, _d;
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    let list = [];
    try {
      const file = await this.app.vault.adapter.read(path);
      list = JSON.parse(file);
    } catch (e) {
      list = [];
    }
    const newSentence = (((_a = this.activeExampleSentence) == null ? void 0 : _a.trim()) === word ? "" : (_b = this.activeExampleSentence) == null ? void 0 : _b.trim()) || "";
    const existingEntry = list.find((e) => e.simplified === word);
    if (existingEntry) {
      if (this.settings.saveSentences && newSentence) {
        if (!existingEntry.exampleSentences) existingEntry.exampleSentences = [];
        if (!existingEntry.exampleSentences.includes(newSentence)) {
          existingEntry.exampleSentences.push(newSentence);
          await this.app.vault.adapter.write(path, JSON.stringify(list, null, 2));
          new import_obsidian.Notice(`Added new sentence to ${word}.`);
        } else {
          new import_obsidian.Notice(`${word} is already in your vocab list.`);
        }
      } else {
        new import_obsidian.Notice(`${word} is already in your vocab list.`);
      }
      this.activeExampleSentence = null;
      (_c = this.refreshVocabSidebar) == null ? void 0 : _c.call(this);
      return;
    }
    const allDefs = entries.flatMap((e) => e.definitions);
    const uniqueDefs = Array.from(new Set(allDefs));
    const rep = entries[0];
    const newEntry = {
      simplified: rep.simplified,
      traditional: rep.traditional,
      pinyin: rep.pinyin,
      definitions: uniqueDefs,
      addedAt: (/* @__PURE__ */ new Date()).toISOString(),
      ...this.settings.saveSentences && this.activeExampleSentence ? { exampleSentences: [this.activeExampleSentence] } : {}
    };
    list.push(newEntry);
    await this.app.vault.adapter.write(path, JSON.stringify(list, null, 2));
    new import_obsidian.Notice(`Added ${word} to vocab list!`);
    (_d = this.refreshVocabSidebar) == null ? void 0 : _d.call(this);
    this.activeExampleSentence = null;
  }
  async exportVocabToFlashcards() {
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    const outputPath = `Vocab Deck.md`;
    let list = [];
    try {
      const file = await this.app.vault.adapter.read(path);
      list = JSON.parse(file);
    } catch (e) {
      new import_obsidian.Notice("No vocab list found.");
      return;
    }
    const lines = list.map((entry) => {
      const defs = entry.definitions.join("; ");
      return `${entry.simplified}::${defs}`;
    });
    const content = `#ChineseVocab

${lines.join("\n\n")}`;
    await this.app.vault.adapter.write(outputPath, content);
    new import_obsidian.Notice("Exported vocab to flashcard deck!");
  }
  extractSentenceFromTextAtOffset(text, offset, word) {
    var _a;
    if (!this.settings.saveSentences) return "";
    const punctuation = /[。！？!?]/;
    let start = offset;
    while (start > 0 && !punctuation.test(text[start - 1])) {
      start--;
    }
    let end = offset;
    while (end < text.length && !punctuation.test(text[end])) {
      end++;
    }
    if (end < text.length) end++;
    const sentence = text.slice(start, end).trim();
    if (!sentence || !sentence.includes(word)) {
      if (line.trim() === word) return "";
      const line = (_a = text.split("\n").find((l) => l.includes(word))) != null ? _a : text;
      return line.trim();
    }
    return sentence;
  }
  async activateView() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_VOCAB_SIDEBAR);
    if (leaves.length === 0) {
      await this.app.workspace.getRightLeaf(false).setViewState({
        type: VIEW_TYPE_VOCAB_SIDEBAR,
        active: true
      });
    }
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_VOCAB_SIDEBAR)[0]
    );
  }
  // needs to be accessed by VocabSidebarView
  async loadVocabList() {
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    try {
      const file = await this.app.vault.adapter.read(path);
      return JSON.parse(file);
    } catch (e) {
      return [];
    }
  }
  // Do this so sidebar doesnt get double rendered when I switch leaves
  triggerSidebarRefresh() {
    if (this.refreshTimer) window.clearTimeout(this.refreshTimer);
    this.refreshTimer = window.setTimeout(() => {
      var _a;
      (_a = this.refreshVocabSidebar) == null ? void 0 : _a.call(this);
    }, 100);
  }
  scrollToWordInActiveFile(word) {
    var _a;
    const view = this.currentMarkdownView;
    const mode = view.getMode();
    if (!view) {
      console.warn("No active Markdown view");
      return;
    }
    let scroller;
    if (mode === "source") {
      scroller = view.containerEl.querySelector(".cm-scroller");
    } else {
      scroller = view.containerEl.querySelector(".markdown-preview-sizer");
    }
    if (!scroller) return;
    let lines;
    if (mode === "source") {
      lines = scroller.querySelectorAll(".cm-line");
    } else {
      lines = scroller.querySelectorAll(
        ".el-p, .el-h1, .el-h2, .el-h3, .el-li, .el-blockquote, .el-table"
      );
    }
    for (const line of lines) {
      if ((_a = line.textContent) == null ? void 0 : _a.includes(word)) {
        line.scrollIntoView({ behavior: "smooth", block: "center" });
        setTimeout(() => {
          line.classList.add("cedict-line-hover");
          setTimeout(() => {
            line.classList.remove("cedict-line-hover");
          }, 5e3);
        }, 100);
        break;
      }
    }
  }
};
var VocabSidebarView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_VOCAB_SIDEBAR;
  }
  getDisplayText() {
    return "Vocabulary";
  }
  getIcon() {
    return "book-open";
  }
  async onOpen() {
    const container = this.containerEl;
    container.querySelectorAll(".vocab-entry").forEach((el) => el.remove());
    this.plugin.refreshVocabSidebar = () => this.renderSidebar();
    await this.waitForView();
    await this.renderSidebar();
  }
  async onClose() {
    this.plugin.refreshVocabSidebar = null;
  }
  async waitForView() {
    let retries = 10;
    while (!this.plugin.currentMarkdownView && retries-- > 0) {
      await new Promise((resolve) => setTimeout(resolve, 100));
    }
  }
  async renderSidebar() {
    var _a, _b, _c, _d;
    const container = this.containerEl.children[1];
    container.empty();
    const vocabList = await this.plugin.loadVocabList();
    const view = this.plugin.currentMarkdownView;
    const currentFileText = (view == null ? void 0 : view.editor) ? view.editor.getValue() : (_a = view == null ? void 0 : view.contentEl.textContent) != null ? _a : "";
    const matchingVocab = vocabList.filter(
      (entry) => currentFileText.includes(entry.simplified)
    );
    container.createEl("h3", {
      text: "Vocab in this note",
      cls: "vocab-heading"
    });
    if (!matchingVocab.length) {
      container.createEl("p", { text: "No vocab yet." });
      return;
    }
    for (const entry of matchingVocab) {
      const wrapper = container.createEl("div", { cls: "vocab-entry" });
      wrapper.createEl("div", {
        text: `${entry.simplified} ${entry.simplified !== entry.traditional ? "(" + entry.traditional + ")" : ""}`,
        cls: "vocab-word"
      });
      wrapper.createEl("div", {
        text: (_d = (_c = this.plugin).processPinyin) == null ? void 0 : _d.call(_c, (_b = entry.pinyin) != null ? _b : ""),
        cls: "vocab-pinyin"
      });
      wrapper.createEl("div", {
        text: entry.definitions.join(";\n "),
        cls: "vocab-defs"
      });
      wrapper.style.cursor = "pointer";
      wrapper.onclick = () => {
        this.plugin.scrollToWordInActiveFile(entry.simplified);
      };
    }
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Save example sentences").setDesc("When saving a vocab word, also store the sentence it appears in.").addToggle((toggle) => toggle.setValue(this.plugin.settings.saveSentences).onChange(async (value) => {
      this.plugin.settings.saveSentences = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBJdGVtVmlldyB9IGZyb20gJ29ic2lkaWFuJztcblxuY29uc3QgVklFV19UWVBFX1ZPQ0FCX1NJREVCQVIgPSBcInZvY2FiLXNpZGViYXJcIjtcblxuLy8gVGhpcyBkZWZpbmVzIHRoZSBzdHJ1Y3R1cmUgZm9yIGRpY3Rpb25hcnkgZW50cmllc1xuaW50ZXJmYWNlIENlZGljdEVudHJ5IHtcblx0dHJhZGl0aW9uYWw6IHN0cmluZztcblx0c2ltcGxpZmllZDogc3RyaW5nO1xuXHRwaW55aW46IHN0cmluZztcblx0ZGVmaW5pdGlvbnM6IHN0cmluZ1tdO1xuICB9XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XG5cdHNhdmVTZW50ZW5jZXM6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBWb2NhYkVudHJ5IHtcblx0c2ltcGxpZmllZDogc3RyaW5nO1xuXHR0cmFkaXRpb25hbDogc3RyaW5nO1xuXHRwaW55aW46IHN0cmluZztcblx0ZGVmaW5pdGlvbnM6IHN0cmluZ1tdO1xuXHRhZGRlZEF0OiBzdHJpbmc7XG5cdGV4YW1wbGVTZW50ZW5jZXM/OiBzdHJpbmdbXTsgLy8gb3B0aW9uYWxcbn07XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XG5cdHNhdmVTZW50ZW5jZXM6IGZhbHNlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XG5cdHByaXZhdGUgY2VkaWN0TWFwOiBNYXA8c3RyaW5nLCBDZWRpY3RFbnRyeVtdPiA9IG5ldyBNYXAoKTtcblx0cHJpdmF0ZSBhY3RpdmVIaWdobGlnaHQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYWN0aXZlV29yZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYWN0aXZlRW50cmllczogQ2VkaWN0RW50cnlbXSB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGhvdmVyQm94RWw6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgdG9vbHRpcEVsOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwdWJsaWMgcmVmcmVzaFZvY2FiU2lkZWJhcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gbm90IHVwZGF0ZSB2b2NhYiBsaXN0IG9uIGV2ZXJ5IGtleXN0cm9rZVxuXHRwcml2YXRlIHJlZnJlc2hUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gc2F2ZSBjdXJyZW50TWFya2Rvd25WaWV3IHNvIHZvY2FiIGxpc3QgZG9lc250IGRpc2FwcGVhciB3aGVuIGkgY2xpY2sgb24gdm9jYWIgc2lkZWJhclxuXHRwdWJsaWMgY3VycmVudE1hcmtkb3duVmlldzogTWFya2Rvd25WaWV3IHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gRm9yIGlmIHRoZSB1c2VyIHdhbnRzIHRvIHN0b3JlIHRoZSBjdXJyZW50IHNlbnRlbmNlIGFzIGFuIGV4YW1wbGVcblx0cHJpdmF0ZSBhY3RpdmVFeGFtcGxlU2VudGVuY2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG5cblx0cHJpdmF0ZSBob3ZlckhhbmRsZXI6IChlOiBNb3VzZUV2ZW50KSA9PiB2b2lkO1x0XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFxuXHRcdC8vIExvYWQgZGljdGlvbmFyeVxuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREaWN0aW9uYXJ5RmlsZShgLm9ic2lkaWFuL3BsdWdpbnMvJHt0aGlzLm1hbmlmZXN0LmlkfS9jZWRpY3RfdHMudThgKTtcbiAgICBcdHRoaXMubG9hZENlZGljdEZyb21UZXh0KGRhdGEpO1xuXHRcdGNvbnNvbGUubG9nKFwiQ2VkaWN0IGxvYWRlZC5cIilcblxuXHRcdC8vIEhvdmVyIGJveFxuXG5cdFx0Ly8gU3R5bGVzXG5cdFx0Y29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdFx0c3R5bGUuaWQgPSBcImNlZGljdC1ob3Zlci1zdHlsZVwiO1xuXHRcdHN0eWxlLmlubmVyVGV4dCA9IGBcblx0XHQuY2VkaWN0LWhvdmVyLWJveCB7XG5cdFx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XG5cdFx0XHR6LWluZGV4OiAwICFpbXBvcnRhbnQ7XG5cdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiBoc2xhKHZhcigtLWFjY2VudC1oKSwgdmFyKC0tYWNjZW50LXMpLCB2YXIoLS1hY2NlbnQtbCksIDAuMyk7XG5cdFx0XHRwb2ludGVyLWV2ZW50czogbm9uZTtcblx0XHRcdGJvcmRlci1yYWRpdXM6IDNweDtcblx0XHRcdHRyYW5zaXRpb246IGFsbCAwLjA1cyBlYXNlO1xuXHRcdH1cblx0XHQuY2VkaWN0LWxpbmUtaG92ZXIge1xuXHRcdFx0YmFja2dyb3VuZC1jb2xvcjogaHNsYSh2YXIoLS1hY2NlbnQtaCksIHZhcigtLWFjY2VudC1zKSwgdmFyKC0tYWNjZW50LWwpLCAwLjMpO1xuXHRcdFx0dHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7XG5cdFx0fVxuXHRcdC5jbS1saW5le1xuXHRcdFx0dHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTtcblx0XHR9XG5cblx0XHQudm9jYWItZW50cnkge1xuXHRcdFx0bWFyZ2luLWJvdHRvbTogMXJlbTtcblx0XHRcdHBhZGRpbmctYm90dG9tOiAwLjVyZW07XG5cdFx0XHRib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuXHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdH1cblx0XG5cdFx0LnZvY2FiLXdvcmQge1xuXHRcdFx0Zm9udC13ZWlnaHQ6IGJvbGQ7XG5cdFx0XHRmb250LXNpemU6IDEuMWVtO1xuXHRcdH1cblx0XG5cdFx0LnZvY2FiLXBpbnlpbiB7XG5cdFx0XHRmb250LXN0eWxlOiBpdGFsaWM7XG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG5cdFx0XHRtYXJnaW4tdG9wOiAycHg7XG5cdFx0fVxuXHRcblx0XHQudm9jYWItZGVmcyB7XG5cdFx0XHRtYXJnaW4tdG9wOiA0cHg7XG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuXHRcdFx0Zm9udC1zaXplOiAwLjk1ZW07XG5cdFx0XHRsaW5lLWhlaWdodDogMS40O1xuXHRcdH1cblx0XHRgO1xuXHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG5cdFx0dGhpcy5ob3ZlckJveEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLmhvdmVyQm94RWwuY2xhc3NOYW1lID0gXCJjZWRpY3QtaG92ZXItYm94XCI7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmhvdmVyQm94RWwpO1xuXG5cdFx0Ly8gVG9vbHRpcFxuXHRcdHRoaXMudG9vbHRpcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5wYWRkaW5nID0gXCI2cHggMTBweFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmJhY2tncm91bmQgPSBcInZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KVwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmNvbG9yID0gXCJ2YXIoLS10ZXh0LW5vcm1hbClcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjZweFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmJveFNoYWRvdyA9IFwiMCA0cHggOHB4IHJnYmEoMCwwLDAsMC4xKVwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLndoaXRlU3BhY2UgPSBcInByZS1saW5lXCI7XG5cdFx0dGhpcy50b29sdGlwRWwuc3R5bGUuekluZGV4ID0gXCIxMDAwMFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnRvb2x0aXBFbCk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1x0XG5cblx0XHR0aGlzLmhvdmVySGFuZGxlciA9IHRoaXMuaG92ZXJIYW5kbGVyQ2hhcnMuYmluZCh0aGlzKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuaG92ZXJIYW5kbGVyKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgXCJrZXlkb3duXCIsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSBcInNcIiAmJiB0aGlzLmFjdGl2ZVdvcmQgJiYgdGhpcy5hY3RpdmVFbnRyaWVzKSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHR0aGlzLmFkZFRvVm9jYWIodGhpcy5hY3RpdmVXb3JkLCB0aGlzLmFjdGl2ZUVudHJpZXMpO1xuXHRcdFx0fVxuXHRcdH0pOyAvL2NhcHR1cmUgcGhhc2VcdFx0XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZXhwb3J0LXZvY2FiLWZsYXNoY2FyZHNcIixcblx0XHRcdG5hbWU6IFwiRXhwb3J0IFZvY2FiIHRvIEZsYXNoY2FyZHNcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmV4cG9ydFZvY2FiVG9GbGFzaGNhcmRzKClcblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxuXHRcdFx0VklFV19UWVBFX1ZPQ0FCX1NJREVCQVIsXG5cdFx0XHQobGVhZikgPT4gbmV3IFZvY2FiU2lkZWJhclZpZXcobGVhZiwgdGhpcylcblx0XHQpO1xuXHRcdFxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImJvb2stb3BlblwiLCBcIk9wZW4gVm9jYWIgU2lkZWJhclwiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLmFjdGl2YXRlVmlldygpO1xuXHRcdH0pO1xuXHRcdGF3YWl0IHRoaXMuYWN0aXZhdGVWaWV3KCk7IC8vIFRPRE86IG1ha2Ugc3VyZSB0aGlzIGFsd2F5cyBvcGVucyBpbiB0aGUgcmlnaHQgc2lkZWJhclxuXG5cdFx0Ly8gQ2hhbmdlIHZvY2FiIHNpZGViYXIgd2hlbiBJIGNoYW5nZSBsZWFmXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsICgpID0+IHtcblx0XHRcdFx0Ly8gb25seSBjaGFuZ2UgY3Vyck1EdmlldyBpZiBuZXcgdmlldyBpcyBhbHNvIE1ELCBvdGhlcndpc2UgY3VycmVudE1hcmtkb3duVmlldyBiZWNvbWVzIG51bGwgd2hlbiBpIGNsaWNrIG9uIHNpZGViYXJcblx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdGlmICh2aWV3KSB7XG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50TWFya2Rvd25WaWV3ID0gdmlldztcblx0XHRcdFx0XHR0aGlzLnRyaWdnZXJTaWRlYmFyUmVmcmVzaCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0XG5cdFx0Ly8gQ2hhbmdlIHZvY2FiIHNpZGViYXIgd2hlbiBJIGVkaXQgbGVhZlxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1jaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5yZWZyZXNoVGltZXIpIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yZWZyZXNoVGltZXIpO1xuXHRcdFx0XHR0aGlzLnJlZnJlc2hUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0XHRpZiAodmlldykge1xuXHRcdFx0XHRcdFx0dGhpcy5jdXJyZW50TWFya2Rvd25WaWV3ID0gdmlldztcblx0XHRcdFx0XHRcdHRoaXMudHJpZ2dlclNpZGViYXJSZWZyZXNoKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAzMDApOyAvLyAzMDBtcyBkZWxheSBhZnRlciBsYXN0IGVkaXRcblx0XHRcdH0pXG5cdFx0KTtcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0aWYgKHZpZXcpIHtcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRNYXJrZG93blZpZXcgPSB2aWV3O1xuXHRcdFx0XHRcdHRoaXMudHJpZ2dlclNpZGViYXJSZWZyZXNoKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5ob3ZlckhhbmRsZXIpO1xuXHRcdGlmICh0aGlzLmFjdGl2ZUhpZ2hsaWdodCkge1xuXHRcdFx0Y29uc3QgcGFyZW50ID0gdGhpcy5hY3RpdmVIaWdobGlnaHQucGFyZW50Tm9kZTtcblx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0cGFyZW50LnJlcGxhY2VDaGlsZChcblx0XHRcdFx0XHRkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLmFjdGl2ZUhpZ2hsaWdodC5pbm5lclRleHQpLFxuXHRcdFx0XHRcdHRoaXMuYWN0aXZlSGlnaGxpZ2h0XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmFjdGl2ZUhpZ2hsaWdodCA9IG51bGw7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmhvdmVyQm94RWwpIHtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5yZW1vdmUoKTtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbCA9IG51bGw7XG5cdFx0fVxuXHRcdFxuXHRcdGlmICh0aGlzLnRvb2x0aXBFbCkge1xuXHRcdFx0dGhpcy50b29sdGlwRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyBqdXN0IHRvIGJlIHNhZmVcblx0XHRcdHRoaXMudG9vbHRpcEVsLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy50b29sdGlwRWwgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIENsZWFuIHVwIHN0eWxlc1xuXHRcdGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNlZGljdC1ob3Zlci1zdHlsZVwiKTtcblx0XHRpZiAoc3R5bGVFbCkgc3R5bGVFbC5yZW1vdmUoKTtcdFxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGxvYWREaWN0aW9uYXJ5RmlsZShmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZEJpbmFyeShmaWxlTmFtZSk7XG5cdFx0Y29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuXHRcdHJldHVybiBkZWNvZGVyLmRlY29kZShhcnJheUJ1ZmZlcik7XG5cdH1cblx0cHJpdmF0ZSBwYXJzZUNlZGljdExpbmUobGluZTogc3RyaW5nKTogQ2VkaWN0RW50cnkgfCBudWxsIHtcblx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oXFxTKylcXHMrKFxcUyspXFxzK1xcWyguKz8pXFxdXFxzK1xcLyguKylcXC8vKTtcblx0XHRpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcblx0XG5cdFx0Y29uc3QgWywgdHJhZCwgc2ltcCwgcGlueWluLCBkZWZzXSA9IG1hdGNoO1xuXHRcdHJldHVybiB7XG5cdFx0ICB0cmFkaXRpb25hbDogdHJhZCxcblx0XHQgIHNpbXBsaWZpZWQ6IHNpbXAsXG5cdFx0ICBwaW55aW4sXG5cdFx0ICBkZWZpbml0aW9uczogZGVmcy5zcGxpdCgnLycpXG5cdFx0fTtcblx0ICB9XG5cdFxuXHRwcml2YXRlIGxvYWRDZWRpY3RGcm9tVGV4dChjZWRpY3RUZXh0OiBzdHJpbmcpIHtcblx0Y29uc3QgbGluZXMgPSBjZWRpY3RUZXh0LnNwbGl0KCdcXG4nKTtcblx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoJyMnKSB8fCBsaW5lLnRyaW0oKSA9PT0gJycpIGNvbnRpbnVlO1xuXHRcdFx0Y29uc3QgZW50cnkgPSB0aGlzLnBhcnNlQ2VkaWN0TGluZShsaW5lKTtcblx0XHRcdGlmIChlbnRyeSkge1xuXHRcdFx0XHRbZW50cnkudHJhZGl0aW9uYWwsIGVudHJ5LnNpbXBsaWZpZWRdLmZvckVhY2goKGZvcm0pID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuY2VkaWN0TWFwLmhhcyhmb3JtKSkgdGhpcy5jZWRpY3RNYXAuc2V0KGZvcm0sIFtdKTtcblx0XHRcdFx0XHR0aGlzLmNlZGljdE1hcC5nZXQoZm9ybSkhLnB1c2goZW50cnkpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cHJpdmF0ZSBob3ZlckhhbmRsZXJDaGFycyA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuXHRcdGNvbnN0IGVsID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdGNvbnN0IGlzRWRpdExpbmUgPSBlbC5jbG9zZXN0KFwiLmNtLWxpbmVcIik7XG5cdFx0Y29uc3QgaXNQcmV2aWV3QmxvY2sgPSBlbC5jbG9zZXN0KFwiLm1hcmtkb3duLXByZXZpZXctdmlld1wiKT8ucXVlcnlTZWxlY3RvcihcIi5tYXJrZG93bi1wcmV2aWV3LXNpemVyXCIpO1xuXHRcdGNvbnN0IGlzUHJldmlld1RhcmdldCA9IGVsLmNsb3Nlc3QoXCIuZWwtcCwgLmVsLWgxLCAuZWwtaDIsIC5lbC1oMywgLmVsLWxpLCAuZWwtYmxvY2txdW90ZSwgLmVsLXRhYmxlXCIpO1xuXG5cdFx0aWYgKCFpc0VkaXRMaW5lICYmICEoaXNQcmV2aWV3QmxvY2sgJiYgaXNQcmV2aWV3VGFyZ2V0KSkge1xuXHRcdFx0dGhpcy5oaWRlSG92ZXJCb3goKTtcblx0XHRcdHRoaXMuaGlkZVRvb2x0aXAoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XHRcblx0XHRjb25zdCByYW5nZSA9IGRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG5cdFx0aWYgKCFyYW5nZSB8fCByYW5nZS5zdGFydENvbnRhaW5lci5ub2RlVHlwZSAhPT0gTm9kZS5URVhUX05PREUpIHtcblx0XHRcdHRoaXMuaGlkZUhvdmVyQm94KCk7XG5cdFx0XHR0aGlzLmhpZGVUb29sdGlwKCk7XG5cdFx0XHR0aGlzLmFjdGl2ZUhpZ2hsaWdodCA9IG51bGw7XG5cdFx0XHR0aGlzLmFjdGl2ZVdvcmQgPSBudWxsO1xuXHRcdFx0dGhpcy5hY3RpdmVFbnRyaWVzID0gbnVsbDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IHRleHROb2RlID0gcmFuZ2Uuc3RhcnRDb250YWluZXIgYXMgVGV4dDtcblx0XHRjb25zdCBvZmZzZXQgPSByYW5nZS5zdGFydE9mZnNldDtcblx0XHRjb25zdCB0ZXh0ID0gdGV4dE5vZGUudGV4dENvbnRlbnQgPz8gXCJcIjtcblx0XG5cdFx0Ly8gb3V0LW9mLWJvdW5kc1xuXHRcdGlmIChvZmZzZXQgPCAwIHx8IG9mZnNldCA+PSB0ZXh0Lmxlbmd0aCkge1xuXHRcdFx0dGhpcy5oaWRlSG92ZXJCb3goKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBPbmx5IHByb2NlZWQgaWYgdGhlIGhvdmVyZWQgY2hhcmFjdGVyIGlzIENoaW5lc2Vcblx0XHRjb25zdCBjaGluZXNlQ2hhciA9IC9bXFx1NGUwMC1cXHU5ZmZmXS87XG5cdFx0aWYgKCFjaGluZXNlQ2hhci50ZXN0KHRleHRbb2Zmc2V0XSkpIHtcblx0XHRcdHRoaXMuaGlkZUhvdmVyQm94KCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHQvLyBPbmx5IHRyeSB0byBtYXRjaCBhIHdvcmQgZnJvbSB0aGUgaG92ZXJlZCBjaGFyIGZvcndhcmRcblx0XHRjb25zdCBtYXRjaCA9IHRoaXMuZ2V0Rm9yd2FyZE1hdGNoZWRXb3JkKHRleHQsIG9mZnNldCk7XG5cdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0dGhpcy5oaWRlSG92ZXJCb3goKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBzdGFydCA9IG9mZnNldDtcblx0XHRjb25zdCBlbmQgPSBNYXRoLm1pbihtYXRjaC5lbmQsIHRleHROb2RlLmxlbmd0aCk7IC8vIGNsYW1wcyBzYWZlbHlcblxuXHRcdC8vIEhpZ2hsaWdodCBtYXRjaGVkIHdvcmRcblx0XHRjb25zdCByYW5nZUZvcldvcmQgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuXHRcdHJhbmdlRm9yV29yZC5zZXRTdGFydCh0ZXh0Tm9kZSwgc3RhcnQpO1xuXHRcdHJhbmdlRm9yV29yZC5zZXRFbmQodGV4dE5vZGUsIGVuZCk7XG5cdFxuXHRcdGNvbnN0IHJlY3QgPSByYW5nZUZvcldvcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHRcdGlmICh0aGlzLmhvdmVyQm94RWwpIHtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0ICsgd2luZG93LnNjcm9sbFh9cHhgO1xuXHRcdFx0dGhpcy5ob3ZlckJveEVsLnN0eWxlLnRvcCA9IGAke3JlY3QudG9wICsgd2luZG93LnNjcm9sbFl9cHhgO1xuXHRcdFx0dGhpcy5ob3ZlckJveEVsLnN0eWxlLndpZHRoID0gYCR7cmVjdC53aWR0aH1weGA7XG5cdFx0XHR0aGlzLmhvdmVyQm94RWwuc3R5bGUuaGVpZ2h0ID0gYCR7cmVjdC5oZWlnaHR9cHhgO1xuXHRcdFx0dGhpcy5ob3ZlckJveEVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcykge1xuXHRcdFx0Y29uc3Qgc2VudGVuY2UgPSB0aGlzLmV4dHJhY3RTZW50ZW5jZUZyb21UZXh0QXRPZmZzZXQodGV4dCwgb2Zmc2V0LCBtYXRjaC53b3JkKTtcblx0XHRcdHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlID0gc2VudGVuY2U7XG5cdFx0fVxuXG5cdFx0Ly8gVG9vbHRpcFxuXHRcdHRoaXMuc2hvd1Rvb2x0aXBGb3JXb3JkKG1hdGNoLndvcmQsIHJlY3QubGVmdCArIHdpbmRvdy5zY3JvbGxYLCByZWN0LnRvcCArIHdpbmRvdy5zY3JvbGxZKTtcblx0fTtcblx0XG5cdHByaXZhdGUgaGlkZUhvdmVyQm94KCkge1xuXHRcdGlmICh0aGlzLmhvdmVyQm94RWwpIHtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fVxuXHR9XG5cdFxuXHRwcml2YXRlIGdldEZvcndhcmRNYXRjaGVkV29yZCh0ZXh0OiBzdHJpbmcsIG9mZnNldDogbnVtYmVyKTogeyB3b3JkOiBzdHJpbmc7IGVuZDogbnVtYmVyIH0gfCBudWxsIHtcblx0XHRjb25zdCBtYXhXb3JkTGVuID0gNTtcblx0XHRjb25zdCBzdWJzdHIgPSB0ZXh0LnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbWF4V29yZExlbik7XG5cdFxuXHRcdC8vIFRyeSBsb25nZXN0IHRvIHNob3J0ZXN0XG5cdFx0Zm9yIChsZXQgbGVuID0gbWF4V29yZExlbjsgbGVuID4gMDsgbGVuLS0pIHtcblx0XHRcdGNvbnN0IGNhbmRpZGF0ZSA9IHN1YnN0ci5zbGljZSgwLCBsZW4pO1xuXHRcdFx0aWYgKHRoaXMuY2VkaWN0TWFwLmhhcyhjYW5kaWRhdGUpKSB7XG5cdFx0XHRcdHJldHVybiB7IHdvcmQ6IGNhbmRpZGF0ZSwgZW5kOiBvZmZzZXQgKyBsZW4gfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fTtcdFxuXHQgIFxuXHRcblx0cHJpdmF0ZSBzaG93VG9vbHRpcEZvcldvcmQod29yZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuXHRcdGlmICghdGhpcy50b29sdGlwRWwpIHJldHVybjtcblx0XG5cdFx0Y29uc3QgZW50cmllcyA9IHRoaXMuY2VkaWN0TWFwLmdldCh3b3JkKTtcblx0XHRpZiAoIWVudHJpZXMgfHwgZW50cmllcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgZHVwbGljYXRlIGVudHJpZXMgLSBkbyBJIG5lZWQgdGhpcz8gXG5cdFx0Y29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRcdGNvbnN0IHVuaXF1ZUVudHJpZXMgPSBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XG5cdFx0XHRjb25zdCBpZCA9IGAke2VudHJ5LnRyYWRpdGlvbmFsfS0ke2VudHJ5LnNpbXBsaWZpZWR9LSR7ZW50cnkucGlueWlufS0ke2VudHJ5LmRlZmluaXRpb25zLmpvaW4oXCIsXCIpfWA7XG5cdFx0XHRpZiAoc2Vlbi5oYXMoaWQpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRzZWVuLmFkZChpZCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9KTtcblxuXHRcdHRoaXMuYWN0aXZlV29yZCA9IHdvcmQ7XG5cdFx0dGhpcy5hY3RpdmVFbnRyaWVzID0gdW5pcXVlRW50cmllcztcblxuXHRcdGNvbnN0IHRleHQgPSB1bmlxdWVFbnRyaWVzLm1hcChlbnRyeSA9PiBcblx0XHRcdGAke2VudHJ5LnNpbXBsaWZpZWR9ICR7ZW50cnkuc2ltcGxpZmllZCAhPT0gZW50cnkudHJhZGl0aW9uYWw/IGVudHJ5LnRyYWRpdGlvbmFsOiBcIlwifSAoJHt0aGlzLnByb2Nlc3NQaW55aW4oZW50cnkucGlueWluKX0pXFxuJHtlbnRyeS5kZWZpbml0aW9ucy5qb2luKCc7ICcpfWBcblx0XHQpLmpvaW4oJ1xcblxcbicpO1xuXG5cdFx0dGhpcy50b29sdGlwRWwuaW5uZXJUZXh0ID0gdGV4dDtcblx0XHRpZiAoIXRoaXMuaG92ZXJCb3hFbCkgcmV0dXJuOyAvLyBGZWVsIGxpa2UgSSBkb250IG5lZWQgdGhpcz8gXG5cdFx0Y29uc3QgaG92ZXJSZWN0ID0gdGhpcy5ob3ZlckJveEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmxlZnQgPSBgJHtob3ZlclJlY3QubGVmdCArIHdpbmRvdy5zY3JvbGxYfXB4YDtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS50b3AgPSBgJHtob3ZlclJlY3QuYm90dG9tICsgd2luZG93LnNjcm9sbFkgKyA0fXB4YDsgLy8gNHB4IHBhZGRpbmdcblxuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdH1cblxuXHRwdWJsaWMgcHJvY2Vzc1BpbnlpbihwaW55aW46IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgdG9uZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xuXHRcdFx0XCJhXCI6IFtcIlx1MDEwMVwiLCBcIlx1MDBFMVwiLCBcIlx1MDFDRVwiLCBcIlx1MDBFMFwiLCBcImFcIl0sXG5cdFx0XHRcImVcIjogW1wiXHUwMTEzXCIsIFwiXHUwMEU5XCIsIFwiXHUwMTFCXCIsIFwiXHUwMEU4XCIsIFwiZVwiXSxcblx0XHRcdFwiaVwiOiBbXCJcdTAxMkJcIiwgXCJcdTAwRURcIiwgXCJcdTAxRDBcIiwgXCJcdTAwRUNcIiwgXCJpXCJdLFxuXHRcdFx0XCJvXCI6IFtcIlx1MDE0RFwiLCBcIlx1MDBGM1wiLCBcIlx1MDFEMlwiLCBcIlx1MDBGMlwiLCBcIm9cIl0sXG5cdFx0XHRcInVcIjogW1wiXHUwMTZCXCIsIFwiXHUwMEZBXCIsIFwiXHUwMUQ0XCIsIFwiXHUwMEY5XCIsIFwidVwiXSxcblx0XHRcdFwiXHUwMEZDXCI6IFtcIlx1MDFENlwiLCBcIlx1MDFEOFwiLCBcIlx1MDFEQVwiLCBcIlx1MDFEQ1wiLCBcIlx1MDBGQ1wiXVxuXHRcdH07XG5cdFxuXHRcdGNvbnN0IHZvd2VscyA9IFtcImFcIiwgXCJvXCIsIFwiZVwiLCBcImlcIiwgXCJ1XCIsIFwiXHUwMEZDXCJdO1xuXHRcblx0XHQvLyBQcm9jZXNzIGVhY2ggc3lsbGFibGUgKHNwbGl0IG9uIHNwYWNlKVxuXHRcdHJldHVybiBwaW55aW4uc3BsaXQoXCIgXCIpLm1hcChzeWxsYWJsZSA9PiB7XG5cdFx0XHRjb25zdCB0b25lID0gcGFyc2VJbnQoc3lsbGFibGVbc3lsbGFibGUubGVuZ3RoIC0gMV0pO1xuXHRcdFx0aWYgKHRvbmUgPCAxIHx8IHRvbmUgPiA1KSByZXR1cm4gc3lsbGFibGU7IC8vIHNraXAgaWYgbm8gdmFsaWQgdG9uZSBudW1iZXJcblx0XG5cdFx0XHRsZXQgY29yZSA9IHN5bGxhYmxlLnNsaWNlKDAsIC0xKTsgLy8gcmVtb3ZlIHRvbmUgbnVtYmVyXG5cdFx0XHRsZXQgdm93ZWxUb1JlcGxhY2UgPSBcIlwiO1xuXHRcblx0XHRcdC8vIGZpbmQgY29ycmVjdCB2b3dlbCB0byByZXBsYWNlIChwcmlvcml0eSBvcmRlcilcblx0XHRcdGZvciAoY29uc3QgdiBvZiB2b3dlbHMpIHtcblx0XHRcdFx0aWYgKGNvcmUuaW5jbHVkZXModikpIHtcblx0XHRcdFx0XHR2b3dlbFRvUmVwbGFjZSA9IHY7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIXZvd2VsVG9SZXBsYWNlKSByZXR1cm4gc3lsbGFibGU7IC8vIGZhbGxiYWNrOiBubyB2b3dlbCB0byBtb2RpZnlcblx0XG5cdFx0XHRjb25zdCBhY2NlbnRlZCA9IHRvbmVNYXBbdm93ZWxUb1JlcGxhY2VdW3RvbmUgLSAxXTtcblx0XHRcdGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCh2b3dlbFRvUmVwbGFjZSArIFwiKD8hLipcIiArIHZvd2VsVG9SZXBsYWNlICsgXCIpXCIsIFwiZ1wiKTsgLy8gcmVwbGFjZSBMQVNUIG9jY3VycmVuY2Vcblx0XG5cdFx0XHRjb3JlID0gY29yZS5yZXBsYWNlKHJlZ2V4LCBhY2NlbnRlZCk7XG5cdFx0XHRyZXR1cm4gY29yZTtcblx0XHR9KS5qb2luKFwiIFwiKTtcblx0fVxuXHRcblx0cHJpdmF0ZSBoaWRlVG9vbHRpcCgpIHtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdH1cblx0cHJpdmF0ZSBhc3luYyBhZGRUb1ZvY2FiKHdvcmQ6IHN0cmluZywgZW50cmllczogQ2VkaWN0RW50cnlbXSkge1xuXHRcdGNvbnN0IHBhdGggPSBgLm9ic2lkaWFuL3BsdWdpbnMvJHt0aGlzLm1hbmlmZXN0LmlkfS92b2NhYi5qc29uYDtcblx0XG5cdFx0bGV0IGxpc3Q6IFZvY2FiRW50cnlbXSA9IFtdO1xuXHRcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChwYXRoKTtcblx0XHRcdGxpc3QgPSBKU09OLnBhcnNlKGZpbGUpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0bGlzdCA9IFtdO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgbmV3U2VudGVuY2UgPSAodGhpcy5hY3RpdmVFeGFtcGxlU2VudGVuY2U/LnRyaW0oKSA9PT0gd29yZCA/IFwiXCIgOiB0aGlzLmFjdGl2ZUV4YW1wbGVTZW50ZW5jZT8udHJpbSgpKSB8fCBcIlwiO1xuXHRcdC8vIEknbSBzdXBwb3NlZCB0byBoYXZlIGEgY2hlY2sgZWFybGllciB0aGF0IHR1cm5zIFwid29yZFwiIGludG8gXCJcIiBidXQgZm9yIHNvbWUgcmVhc29uIG5vdCB3b3JraW5nIHNvIEkgaGF2ZSBeXG5cdFx0Ly8gRG8gaSBuZWVkIHRoZSBcIlwiIGZhbGxiYWNrP1xuXHRcdGNvbnN0IGV4aXN0aW5nRW50cnkgPSBsaXN0LmZpbmQoZSA9PiBlLnNpbXBsaWZpZWQgPT09IHdvcmQpO1xuXHRcdGlmIChleGlzdGluZ0VudHJ5KSB7XG5cdFx0XHQvLyBJZiBzZW50ZW5jZSBzYXZpbmcgaXMgb24gYW5kIHdlIGhhdmUgYSBzZW50ZW5jZS4uLlxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcyAmJiBuZXdTZW50ZW5jZSkge1xuXHRcdFx0XHRpZiAoIWV4aXN0aW5nRW50cnkuZXhhbXBsZVNlbnRlbmNlcykgZXhpc3RpbmdFbnRyeS5leGFtcGxlU2VudGVuY2VzID0gW107XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBdm9pZCBkdXBsaWNhdGVzXG5cdFx0XHRcdGlmICghZXhpc3RpbmdFbnRyeS5leGFtcGxlU2VudGVuY2VzLmluY2x1ZGVzKG5ld1NlbnRlbmNlKSkge1xuXHRcdFx0XHRcdGV4aXN0aW5nRW50cnkuZXhhbXBsZVNlbnRlbmNlcy5wdXNoKG5ld1NlbnRlbmNlKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHBhdGgsIEpTT04uc3RyaW5naWZ5KGxpc3QsIG51bGwsIDIpKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBBZGRlZCBuZXcgc2VudGVuY2UgdG8gJHt3b3JkfS5gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGAke3dvcmR9IGlzIGFscmVhZHkgaW4geW91ciB2b2NhYiBsaXN0LmApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXcgTm90aWNlKGAke3dvcmR9IGlzIGFscmVhZHkgaW4geW91ciB2b2NhYiBsaXN0LmApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlID0gbnVsbDtcblx0XHRcdHRoaXMucmVmcmVzaFZvY2FiU2lkZWJhcj8uKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWVyZ2UgZGVmaW5pdGlvbnMgYW5kIGNob29zZSBhIHJlcCBzaW1wbGlmaWVkL3RyYWRpdGlvbmFsXG5cdFx0Y29uc3QgYWxsRGVmcyA9IGVudHJpZXMuZmxhdE1hcChlID0+IGUuZGVmaW5pdGlvbnMpO1xuXHRcdGNvbnN0IHVuaXF1ZURlZnMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWxsRGVmcykpOyAvLyByZW1vdmUgZHVwbGljYXRlc1xuXHRcblx0XHRjb25zdCByZXAgPSBlbnRyaWVzWzBdOyAvLyByZXByZXNlbnRhdGl2ZSBlbnRyeSAodXN1YWxseSBmaW5lIGJ1dCB0aGUgcGlueWluIGNhbiBjaGFuZ2Ugc28gaSBzaG91bGQgaGFuZGxlIHRoYXQgaW4gdGhlIGZ1dHVyZSlcblx0XG5cdFx0Y29uc3QgbmV3RW50cnk6IFZvY2FiRW50cnkgPSB7XG5cdFx0XHRzaW1wbGlmaWVkOiByZXAuc2ltcGxpZmllZCxcblx0XHRcdHRyYWRpdGlvbmFsOiByZXAudHJhZGl0aW9uYWwsXG5cdFx0XHRwaW55aW46IHJlcC5waW55aW4sIFxuXHRcdFx0ZGVmaW5pdGlvbnM6IHVuaXF1ZURlZnMsXG5cdFx0XHRhZGRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHQuLi4odGhpcy5zZXR0aW5ncy5zYXZlU2VudGVuY2VzICYmIHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlXG5cdFx0XHRcdD8geyBleGFtcGxlU2VudGVuY2VzOiBbdGhpcy5hY3RpdmVFeGFtcGxlU2VudGVuY2VdIH1cblx0XHRcdFx0OiB7fSlcblx0XHR9O1xuXHRcblx0XHRsaXN0LnB1c2gobmV3RW50cnkpO1xuXHRcblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHBhdGgsIEpTT04uc3RyaW5naWZ5KGxpc3QsIG51bGwsIDIpKTtcblx0XHRuZXcgTm90aWNlKGBBZGRlZCAke3dvcmR9IHRvIHZvY2FiIGxpc3QhYCk7XG5cblx0XHR0aGlzLnJlZnJlc2hWb2NhYlNpZGViYXI/LigpO1xuXHRcdHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlID0gbnVsbDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZXhwb3J0Vm9jYWJUb0ZsYXNoY2FyZHMoKSB7XG5cdFx0Y29uc3QgcGF0aCA9IGAub2JzaWRpYW4vcGx1Z2lucy8ke3RoaXMubWFuaWZlc3QuaWR9L3ZvY2FiLmpzb25gO1xuXHRcdGNvbnN0IG91dHB1dFBhdGggPSBgVm9jYWIgRGVjay5tZGA7IC8vIFlvdSBjb3VsZCBhbHNvIHVzZSBhIGZvbGRlciBsaWtlIFwiRmxhc2hjYXJkcy9Wb2NhYi5tZFwiXG5cdFxuXHRcdGxldCBsaXN0OiB7XG5cdFx0XHRzaW1wbGlmaWVkOiBzdHJpbmc7XG5cdFx0XHR0cmFkaXRpb25hbDogc3RyaW5nO1xuXHRcdFx0ZGVmaW5pdGlvbnM6IHN0cmluZ1tdO1xuXHRcdFx0YWRkZWRBdDogc3RyaW5nO1xuXHRcdH1bXSA9IFtdO1xuXHRcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChwYXRoKTtcblx0XHRcdGxpc3QgPSBKU09OLnBhcnNlKGZpbGUpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJObyB2b2NhYiBsaXN0IGZvdW5kLlwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IGxpc3QubWFwKGVudHJ5ID0+IHtcblx0XHRcdGNvbnN0IGRlZnMgPSBlbnRyeS5kZWZpbml0aW9ucy5qb2luKFwiOyBcIik7XG5cdFx0XHRyZXR1cm4gYCR7ZW50cnkuc2ltcGxpZmllZH06OiR7ZGVmc31gO1xuXHRcdH0pO1xuXHRcblx0XHRjb25zdCBjb250ZW50ID0gYCNDaGluZXNlVm9jYWJcXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cXG5cIil9YDtcblx0XG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShvdXRwdXRQYXRoLCBjb250ZW50KTtcblx0XG5cdFx0bmV3IE5vdGljZShcIkV4cG9ydGVkIHZvY2FiIHRvIGZsYXNoY2FyZCBkZWNrIVwiKTtcblx0fVx0XG5cblx0cHJpdmF0ZSBleHRyYWN0U2VudGVuY2VGcm9tVGV4dEF0T2Zmc2V0KHRleHQ6IHN0cmluZywgb2Zmc2V0OiBudW1iZXIsIHdvcmQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnNhdmVTZW50ZW5jZXMpIHJldHVybiBcIlwiO1xuXHRcdC8vIEZpbmQgcHVuY3R1YXRpb24gYm91bmRhcmllcyBhcm91bmQgdGhlIHdvcmRcblx0XHRjb25zdCBwdW5jdHVhdGlvbiA9IC9bXHUzMDAyXHVGRjAxXHVGRjFGIT9dLztcblx0XG5cdFx0bGV0IHN0YXJ0ID0gb2Zmc2V0O1xuXHRcdHdoaWxlIChzdGFydCA+IDAgJiYgIXB1bmN0dWF0aW9uLnRlc3QodGV4dFtzdGFydCAtIDFdKSkge1xuXHRcdFx0c3RhcnQtLTtcblx0XHR9XG5cdFxuXHRcdGxldCBlbmQgPSBvZmZzZXQ7XG5cdFx0d2hpbGUgKGVuZCA8IHRleHQubGVuZ3RoICYmICFwdW5jdHVhdGlvbi50ZXN0KHRleHRbZW5kXSkpIHtcblx0XHRcdGVuZCsrO1xuXHRcdH1cblx0XHRpZiAoZW5kIDwgdGV4dC5sZW5ndGgpIGVuZCsrOyAvLyBpbmNsdWRlIHB1bmN0dWF0aW9uXG5cdFxuXHRcdGNvbnN0IHNlbnRlbmNlID0gdGV4dC5zbGljZShzdGFydCwgZW5kKS50cmltKCk7XG5cdFxuXHRcdC8vIGZhbGxiYWNrIHRvIGVudGlyZSBsaW5lIGlmIHNlbnRlbmNlIGlzIGVtcHR5IG9yIGRvZXNuXHUyMDE5dCBjb250YWluIHRoZSB3b3JkXG5cdFx0aWYgKCFzZW50ZW5jZSB8fCAhc2VudGVuY2UuaW5jbHVkZXMod29yZCkpIHtcblx0XHRcdGlmIChsaW5lLnRyaW0oKSA9PT0gd29yZCkgcmV0dXJuIFwiXCI7IC8vIGRvbid0IHNhdmUgbG9uZWx5IHdvcmQgbGluZXNcblx0XHRcdGNvbnN0IGxpbmUgPSB0ZXh0LnNwbGl0KCdcXG4nKS5maW5kKGwgPT4gbC5pbmNsdWRlcyh3b3JkKSkgPz8gdGV4dDtcblx0XHRcdHJldHVybiBsaW5lLnRyaW0oKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBzZW50ZW5jZTtcblx0fVx0XG5cblx0YXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuXHRcdGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZPQ0FCX1NJREVCQVIpO1xuXHRcdGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKS5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0XHR0eXBlOiBWSUVXX1RZUEVfVk9DQUJfU0lERUJBUixcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WT0NBQl9TSURFQkFSKVswXVxuXHRcdCk7XG5cdH1cblxuXHQvLyBuZWVkcyB0byBiZSBhY2Nlc3NlZCBieSBWb2NhYlNpZGViYXJWaWV3XG5cdHB1YmxpYyBhc3luYyBsb2FkVm9jYWJMaXN0KCk6IFByb21pc2U8Vm9jYWJFbnRyeUZsYXRbXT4ge1xuXHRcdGNvbnN0IHBhdGggPSBgLm9ic2lkaWFuL3BsdWdpbnMvJHt0aGlzLm1hbmlmZXN0LmlkfS92b2NhYi5qc29uYDtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChwYXRoKTtcblx0XHRcdHJldHVybiBKU09OLnBhcnNlKGZpbGUpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0fVxuXG5cdC8vIERvIHRoaXMgc28gc2lkZWJhciBkb2VzbnQgZ2V0IGRvdWJsZSByZW5kZXJlZCB3aGVuIEkgc3dpdGNoIGxlYXZlc1xuXHRwdWJsaWMgdHJpZ2dlclNpZGViYXJSZWZyZXNoKCkge1xuXHRcdGlmICh0aGlzLnJlZnJlc2hUaW1lcikgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJlZnJlc2hUaW1lcik7XG5cblx0XHR0aGlzLnJlZnJlc2hUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMucmVmcmVzaFZvY2FiU2lkZWJhcj8uKCk7XG5cdFx0fSwgMTAwKTtcblx0fVxuXHRcblx0cHVibGljIHNjcm9sbFRvV29yZEluQWN0aXZlRmlsZSh3b3JkOiBzdHJpbmcpIHtcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5jdXJyZW50TWFya2Rvd25WaWV3O1xuXHRcdGNvbnN0IG1vZGUgPSB2aWV3LmdldE1vZGUoKTtcblxuXHRcdGlmICghdmlldykge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiTm8gYWN0aXZlIE1hcmtkb3duIHZpZXdcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHRsZXQgc2Nyb2xsZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcblxuXHRcdGlmIChtb2RlID09PSBcInNvdXJjZVwiKSB7XG5cdFx0XHRzY3JvbGxlciA9IHZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5jbS1zY3JvbGxlclwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2Nyb2xsZXIgPSB2aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubWFya2Rvd24tcHJldmlldy1zaXplclwiKTtcblx0XHR9XG5cblx0XHRpZiAoIXNjcm9sbGVyKSByZXR1cm47XG5cdFxuXHRcdGxldCBsaW5lczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG5cdFx0aWYgKG1vZGUgPT09IFwic291cmNlXCIpIHtcblx0XHRcdGxpbmVzID0gc2Nyb2xsZXIucXVlcnlTZWxlY3RvckFsbChcIi5jbS1saW5lXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsaW5lcyA9IHNjcm9sbGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHRcdFwiLmVsLXAsIC5lbC1oMSwgLmVsLWgyLCAuZWwtaDMsIC5lbC1saSwgLmVsLWJsb2NrcXVvdGUsIC5lbC10YWJsZVwiXG5cdFx0XHQpO1xuXHRcdH1cblx0XHRcblx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRcdGlmIChsaW5lLnRleHRDb250ZW50Py5pbmNsdWRlcyh3b3JkKSkge1xuXHRcdFx0XHQobGluZSBhcyBIVE1MRWxlbWVudCkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwiY2VudGVyXCIgfSk7XG5cdFxuXHRcdFx0XHQvLyBIaWdobGlnaHQgdGhlIGxpbmUgYnJpZWZseSwgZGVsYXllZCBieSAxMDAgdG8gYWxsb3cgRE9NIHRvIHNjcm9sbCBmaXJzdFxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRsaW5lLmNsYXNzTGlzdC5hZGQoXCJjZWRpY3QtbGluZS1ob3ZlclwiKTtcblx0XHRcdFx0XG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRsaW5lLmNsYXNzTGlzdC5yZW1vdmUoXCJjZWRpY3QtbGluZS1ob3ZlclwiKTtcblx0XHRcdFx0XHR9LCA1MDAwKTtcblx0XHRcdFx0fSwgMTAwKTtcblx0XG5cdFx0XHRcdC8vIFJlc3RvcmUgZm9jdXNcblx0XHRcdFx0Ly8gc2V0VGltZW91dCgoKSA9PiB2aWV3LmVkaXRvcj8uZm9jdXMoKSwgMTAwKTtcblx0XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5jbGFzcyBWb2NhYlNpZGViYXJWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwbHVnaW46IE15UGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTXlQbHVnaW4pIHtcblx0XHRzdXBlcihsZWFmKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGdldFZpZXdUeXBlKCkge1xuXHRcdHJldHVybiBWSUVXX1RZUEVfVk9DQUJfU0lERUJBUjtcblx0fVxuXG5cdGdldERpc3BsYXlUZXh0KCkge1xuXHRcdHJldHVybiBcIlZvY2FidWxhcnlcIjtcblx0fVxuXG5cdGdldEljb24oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gXCJib29rLW9wZW5cIjsgXG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Ly8gY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcblx0XHQvLyBjb25zdCBjb250ZW50ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1jb250ZW50XCIpID8/IGNvbnRhaW5lci5jaGlsZHJlblsxXTtcblx0XHQvLyBjb250ZW50LmVtcHR5KCk7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcblx0XHRjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi52b2NhYi1lbnRyeVwiKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcblxuXHRcblx0XHQvLyBSZWdpc3RlciB0aGUgcmVmcmVzaCBjYWxsYmFja1xuXHRcdHRoaXMucGx1Z2luLnJlZnJlc2hWb2NhYlNpZGViYXIgPSAoKSA9PiB0aGlzLnJlbmRlclNpZGViYXIoKTtcblx0XG5cdFx0YXdhaXQgdGhpcy53YWl0Rm9yVmlldygpO1xuXHRcdGF3YWl0IHRoaXMucmVuZGVyU2lkZWJhcigpO1x0XG5cdH1cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoVm9jYWJTaWRlYmFyID0gbnVsbDtcblx0fVxuXHRhc3luYyB3YWl0Rm9yVmlldygpIHtcblx0XHRsZXQgcmV0cmllcyA9IDEwO1xuXHRcdHdoaWxlICghdGhpcy5wbHVnaW4uY3VycmVudE1hcmtkb3duVmlldyAmJiByZXRyaWVzLS0gPiAwKSB7XG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG5cdFx0fVxuXHR9XG5cdFxuXHRhc3luYyByZW5kZXJTaWRlYmFyKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cdFxuXHRcdGNvbnN0IHZvY2FiTGlzdCA9IGF3YWl0IHRoaXMucGx1Z2luLmxvYWRWb2NhYkxpc3QoKTtcblxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLnBsdWdpbi5jdXJyZW50TWFya2Rvd25WaWV3O1xuXHRcdGNvbnN0IGN1cnJlbnRGaWxlVGV4dCA9IHZpZXc/LmVkaXRvclxuXHRcdFx0PyB2aWV3LmVkaXRvci5nZXRWYWx1ZSgpXG5cdFx0XHQ6IHZpZXc/LmNvbnRlbnRFbC50ZXh0Q29udGVudCA/PyBcIlwiO1xuXG5cdFx0Y29uc3QgbWF0Y2hpbmdWb2NhYiA9IHZvY2FiTGlzdC5maWx0ZXIoZW50cnkgPT5cblx0XHRcdGN1cnJlbnRGaWxlVGV4dC5pbmNsdWRlcyhlbnRyeS5zaW1wbGlmaWVkKVxuXHRcdCk7XG5cblx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJoM1wiLCB7XG5cdFx0XHR0ZXh0OiBcIlZvY2FiIGluIHRoaXMgbm90ZVwiLFxuXHRcdFx0Y2xzOiBcInZvY2FiLWhlYWRpbmdcIlxuXHRcdH0pO1xuXHRcdC8vIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7XG5cdFx0Ly8gXHR0ZXh0OiBcIlZvY2FiIGluIHRoaXMgbm90ZVwiLFxuXHRcdC8vIFx0Y2xzOiBcInZvY2FiLWhlYWRpbmdcIlxuXHRcdC8vIH0pO1xuXG5cdFx0aWYgKCFtYXRjaGluZ1ZvY2FiLmxlbmd0aCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gdm9jYWIgeWV0LlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XG5cdFx0Zm9yIChjb25zdCBlbnRyeSBvZiBtYXRjaGluZ1ZvY2FiKSB7XG5cdFx0XHRjb25zdCB3cmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInZvY2FiLWVudHJ5XCIgfSk7XG5cdFxuXHRcdFx0Ly8gVGl0bGU6IHNpbXBsaWZpZWQgKyB0cmFkaXRpb25hbFxuXHRcdFx0d3JhcHBlci5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IGAke2VudHJ5LnNpbXBsaWZpZWR9ICR7ZW50cnkuc2ltcGxpZmllZCAhPT0gZW50cnkudHJhZGl0aW9uYWwgPyBcIihcIiArIGVudHJ5LnRyYWRpdGlvbmFsICsgXCIpXCI6IFwiXCJ9YCxcblx0XHRcdFx0Y2xzOiAndm9jYWItd29yZCdcblx0XHRcdH0pO1xuXHRcblx0XHRcdC8vIFBpbnlpblxuXHRcdFx0d3JhcHBlci5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IHRoaXMucGx1Z2luLnByb2Nlc3NQaW55aW4/LihlbnRyeS5waW55aW4gPz8gXCJcIiksXG5cdFx0XHRcdGNsczogJ3ZvY2FiLXBpbnlpbidcblx0XHRcdH0pO1xuXHRcblx0XHRcdC8vIERlZmluaXRpb25zXG5cdFx0XHR3cmFwcGVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0dGV4dDogZW50cnkuZGVmaW5pdGlvbnMuam9pbihcIjtcXG4gXCIpLFxuXHRcdFx0XHRjbHM6ICd2b2NhYi1kZWZzJ1xuXHRcdFx0fSk7XG5cdFxuXHRcdFx0Ly8gRGl2aWRlclxuXHRcdFx0Ly8gd3JhcHBlci5jcmVhdGVFbChcImhyXCIpO1xuXG5cdFx0XHQvLyBNYWtlIHdyYXBwZXIgY2xpY2thYmxlXG5cdFx0XHR3cmFwcGVyLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXHRcdFx0d3JhcHBlci5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zY3JvbGxUb1dvcmRJbkFjdGl2ZUZpbGUoZW50cnkuc2ltcGxpZmllZCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0fVx0XG59XG5cblxuY2xhc3MgU2FtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLnNldFRleHQoJ1dvYWghJyk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogTXlQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJTYXZlIGV4YW1wbGUgc2VudGVuY2VzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIldoZW4gc2F2aW5nIGEgdm9jYWIgd29yZCwgYWxzbyBzdG9yZSB0aGUgc2VudGVuY2UgaXQgYXBwZWFycyBpbi5cIilcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNhdmVTZW50ZW5jZXMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHR9KSk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBc0c7QUFFdEcsSUFB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
