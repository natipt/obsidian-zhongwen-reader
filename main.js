/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var VIEW_TYPE_VOCAB_SIDEBAR = "vocab-sidebar";
var DEFAULT_SETTINGS = {
  saveSentences: false
};
var MyPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.cedictMap = /* @__PURE__ */ new Map();
    this.activeHighlight = null;
    this.activeWord = null;
    this.activeEntries = null;
    this.hoverBoxEl = null;
    this.tooltipEl = null;
    this.refreshVocabSidebar = null;
    // not update vocab list on every keystroke
    this.refreshTimer = null;
    // save currentMarkdownView so vocab list doesnt disappear when i click on vocab sidebar
    this.currentMarkdownView = null;
    // For if the user wants to store the current sentence as an example
    this.activeExampleSentence = null;
    this.hoverHandlerChars = (event) => {
      var _a, _b;
      const el = event.target;
      const isEditLine = el.closest(".cm-line");
      const isPreviewBlock = (_a = el.closest(".markdown-preview-view")) == null ? void 0 : _a.querySelector(".markdown-preview-sizer");
      const isPreviewTarget = el.closest(".el-p, .el-h1, .el-h2, .el-h3, .el-li, .el-blockquote, .el-table");
      if (!isEditLine && !(isPreviewBlock && isPreviewTarget)) {
        this.hideHoverBox();
        this.hideTooltip();
        return;
      }
      const range = document.caretRangeFromPoint(event.clientX, event.clientY);
      if (!range || range.startContainer.nodeType !== Node.TEXT_NODE) {
        this.hideHoverBox();
        this.hideTooltip();
        this.activeHighlight = null;
        this.activeWord = null;
        this.activeEntries = null;
        return;
      }
      const textNode = range.startContainer;
      const offset = range.startOffset;
      const text = (_b = textNode.textContent) != null ? _b : "";
      if (offset < 0 || offset >= text.length) {
        this.hideHoverBox();
        return;
      }
      const chineseChar = /[\u4e00-\u9fff]/;
      if (!chineseChar.test(text[offset])) {
        this.hideHoverBox();
        return;
      }
      const match = this.getForwardMatchedWord(text, offset);
      if (!match) {
        this.hideHoverBox();
        return;
      }
      const start = offset;
      const end = Math.min(match.end, textNode.length);
      const rangeForWord = document.createRange();
      rangeForWord.setStart(textNode, start);
      rangeForWord.setEnd(textNode, end);
      const rect = rangeForWord.getBoundingClientRect();
      if (this.hoverBoxEl) {
        this.hoverBoxEl.style.left = `${rect.left + window.scrollX}px`;
        this.hoverBoxEl.style.top = `${rect.top + window.scrollY}px`;
        this.hoverBoxEl.style.width = `${rect.width}px`;
        this.hoverBoxEl.style.height = `${rect.height}px`;
        this.hoverBoxEl.style.display = "block";
      }
      if (this.settings.saveSentences) {
        const sentence = this.extractSentenceFromTextAtOffset(text, offset, match.word);
        this.activeExampleSentence = sentence;
      }
      this.showTooltipForWord(match.word, rect.left + window.scrollX, rect.top + window.scrollY);
    };
  }
  async onload() {
    await this.loadSettings();
    const data = await this.loadDictionaryFile(`.obsidian/plugins/${this.manifest.id}/cedict_ts.u8`);
    this.loadCedictFromText(data);
    console.log("Cedict loaded.");
    const style = document.createElement("style");
    style.id = "cedict-hover-style";
    style.innerText = `
		.cedict-hover-box {
			position: absolute;
			z-index: 0 !important;
			background-color: hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3);
			pointer-events: none;
			border-radius: 3px;
			transition: all 0.05s ease;
		}
		.cedict-line-hover {
			background-color: hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3);
			transition: background-color 0.3s ease;
		}
		.cm-line{
			transition: all 0.5s ease;
		}

		.vocab-entry {
			margin-bottom: 1rem;
			padding-bottom: 0.5rem;
			border-bottom: 1px solid var(--background-modifier-border);
			cursor: pointer;
		}
	
		.vocab-word {
			font-weight: bold;
			font-size: 1.1em;
		}
	
		.vocab-pinyin {
			font-style: italic;
			color: var(--text-muted);
			margin-top: 2px;
		}
	
		.vocab-defs {
			margin-top: 4px;
			color: var(--text-normal);
			font-size: 0.95em;
			line-height: 1.4;
		}
		`;
    document.head.appendChild(style);
    this.hoverBoxEl = document.createElement("div");
    this.hoverBoxEl.className = "cedict-hover-box";
    document.body.appendChild(this.hoverBoxEl);
    this.tooltipEl = document.createElement("div");
    this.tooltipEl.style.position = "absolute";
    this.tooltipEl.style.padding = "6px 10px";
    this.tooltipEl.style.background = "var(--background-secondary)";
    this.tooltipEl.style.color = "var(--text-normal)";
    this.tooltipEl.style.border = "1px solid var(--background-modifier-border)";
    this.tooltipEl.style.borderRadius = "6px";
    this.tooltipEl.style.boxShadow = "0 4px 8px rgba(0,0,0,0.1)";
    this.tooltipEl.style.whiteSpace = "pre-line";
    this.tooltipEl.style.zIndex = "10000";
    this.tooltipEl.style.pointerEvents = "none";
    this.tooltipEl.style.display = "none";
    document.body.appendChild(this.tooltipEl);
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.hoverHandler = this.hoverHandlerChars.bind(this);
    document.addEventListener("mousemove", this.hoverHandler);
    this.registerDomEvent(document, "keydown", (event) => {
      if (event.key.toLowerCase() === "s" && this.activeWord && this.activeEntries) {
        event.preventDefault();
        event.stopPropagation();
        this.addToVocab(this.activeWord, this.activeEntries);
      }
    });
    this.addCommand({
      id: "export-vocab-flashcards",
      name: "Export Vocab to Flashcards",
      callback: () => this.exportVocabToFlashcards()
    });
    this.registerView(
      VIEW_TYPE_VOCAB_SIDEBAR,
      (leaf) => new VocabSidebarView(leaf, this)
    );
    this.addRibbonIcon("book-open", "Open Vocab Sidebar", async () => {
      await this.activateView();
    });
    await this.activateView();
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (view) {
          this.currentMarkdownView = view;
          this.triggerSidebarRefresh();
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-change", () => {
        if (this.refreshTimer) window.clearTimeout(this.refreshTimer);
        this.refreshTimer = window.setTimeout(() => {
          const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
          if (view) {
            this.currentMarkdownView = view;
            this.triggerSidebarRefresh();
          }
        }, 300);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (view) {
          this.currentMarkdownView = view;
          this.triggerSidebarRefresh();
        }
      })
    );
  }
  onunload() {
    document.removeEventListener("mousemove", this.hoverHandler);
    if (this.activeHighlight) {
      const parent = this.activeHighlight.parentNode;
      if (parent) {
        parent.replaceChild(
          document.createTextNode(this.activeHighlight.innerText),
          this.activeHighlight
        );
      }
      this.activeHighlight = null;
    }
    if (this.hoverBoxEl) {
      this.hoverBoxEl.remove();
      this.hoverBoxEl = null;
    }
    if (this.tooltipEl) {
      this.tooltipEl.style.display = "none";
      this.tooltipEl.remove();
      this.tooltipEl = null;
    }
    const styleEl = document.getElementById("cedict-hover-style");
    if (styleEl) styleEl.remove();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async loadDictionaryFile(fileName) {
    const arrayBuffer = await this.app.vault.adapter.readBinary(fileName);
    const decoder = new TextDecoder("utf-8");
    return decoder.decode(arrayBuffer);
  }
  parseCedictLine(line) {
    const match = line.match(/^(\S+)\s+(\S+)\s+\[(.+?)\]\s+\/(.+)\//);
    if (!match) return null;
    const [, trad, simp, pinyin, defs] = match;
    return {
      traditional: trad,
      simplified: simp,
      pinyin,
      definitions: defs.split("/")
    };
  }
  loadCedictFromText(cedictText) {
    const lines = cedictText.split("\n");
    for (const line of lines) {
      if (line.startsWith("#") || line.trim() === "") continue;
      const entry = this.parseCedictLine(line);
      if (entry) {
        [entry.traditional, entry.simplified].forEach((form) => {
          if (!this.cedictMap.has(form)) this.cedictMap.set(form, []);
          this.cedictMap.get(form).push(entry);
        });
      }
    }
  }
  hideHoverBox() {
    if (this.hoverBoxEl) {
      this.hoverBoxEl.style.display = "none";
    }
  }
  getForwardMatchedWord(text, offset) {
    const maxWordLen = 5;
    const substr = text.slice(offset, offset + maxWordLen);
    for (let len = maxWordLen; len > 0; len--) {
      const candidate = substr.slice(0, len);
      if (this.cedictMap.has(candidate)) {
        return { word: candidate, end: offset + len };
      }
    }
    return null;
  }
  showTooltipForWord(word, x, y) {
    if (!this.tooltipEl) return;
    const entries = this.cedictMap.get(word);
    if (!entries || entries.length === 0) {
      this.tooltipEl.style.display = "none";
      return;
    }
    const seen = /* @__PURE__ */ new Set();
    const uniqueEntries = entries.filter((entry) => {
      const id = `${entry.traditional}-${entry.simplified}-${entry.pinyin}-${entry.definitions.join(",")}`;
      if (seen.has(id)) return false;
      seen.add(id);
      return true;
    });
    this.activeWord = word;
    this.activeEntries = uniqueEntries;
    const text = uniqueEntries.map(
      (entry) => `${entry.simplified} ${entry.simplified !== entry.traditional ? entry.traditional : ""} (${this.processPinyin(entry.pinyin)})
${entry.definitions.join("; ")}`
    ).join("\n\n");
    this.tooltipEl.innerText = text;
    if (!this.hoverBoxEl) return;
    const hoverRect = this.hoverBoxEl.getBoundingClientRect();
    this.tooltipEl.style.left = `${hoverRect.left + window.scrollX}px`;
    this.tooltipEl.style.top = `${hoverRect.bottom + window.scrollY + 4}px`;
    this.tooltipEl.style.display = "block";
  }
  processPinyin(pinyin) {
    const toneMap = {
      "a": ["\u0101", "\xE1", "\u01CE", "\xE0", "a"],
      "e": ["\u0113", "\xE9", "\u011B", "\xE8", "e"],
      "i": ["\u012B", "\xED", "\u01D0", "\xEC", "i"],
      "o": ["\u014D", "\xF3", "\u01D2", "\xF2", "o"],
      "u": ["\u016B", "\xFA", "\u01D4", "\xF9", "u"],
      "\xFC": ["\u01D6", "\u01D8", "\u01DA", "\u01DC", "\xFC"]
    };
    const vowels = ["a", "o", "e", "i", "u", "\xFC"];
    return pinyin.split(" ").map((syllable) => {
      const tone = parseInt(syllable[syllable.length - 1]);
      if (tone < 1 || tone > 5) return syllable;
      let core = syllable.slice(0, -1);
      let vowelToReplace = "";
      for (const v of vowels) {
        if (core.includes(v)) {
          vowelToReplace = v;
          break;
        }
      }
      if (!vowelToReplace) return syllable;
      const accented = toneMap[vowelToReplace][tone - 1];
      const regex = new RegExp(vowelToReplace + "(?!.*" + vowelToReplace + ")", "g");
      core = core.replace(regex, accented);
      return core;
    }).join(" ");
  }
  hideTooltip() {
    this.tooltipEl.style.display = "none";
  }
  async addToVocab(word, entries) {
    var _a, _b, _c, _d;
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    let list = [];
    try {
      const file = await this.app.vault.adapter.read(path);
      list = JSON.parse(file);
    } catch (e) {
      list = [];
    }
    const newSentence = (((_a = this.activeExampleSentence) == null ? void 0 : _a.trim()) === word ? "" : (_b = this.activeExampleSentence) == null ? void 0 : _b.trim()) || "";
    const existingEntry = list.find((e) => e.simplified === word);
    if (existingEntry) {
      if (this.settings.saveSentences && newSentence) {
        if (!existingEntry.exampleSentences) existingEntry.exampleSentences = [];
        if (!existingEntry.exampleSentences.includes(newSentence)) {
          existingEntry.exampleSentences.push(newSentence);
          await this.app.vault.adapter.write(path, JSON.stringify(list, null, 2));
          new import_obsidian.Notice(`Added new sentence to ${word}.`);
        } else {
          new import_obsidian.Notice(`${word} is already in your vocab list.`);
        }
      } else {
        new import_obsidian.Notice(`${word} is already in your vocab list.`);
      }
      this.activeExampleSentence = null;
      (_c = this.refreshVocabSidebar) == null ? void 0 : _c.call(this);
      return;
    }
    const allDefs = entries.flatMap((e) => e.definitions);
    const uniqueDefs = Array.from(new Set(allDefs));
    const rep = entries[0];
    const newEntry = {
      simplified: rep.simplified,
      traditional: rep.traditional,
      pinyin: rep.pinyin,
      definitions: uniqueDefs,
      addedAt: (/* @__PURE__ */ new Date()).toISOString(),
      ...this.settings.saveSentences && this.activeExampleSentence ? { exampleSentences: [this.activeExampleSentence] } : {}
    };
    list.push(newEntry);
    await this.app.vault.adapter.write(path, JSON.stringify(list, null, 2));
    new import_obsidian.Notice(`Added ${word} to vocab list!`);
    (_d = this.refreshVocabSidebar) == null ? void 0 : _d.call(this);
    this.activeExampleSentence = null;
  }
  async exportVocabToFlashcards() {
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    const outputPath = `Obsidian-Zhongwen-Reader-Vocab-Deck.md`;
    let list = [];
    try {
      const file = await this.app.vault.adapter.read(path);
      list = JSON.parse(file);
    } catch (e) {
      new import_obsidian.Notice("No vocab list found.");
      return;
    }
    const lines = list.map((entry) => {
      const defs = entry.definitions.join("; ");
      return `${entry.simplified}::${defs}`;
    });
    const content = `#ChineseVocab

${lines.join("\n\n")}`;
    await this.app.vault.adapter.write(outputPath, content);
    new import_obsidian.Notice("Exported vocab to flashcard deck!");
  }
  extractSentenceFromTextAtOffset(text, offset, word) {
    var _a;
    if (!this.settings.saveSentences) return "";
    const punctuation = /[。！？!?]/;
    let start = offset;
    while (start > 0 && !punctuation.test(text[start - 1])) {
      start--;
    }
    let end = offset;
    while (end < text.length && !punctuation.test(text[end])) {
      end++;
    }
    if (end < text.length) end++;
    const sentence = text.slice(start, end).trim();
    if (!sentence || !sentence.includes(word)) {
      if (line.trim() === word) return "";
      const line = (_a = text.split("\n").find((l) => l.includes(word))) != null ? _a : text;
      return line.trim();
    }
    return sentence;
  }
  async activateView() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_VOCAB_SIDEBAR);
    if (leaves.length === 0) {
      await this.app.workspace.getRightLeaf(false).setViewState({
        type: VIEW_TYPE_VOCAB_SIDEBAR,
        active: true
      });
    }
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_VOCAB_SIDEBAR)[0]
    );
  }
  // needs to be accessed by VocabSidebarView
  async loadVocabList() {
    const path = `.obsidian/plugins/${this.manifest.id}/vocab.json`;
    try {
      const file = await this.app.vault.adapter.read(path);
      return JSON.parse(file);
    } catch (e) {
      return [];
    }
  }
  // Do this so sidebar doesnt get double rendered when I switch leaves
  triggerSidebarRefresh() {
    if (this.refreshTimer) window.clearTimeout(this.refreshTimer);
    this.refreshTimer = window.setTimeout(() => {
      var _a;
      (_a = this.refreshVocabSidebar) == null ? void 0 : _a.call(this);
    }, 100);
  }
  scrollToWordInActiveFile(word) {
    var _a;
    const view = this.currentMarkdownView;
    const mode = view.getMode();
    if (!view) {
      console.warn("No active Markdown view");
      return;
    }
    let scroller;
    if (mode === "source") {
      scroller = view.containerEl.querySelector(".cm-scroller");
    } else {
      scroller = view.containerEl.querySelector(".markdown-preview-sizer");
    }
    if (!scroller) return;
    let lines;
    if (mode === "source") {
      lines = scroller.querySelectorAll(".cm-line");
    } else {
      lines = scroller.querySelectorAll(
        ".el-p, .el-h1, .el-h2, .el-h3, .el-li, .el-blockquote, .el-table"
      );
    }
    for (const line of lines) {
      if ((_a = line.textContent) == null ? void 0 : _a.includes(word)) {
        line.scrollIntoView({ behavior: "smooth", block: "center" });
        setTimeout(() => {
          line.classList.add("cedict-line-hover");
          setTimeout(() => {
            line.classList.remove("cedict-line-hover");
          }, 5e3);
        }, 100);
        break;
      }
    }
  }
};
var VocabSidebarView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_VOCAB_SIDEBAR;
  }
  getDisplayText() {
    return "Vocabulary";
  }
  getIcon() {
    return "book-open";
  }
  async onOpen() {
    const container = this.containerEl;
    container.querySelectorAll(".vocab-entry").forEach((el) => el.remove());
    this.plugin.refreshVocabSidebar = () => this.renderSidebar();
    await this.waitForView();
    await this.renderSidebar();
  }
  async onClose() {
    this.plugin.refreshVocabSidebar = null;
  }
  async waitForView() {
    let retries = 10;
    while (!this.plugin.currentMarkdownView && retries-- > 0) {
      await new Promise((resolve) => setTimeout(resolve, 100));
    }
  }
  async renderSidebar() {
    var _a, _b, _c, _d;
    const container = this.containerEl.children[1];
    container.empty();
    const vocabList = await this.plugin.loadVocabList();
    const view = this.plugin.currentMarkdownView;
    const currentFileText = (view == null ? void 0 : view.editor) ? view.editor.getValue() : (_a = view == null ? void 0 : view.contentEl.textContent) != null ? _a : "";
    const matchingVocab = vocabList.filter(
      (entry) => currentFileText.includes(entry.simplified)
    );
    container.createEl("h3", {
      text: "Vocab in this note",
      cls: "vocab-heading"
    });
    if (!matchingVocab.length) {
      container.createEl("p", { text: "No vocab yet." });
      return;
    }
    for (const entry of matchingVocab) {
      const wrapper = container.createEl("div", { cls: "vocab-entry" });
      wrapper.createEl("div", {
        text: `${entry.simplified} ${entry.simplified !== entry.traditional ? "(" + entry.traditional + ")" : ""}`,
        cls: "vocab-word"
      });
      wrapper.createEl("div", {
        text: (_d = (_c = this.plugin).processPinyin) == null ? void 0 : _d.call(_c, (_b = entry.pinyin) != null ? _b : ""),
        cls: "vocab-pinyin"
      });
      wrapper.createEl("div", {
        text: entry.definitions.join(";\n "),
        cls: "vocab-defs"
      });
      wrapper.style.cursor = "pointer";
      wrapper.onclick = () => {
        this.plugin.scrollToWordInActiveFile(entry.simplified);
      };
    }
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Save example sentences").setDesc("When saving a vocab word, also store the sentence it appears in.").addToggle((toggle) => toggle.setValue(this.plugin.settings.saveSentences).onChange(async (value) => {
      this.plugin.settings.saveSentences = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBJdGVtVmlldyB9IGZyb20gJ29ic2lkaWFuJztcblxuY29uc3QgVklFV19UWVBFX1ZPQ0FCX1NJREVCQVIgPSBcInZvY2FiLXNpZGViYXJcIjtcblxuLy8gVGhpcyBkZWZpbmVzIHRoZSBzdHJ1Y3R1cmUgZm9yIGRpY3Rpb25hcnkgZW50cmllc1xuaW50ZXJmYWNlIENlZGljdEVudHJ5IHtcblx0dHJhZGl0aW9uYWw6IHN0cmluZztcblx0c2ltcGxpZmllZDogc3RyaW5nO1xuXHRwaW55aW46IHN0cmluZztcblx0ZGVmaW5pdGlvbnM6IHN0cmluZ1tdO1xuICB9XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XG5cdHNhdmVTZW50ZW5jZXM6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBWb2NhYkVudHJ5IHtcblx0c2ltcGxpZmllZDogc3RyaW5nO1xuXHR0cmFkaXRpb25hbDogc3RyaW5nO1xuXHRwaW55aW46IHN0cmluZztcblx0ZGVmaW5pdGlvbnM6IHN0cmluZ1tdO1xuXHRhZGRlZEF0OiBzdHJpbmc7XG5cdGV4YW1wbGVTZW50ZW5jZXM/OiBzdHJpbmdbXTsgLy8gb3B0aW9uYWxcbn07XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XG5cdHNhdmVTZW50ZW5jZXM6IGZhbHNlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XG5cdHByaXZhdGUgY2VkaWN0TWFwOiBNYXA8c3RyaW5nLCBDZWRpY3RFbnRyeVtdPiA9IG5ldyBNYXAoKTtcblx0cHJpdmF0ZSBhY3RpdmVIaWdobGlnaHQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYWN0aXZlV29yZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYWN0aXZlRW50cmllczogQ2VkaWN0RW50cnlbXSB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGhvdmVyQm94RWw6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgdG9vbHRpcEVsOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwdWJsaWMgcmVmcmVzaFZvY2FiU2lkZWJhcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gbm90IHVwZGF0ZSB2b2NhYiBsaXN0IG9uIGV2ZXJ5IGtleXN0cm9rZVxuXHRwcml2YXRlIHJlZnJlc2hUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gc2F2ZSBjdXJyZW50TWFya2Rvd25WaWV3IHNvIHZvY2FiIGxpc3QgZG9lc250IGRpc2FwcGVhciB3aGVuIGkgY2xpY2sgb24gdm9jYWIgc2lkZWJhclxuXHRwdWJsaWMgY3VycmVudE1hcmtkb3duVmlldzogTWFya2Rvd25WaWV3IHwgbnVsbCA9IG51bGw7XG5cblx0Ly8gRm9yIGlmIHRoZSB1c2VyIHdhbnRzIHRvIHN0b3JlIHRoZSBjdXJyZW50IHNlbnRlbmNlIGFzIGFuIGV4YW1wbGVcblx0cHJpdmF0ZSBhY3RpdmVFeGFtcGxlU2VudGVuY2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG5cblx0cHJpdmF0ZSBob3ZlckhhbmRsZXI6IChlOiBNb3VzZUV2ZW50KSA9PiB2b2lkO1x0XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFxuXHRcdC8vIExvYWQgZGljdGlvbmFyeVxuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREaWN0aW9uYXJ5RmlsZShgLm9ic2lkaWFuL3BsdWdpbnMvJHt0aGlzLm1hbmlmZXN0LmlkfS9jZWRpY3RfdHMudThgKTtcbiAgICBcdHRoaXMubG9hZENlZGljdEZyb21UZXh0KGRhdGEpO1xuXHRcdGNvbnNvbGUubG9nKFwiQ2VkaWN0IGxvYWRlZC5cIilcblxuXHRcdC8vIEhvdmVyIGJveFxuXG5cdFx0Ly8gU3R5bGVzXG5cdFx0Y29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdFx0c3R5bGUuaWQgPSBcImNlZGljdC1ob3Zlci1zdHlsZVwiO1xuXHRcdHN0eWxlLmlubmVyVGV4dCA9IGBcblx0XHQuY2VkaWN0LWhvdmVyLWJveCB7XG5cdFx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XG5cdFx0XHR6LWluZGV4OiAwICFpbXBvcnRhbnQ7XG5cdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiBoc2xhKHZhcigtLWFjY2VudC1oKSwgdmFyKC0tYWNjZW50LXMpLCB2YXIoLS1hY2NlbnQtbCksIDAuMyk7XG5cdFx0XHRwb2ludGVyLWV2ZW50czogbm9uZTtcblx0XHRcdGJvcmRlci1yYWRpdXM6IDNweDtcblx0XHRcdHRyYW5zaXRpb246IGFsbCAwLjA1cyBlYXNlO1xuXHRcdH1cblx0XHQuY2VkaWN0LWxpbmUtaG92ZXIge1xuXHRcdFx0YmFja2dyb3VuZC1jb2xvcjogaHNsYSh2YXIoLS1hY2NlbnQtaCksIHZhcigtLWFjY2VudC1zKSwgdmFyKC0tYWNjZW50LWwpLCAwLjMpO1xuXHRcdFx0dHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7XG5cdFx0fVxuXHRcdC5jbS1saW5le1xuXHRcdFx0dHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTtcblx0XHR9XG5cblx0XHQudm9jYWItZW50cnkge1xuXHRcdFx0bWFyZ2luLWJvdHRvbTogMXJlbTtcblx0XHRcdHBhZGRpbmctYm90dG9tOiAwLjVyZW07XG5cdFx0XHRib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuXHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdH1cblx0XG5cdFx0LnZvY2FiLXdvcmQge1xuXHRcdFx0Zm9udC13ZWlnaHQ6IGJvbGQ7XG5cdFx0XHRmb250LXNpemU6IDEuMWVtO1xuXHRcdH1cblx0XG5cdFx0LnZvY2FiLXBpbnlpbiB7XG5cdFx0XHRmb250LXN0eWxlOiBpdGFsaWM7XG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG5cdFx0XHRtYXJnaW4tdG9wOiAycHg7XG5cdFx0fVxuXHRcblx0XHQudm9jYWItZGVmcyB7XG5cdFx0XHRtYXJnaW4tdG9wOiA0cHg7XG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuXHRcdFx0Zm9udC1zaXplOiAwLjk1ZW07XG5cdFx0XHRsaW5lLWhlaWdodDogMS40O1xuXHRcdH1cblx0XHRgO1xuXHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG5cdFx0dGhpcy5ob3ZlckJveEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLmhvdmVyQm94RWwuY2xhc3NOYW1lID0gXCJjZWRpY3QtaG92ZXItYm94XCI7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmhvdmVyQm94RWwpO1xuXG5cdFx0Ly8gVG9vbHRpcFxuXHRcdHRoaXMudG9vbHRpcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5wYWRkaW5nID0gXCI2cHggMTBweFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmJhY2tncm91bmQgPSBcInZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KVwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmNvbG9yID0gXCJ2YXIoLS10ZXh0LW5vcm1hbClcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjZweFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmJveFNoYWRvdyA9IFwiMCA0cHggOHB4IHJnYmEoMCwwLDAsMC4xKVwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLndoaXRlU3BhY2UgPSBcInByZS1saW5lXCI7XG5cdFx0dGhpcy50b29sdGlwRWwuc3R5bGUuekluZGV4ID0gXCIxMDAwMFwiO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnRvb2x0aXBFbCk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1x0XG5cblx0XHR0aGlzLmhvdmVySGFuZGxlciA9IHRoaXMuaG92ZXJIYW5kbGVyQ2hhcnMuYmluZCh0aGlzKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuaG92ZXJIYW5kbGVyKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgXCJrZXlkb3duXCIsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSBcInNcIiAmJiB0aGlzLmFjdGl2ZVdvcmQgJiYgdGhpcy5hY3RpdmVFbnRyaWVzKSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHR0aGlzLmFkZFRvVm9jYWIodGhpcy5hY3RpdmVXb3JkLCB0aGlzLmFjdGl2ZUVudHJpZXMpO1xuXHRcdFx0fVxuXHRcdH0pOyAvL2NhcHR1cmUgcGhhc2VcdFx0XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZXhwb3J0LXZvY2FiLWZsYXNoY2FyZHNcIixcblx0XHRcdG5hbWU6IFwiRXhwb3J0IFZvY2FiIHRvIEZsYXNoY2FyZHNcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmV4cG9ydFZvY2FiVG9GbGFzaGNhcmRzKClcblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxuXHRcdFx0VklFV19UWVBFX1ZPQ0FCX1NJREVCQVIsXG5cdFx0XHQobGVhZikgPT4gbmV3IFZvY2FiU2lkZWJhclZpZXcobGVhZiwgdGhpcylcblx0XHQpO1xuXHRcdFxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImJvb2stb3BlblwiLCBcIk9wZW4gVm9jYWIgU2lkZWJhclwiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLmFjdGl2YXRlVmlldygpO1xuXHRcdH0pO1xuXHRcdGF3YWl0IHRoaXMuYWN0aXZhdGVWaWV3KCk7IC8vIFRPRE86IG1ha2Ugc3VyZSB0aGlzIGFsd2F5cyBvcGVucyBpbiB0aGUgcmlnaHQgc2lkZWJhclxuXG5cdFx0Ly8gQ2hhbmdlIHZvY2FiIHNpZGViYXIgd2hlbiBJIGNoYW5nZSBsZWFmXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsICgpID0+IHtcblx0XHRcdFx0Ly8gb25seSBjaGFuZ2UgY3Vyck1EdmlldyBpZiBuZXcgdmlldyBpcyBhbHNvIE1ELCBvdGhlcndpc2UgY3VycmVudE1hcmtkb3duVmlldyBiZWNvbWVzIG51bGwgd2hlbiBpIGNsaWNrIG9uIHNpZGViYXJcblx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdGlmICh2aWV3KSB7XG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50TWFya2Rvd25WaWV3ID0gdmlldztcblx0XHRcdFx0XHR0aGlzLnRyaWdnZXJTaWRlYmFyUmVmcmVzaCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0XG5cdFx0Ly8gQ2hhbmdlIHZvY2FiIHNpZGViYXIgd2hlbiBJIGVkaXQgbGVhZlxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1jaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5yZWZyZXNoVGltZXIpIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yZWZyZXNoVGltZXIpO1xuXHRcdFx0XHR0aGlzLnJlZnJlc2hUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0XHRpZiAodmlldykge1xuXHRcdFx0XHRcdFx0dGhpcy5jdXJyZW50TWFya2Rvd25WaWV3ID0gdmlldztcblx0XHRcdFx0XHRcdHRoaXMudHJpZ2dlclNpZGViYXJSZWZyZXNoKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAzMDApOyAvLyAzMDBtcyBkZWxheSBhZnRlciBsYXN0IGVkaXRcblx0XHRcdH0pXG5cdFx0KTtcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0aWYgKHZpZXcpIHtcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRNYXJrZG93blZpZXcgPSB2aWV3O1xuXHRcdFx0XHRcdHRoaXMudHJpZ2dlclNpZGViYXJSZWZyZXNoKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5ob3ZlckhhbmRsZXIpO1xuXHRcdGlmICh0aGlzLmFjdGl2ZUhpZ2hsaWdodCkge1xuXHRcdFx0Y29uc3QgcGFyZW50ID0gdGhpcy5hY3RpdmVIaWdobGlnaHQucGFyZW50Tm9kZTtcblx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0cGFyZW50LnJlcGxhY2VDaGlsZChcblx0XHRcdFx0XHRkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLmFjdGl2ZUhpZ2hsaWdodC5pbm5lclRleHQpLFxuXHRcdFx0XHRcdHRoaXMuYWN0aXZlSGlnaGxpZ2h0XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmFjdGl2ZUhpZ2hsaWdodCA9IG51bGw7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmhvdmVyQm94RWwpIHtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5yZW1vdmUoKTtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbCA9IG51bGw7XG5cdFx0fVxuXHRcdFxuXHRcdGlmICh0aGlzLnRvb2x0aXBFbCkge1xuXHRcdFx0dGhpcy50b29sdGlwRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyBqdXN0IHRvIGJlIHNhZmVcblx0XHRcdHRoaXMudG9vbHRpcEVsLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy50b29sdGlwRWwgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIENsZWFuIHVwIHN0eWxlc1xuXHRcdGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNlZGljdC1ob3Zlci1zdHlsZVwiKTtcblx0XHRpZiAoc3R5bGVFbCkgc3R5bGVFbC5yZW1vdmUoKTtcdFxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGxvYWREaWN0aW9uYXJ5RmlsZShmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZEJpbmFyeShmaWxlTmFtZSk7XG5cdFx0Y29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuXHRcdHJldHVybiBkZWNvZGVyLmRlY29kZShhcnJheUJ1ZmZlcik7XG5cdH1cblx0cHJpdmF0ZSBwYXJzZUNlZGljdExpbmUobGluZTogc3RyaW5nKTogQ2VkaWN0RW50cnkgfCBudWxsIHtcblx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oXFxTKylcXHMrKFxcUyspXFxzK1xcWyguKz8pXFxdXFxzK1xcLyguKylcXC8vKTtcblx0XHRpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcblx0XG5cdFx0Y29uc3QgWywgdHJhZCwgc2ltcCwgcGlueWluLCBkZWZzXSA9IG1hdGNoO1xuXHRcdHJldHVybiB7XG5cdFx0ICB0cmFkaXRpb25hbDogdHJhZCxcblx0XHQgIHNpbXBsaWZpZWQ6IHNpbXAsXG5cdFx0ICBwaW55aW4sXG5cdFx0ICBkZWZpbml0aW9uczogZGVmcy5zcGxpdCgnLycpXG5cdFx0fTtcblx0ICB9XG5cdFxuXHRwcml2YXRlIGxvYWRDZWRpY3RGcm9tVGV4dChjZWRpY3RUZXh0OiBzdHJpbmcpIHtcblx0Y29uc3QgbGluZXMgPSBjZWRpY3RUZXh0LnNwbGl0KCdcXG4nKTtcblx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoJyMnKSB8fCBsaW5lLnRyaW0oKSA9PT0gJycpIGNvbnRpbnVlO1xuXHRcdFx0Y29uc3QgZW50cnkgPSB0aGlzLnBhcnNlQ2VkaWN0TGluZShsaW5lKTtcblx0XHRcdGlmIChlbnRyeSkge1xuXHRcdFx0XHRbZW50cnkudHJhZGl0aW9uYWwsIGVudHJ5LnNpbXBsaWZpZWRdLmZvckVhY2goKGZvcm0pID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuY2VkaWN0TWFwLmhhcyhmb3JtKSkgdGhpcy5jZWRpY3RNYXAuc2V0KGZvcm0sIFtdKTtcblx0XHRcdFx0XHR0aGlzLmNlZGljdE1hcC5nZXQoZm9ybSkhLnB1c2goZW50cnkpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cHJpdmF0ZSBob3ZlckhhbmRsZXJDaGFycyA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuXHRcdGNvbnN0IGVsID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdGNvbnN0IGlzRWRpdExpbmUgPSBlbC5jbG9zZXN0KFwiLmNtLWxpbmVcIik7XG5cdFx0Y29uc3QgaXNQcmV2aWV3QmxvY2sgPSBlbC5jbG9zZXN0KFwiLm1hcmtkb3duLXByZXZpZXctdmlld1wiKT8ucXVlcnlTZWxlY3RvcihcIi5tYXJrZG93bi1wcmV2aWV3LXNpemVyXCIpO1xuXHRcdGNvbnN0IGlzUHJldmlld1RhcmdldCA9IGVsLmNsb3Nlc3QoXCIuZWwtcCwgLmVsLWgxLCAuZWwtaDIsIC5lbC1oMywgLmVsLWxpLCAuZWwtYmxvY2txdW90ZSwgLmVsLXRhYmxlXCIpO1xuXG5cdFx0aWYgKCFpc0VkaXRMaW5lICYmICEoaXNQcmV2aWV3QmxvY2sgJiYgaXNQcmV2aWV3VGFyZ2V0KSkge1xuXHRcdFx0dGhpcy5oaWRlSG92ZXJCb3goKTtcblx0XHRcdHRoaXMuaGlkZVRvb2x0aXAoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XHRcblx0XHRjb25zdCByYW5nZSA9IGRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG5cdFx0aWYgKCFyYW5nZSB8fCByYW5nZS5zdGFydENvbnRhaW5lci5ub2RlVHlwZSAhPT0gTm9kZS5URVhUX05PREUpIHtcblx0XHRcdHRoaXMuaGlkZUhvdmVyQm94KCk7XG5cdFx0XHR0aGlzLmhpZGVUb29sdGlwKCk7XG5cdFx0XHR0aGlzLmFjdGl2ZUhpZ2hsaWdodCA9IG51bGw7XG5cdFx0XHR0aGlzLmFjdGl2ZVdvcmQgPSBudWxsO1xuXHRcdFx0dGhpcy5hY3RpdmVFbnRyaWVzID0gbnVsbDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IHRleHROb2RlID0gcmFuZ2Uuc3RhcnRDb250YWluZXIgYXMgVGV4dDtcblx0XHRjb25zdCBvZmZzZXQgPSByYW5nZS5zdGFydE9mZnNldDtcblx0XHRjb25zdCB0ZXh0ID0gdGV4dE5vZGUudGV4dENvbnRlbnQgPz8gXCJcIjtcblx0XG5cdFx0Ly8gb3V0LW9mLWJvdW5kc1xuXHRcdGlmIChvZmZzZXQgPCAwIHx8IG9mZnNldCA+PSB0ZXh0Lmxlbmd0aCkge1xuXHRcdFx0dGhpcy5oaWRlSG92ZXJCb3goKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBPbmx5IHByb2NlZWQgaWYgdGhlIGhvdmVyZWQgY2hhcmFjdGVyIGlzIENoaW5lc2Vcblx0XHRjb25zdCBjaGluZXNlQ2hhciA9IC9bXFx1NGUwMC1cXHU5ZmZmXS87XG5cdFx0aWYgKCFjaGluZXNlQ2hhci50ZXN0KHRleHRbb2Zmc2V0XSkpIHtcblx0XHRcdHRoaXMuaGlkZUhvdmVyQm94KCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHQvLyBPbmx5IHRyeSB0byBtYXRjaCBhIHdvcmQgZnJvbSB0aGUgaG92ZXJlZCBjaGFyIGZvcndhcmRcblx0XHRjb25zdCBtYXRjaCA9IHRoaXMuZ2V0Rm9yd2FyZE1hdGNoZWRXb3JkKHRleHQsIG9mZnNldCk7XG5cdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0dGhpcy5oaWRlSG92ZXJCb3goKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBzdGFydCA9IG9mZnNldDtcblx0XHRjb25zdCBlbmQgPSBNYXRoLm1pbihtYXRjaC5lbmQsIHRleHROb2RlLmxlbmd0aCk7IC8vIGNsYW1wcyBzYWZlbHlcblxuXHRcdC8vIEhpZ2hsaWdodCBtYXRjaGVkIHdvcmRcblx0XHRjb25zdCByYW5nZUZvcldvcmQgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuXHRcdHJhbmdlRm9yV29yZC5zZXRTdGFydCh0ZXh0Tm9kZSwgc3RhcnQpO1xuXHRcdHJhbmdlRm9yV29yZC5zZXRFbmQodGV4dE5vZGUsIGVuZCk7XG5cdFxuXHRcdGNvbnN0IHJlY3QgPSByYW5nZUZvcldvcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHRcdGlmICh0aGlzLmhvdmVyQm94RWwpIHtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0ICsgd2luZG93LnNjcm9sbFh9cHhgO1xuXHRcdFx0dGhpcy5ob3ZlckJveEVsLnN0eWxlLnRvcCA9IGAke3JlY3QudG9wICsgd2luZG93LnNjcm9sbFl9cHhgO1xuXHRcdFx0dGhpcy5ob3ZlckJveEVsLnN0eWxlLndpZHRoID0gYCR7cmVjdC53aWR0aH1weGA7XG5cdFx0XHR0aGlzLmhvdmVyQm94RWwuc3R5bGUuaGVpZ2h0ID0gYCR7cmVjdC5oZWlnaHR9cHhgO1xuXHRcdFx0dGhpcy5ob3ZlckJveEVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcykge1xuXHRcdFx0Y29uc3Qgc2VudGVuY2UgPSB0aGlzLmV4dHJhY3RTZW50ZW5jZUZyb21UZXh0QXRPZmZzZXQodGV4dCwgb2Zmc2V0LCBtYXRjaC53b3JkKTtcblx0XHRcdHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlID0gc2VudGVuY2U7XG5cdFx0fVxuXG5cdFx0Ly8gVG9vbHRpcFxuXHRcdHRoaXMuc2hvd1Rvb2x0aXBGb3JXb3JkKG1hdGNoLndvcmQsIHJlY3QubGVmdCArIHdpbmRvdy5zY3JvbGxYLCByZWN0LnRvcCArIHdpbmRvdy5zY3JvbGxZKTtcblx0fTtcblx0XG5cdHByaXZhdGUgaGlkZUhvdmVyQm94KCkge1xuXHRcdGlmICh0aGlzLmhvdmVyQm94RWwpIHtcblx0XHRcdHRoaXMuaG92ZXJCb3hFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fVxuXHR9XG5cdFxuXHRwcml2YXRlIGdldEZvcndhcmRNYXRjaGVkV29yZCh0ZXh0OiBzdHJpbmcsIG9mZnNldDogbnVtYmVyKTogeyB3b3JkOiBzdHJpbmc7IGVuZDogbnVtYmVyIH0gfCBudWxsIHtcblx0XHRjb25zdCBtYXhXb3JkTGVuID0gNTtcblx0XHRjb25zdCBzdWJzdHIgPSB0ZXh0LnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbWF4V29yZExlbik7XG5cdFxuXHRcdC8vIFRyeSBsb25nZXN0IHRvIHNob3J0ZXN0XG5cdFx0Zm9yIChsZXQgbGVuID0gbWF4V29yZExlbjsgbGVuID4gMDsgbGVuLS0pIHtcblx0XHRcdGNvbnN0IGNhbmRpZGF0ZSA9IHN1YnN0ci5zbGljZSgwLCBsZW4pO1xuXHRcdFx0aWYgKHRoaXMuY2VkaWN0TWFwLmhhcyhjYW5kaWRhdGUpKSB7XG5cdFx0XHRcdHJldHVybiB7IHdvcmQ6IGNhbmRpZGF0ZSwgZW5kOiBvZmZzZXQgKyBsZW4gfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fTtcdFxuXHQgIFxuXHRcblx0cHJpdmF0ZSBzaG93VG9vbHRpcEZvcldvcmQod29yZDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuXHRcdGlmICghdGhpcy50b29sdGlwRWwpIHJldHVybjtcblx0XG5cdFx0Y29uc3QgZW50cmllcyA9IHRoaXMuY2VkaWN0TWFwLmdldCh3b3JkKTtcblx0XHRpZiAoIWVudHJpZXMgfHwgZW50cmllcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgZHVwbGljYXRlIGVudHJpZXMgLSBkbyBJIG5lZWQgdGhpcz8gXG5cdFx0Y29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRcdGNvbnN0IHVuaXF1ZUVudHJpZXMgPSBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XG5cdFx0XHRjb25zdCBpZCA9IGAke2VudHJ5LnRyYWRpdGlvbmFsfS0ke2VudHJ5LnNpbXBsaWZpZWR9LSR7ZW50cnkucGlueWlufS0ke2VudHJ5LmRlZmluaXRpb25zLmpvaW4oXCIsXCIpfWA7XG5cdFx0XHRpZiAoc2Vlbi5oYXMoaWQpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRzZWVuLmFkZChpZCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9KTtcblxuXHRcdHRoaXMuYWN0aXZlV29yZCA9IHdvcmQ7XG5cdFx0dGhpcy5hY3RpdmVFbnRyaWVzID0gdW5pcXVlRW50cmllcztcblxuXHRcdGNvbnN0IHRleHQgPSB1bmlxdWVFbnRyaWVzLm1hcChlbnRyeSA9PiBcblx0XHRcdGAke2VudHJ5LnNpbXBsaWZpZWR9ICR7ZW50cnkuc2ltcGxpZmllZCAhPT0gZW50cnkudHJhZGl0aW9uYWw/IGVudHJ5LnRyYWRpdGlvbmFsOiBcIlwifSAoJHt0aGlzLnByb2Nlc3NQaW55aW4oZW50cnkucGlueWluKX0pXFxuJHtlbnRyeS5kZWZpbml0aW9ucy5qb2luKCc7ICcpfWBcblx0XHQpLmpvaW4oJ1xcblxcbicpO1xuXG5cdFx0dGhpcy50b29sdGlwRWwuaW5uZXJUZXh0ID0gdGV4dDtcblx0XHRpZiAoIXRoaXMuaG92ZXJCb3hFbCkgcmV0dXJuOyAvLyBGZWVsIGxpa2UgSSBkb250IG5lZWQgdGhpcz8gXG5cdFx0Y29uc3QgaG92ZXJSZWN0ID0gdGhpcy5ob3ZlckJveEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmxlZnQgPSBgJHtob3ZlclJlY3QubGVmdCArIHdpbmRvdy5zY3JvbGxYfXB4YDtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS50b3AgPSBgJHtob3ZlclJlY3QuYm90dG9tICsgd2luZG93LnNjcm9sbFkgKyA0fXB4YDsgLy8gNHB4IHBhZGRpbmdcblxuXHRcdHRoaXMudG9vbHRpcEVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdH1cblxuXHRwdWJsaWMgcHJvY2Vzc1BpbnlpbihwaW55aW46IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgdG9uZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xuXHRcdFx0XCJhXCI6IFtcIlx1MDEwMVwiLCBcIlx1MDBFMVwiLCBcIlx1MDFDRVwiLCBcIlx1MDBFMFwiLCBcImFcIl0sXG5cdFx0XHRcImVcIjogW1wiXHUwMTEzXCIsIFwiXHUwMEU5XCIsIFwiXHUwMTFCXCIsIFwiXHUwMEU4XCIsIFwiZVwiXSxcblx0XHRcdFwiaVwiOiBbXCJcdTAxMkJcIiwgXCJcdTAwRURcIiwgXCJcdTAxRDBcIiwgXCJcdTAwRUNcIiwgXCJpXCJdLFxuXHRcdFx0XCJvXCI6IFtcIlx1MDE0RFwiLCBcIlx1MDBGM1wiLCBcIlx1MDFEMlwiLCBcIlx1MDBGMlwiLCBcIm9cIl0sXG5cdFx0XHRcInVcIjogW1wiXHUwMTZCXCIsIFwiXHUwMEZBXCIsIFwiXHUwMUQ0XCIsIFwiXHUwMEY5XCIsIFwidVwiXSxcblx0XHRcdFwiXHUwMEZDXCI6IFtcIlx1MDFENlwiLCBcIlx1MDFEOFwiLCBcIlx1MDFEQVwiLCBcIlx1MDFEQ1wiLCBcIlx1MDBGQ1wiXVxuXHRcdH07XG5cdFxuXHRcdGNvbnN0IHZvd2VscyA9IFtcImFcIiwgXCJvXCIsIFwiZVwiLCBcImlcIiwgXCJ1XCIsIFwiXHUwMEZDXCJdO1xuXHRcblx0XHQvLyBQcm9jZXNzIGVhY2ggc3lsbGFibGUgKHNwbGl0IG9uIHNwYWNlKVxuXHRcdHJldHVybiBwaW55aW4uc3BsaXQoXCIgXCIpLm1hcChzeWxsYWJsZSA9PiB7XG5cdFx0XHRjb25zdCB0b25lID0gcGFyc2VJbnQoc3lsbGFibGVbc3lsbGFibGUubGVuZ3RoIC0gMV0pO1xuXHRcdFx0aWYgKHRvbmUgPCAxIHx8IHRvbmUgPiA1KSByZXR1cm4gc3lsbGFibGU7IC8vIHNraXAgaWYgbm8gdmFsaWQgdG9uZSBudW1iZXJcblx0XG5cdFx0XHRsZXQgY29yZSA9IHN5bGxhYmxlLnNsaWNlKDAsIC0xKTsgLy8gcmVtb3ZlIHRvbmUgbnVtYmVyXG5cdFx0XHRsZXQgdm93ZWxUb1JlcGxhY2UgPSBcIlwiO1xuXHRcblx0XHRcdC8vIGZpbmQgY29ycmVjdCB2b3dlbCB0byByZXBsYWNlIChwcmlvcml0eSBvcmRlcilcblx0XHRcdGZvciAoY29uc3QgdiBvZiB2b3dlbHMpIHtcblx0XHRcdFx0aWYgKGNvcmUuaW5jbHVkZXModikpIHtcblx0XHRcdFx0XHR2b3dlbFRvUmVwbGFjZSA9IHY7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIXZvd2VsVG9SZXBsYWNlKSByZXR1cm4gc3lsbGFibGU7IC8vIGZhbGxiYWNrOiBubyB2b3dlbCB0byBtb2RpZnlcblx0XG5cdFx0XHRjb25zdCBhY2NlbnRlZCA9IHRvbmVNYXBbdm93ZWxUb1JlcGxhY2VdW3RvbmUgLSAxXTtcblx0XHRcdGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCh2b3dlbFRvUmVwbGFjZSArIFwiKD8hLipcIiArIHZvd2VsVG9SZXBsYWNlICsgXCIpXCIsIFwiZ1wiKTsgLy8gcmVwbGFjZSBMQVNUIG9jY3VycmVuY2Vcblx0XG5cdFx0XHRjb3JlID0gY29yZS5yZXBsYWNlKHJlZ2V4LCBhY2NlbnRlZCk7XG5cdFx0XHRyZXR1cm4gY29yZTtcblx0XHR9KS5qb2luKFwiIFwiKTtcblx0fVxuXHRcblx0cHJpdmF0ZSBoaWRlVG9vbHRpcCgpIHtcblx0XHR0aGlzLnRvb2x0aXBFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdH1cblx0cHJpdmF0ZSBhc3luYyBhZGRUb1ZvY2FiKHdvcmQ6IHN0cmluZywgZW50cmllczogQ2VkaWN0RW50cnlbXSkge1xuXHRcdGNvbnN0IHBhdGggPSBgLm9ic2lkaWFuL3BsdWdpbnMvJHt0aGlzLm1hbmlmZXN0LmlkfS92b2NhYi5qc29uYDtcblx0XG5cdFx0bGV0IGxpc3Q6IFZvY2FiRW50cnlbXSA9IFtdO1xuXHRcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChwYXRoKTtcblx0XHRcdGxpc3QgPSBKU09OLnBhcnNlKGZpbGUpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0bGlzdCA9IFtdO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgbmV3U2VudGVuY2UgPSAodGhpcy5hY3RpdmVFeGFtcGxlU2VudGVuY2U/LnRyaW0oKSA9PT0gd29yZCA/IFwiXCIgOiB0aGlzLmFjdGl2ZUV4YW1wbGVTZW50ZW5jZT8udHJpbSgpKSB8fCBcIlwiO1xuXHRcdC8vIEknbSBzdXBwb3NlZCB0byBoYXZlIGEgY2hlY2sgZWFybGllciB0aGF0IHR1cm5zIFwid29yZFwiIGludG8gXCJcIiBidXQgZm9yIHNvbWUgcmVhc29uIG5vdCB3b3JraW5nIHNvIEkgaGF2ZSBeXG5cdFx0Ly8gRG8gaSBuZWVkIHRoZSBcIlwiIGZhbGxiYWNrP1xuXHRcdGNvbnN0IGV4aXN0aW5nRW50cnkgPSBsaXN0LmZpbmQoZSA9PiBlLnNpbXBsaWZpZWQgPT09IHdvcmQpO1xuXHRcdGlmIChleGlzdGluZ0VudHJ5KSB7XG5cdFx0XHQvLyBJZiBzZW50ZW5jZSBzYXZpbmcgaXMgb24gYW5kIHdlIGhhdmUgYSBzZW50ZW5jZS4uLlxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcyAmJiBuZXdTZW50ZW5jZSkge1xuXHRcdFx0XHRpZiAoIWV4aXN0aW5nRW50cnkuZXhhbXBsZVNlbnRlbmNlcykgZXhpc3RpbmdFbnRyeS5leGFtcGxlU2VudGVuY2VzID0gW107XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBdm9pZCBkdXBsaWNhdGVzXG5cdFx0XHRcdGlmICghZXhpc3RpbmdFbnRyeS5leGFtcGxlU2VudGVuY2VzLmluY2x1ZGVzKG5ld1NlbnRlbmNlKSkge1xuXHRcdFx0XHRcdGV4aXN0aW5nRW50cnkuZXhhbXBsZVNlbnRlbmNlcy5wdXNoKG5ld1NlbnRlbmNlKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHBhdGgsIEpTT04uc3RyaW5naWZ5KGxpc3QsIG51bGwsIDIpKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBBZGRlZCBuZXcgc2VudGVuY2UgdG8gJHt3b3JkfS5gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGAke3dvcmR9IGlzIGFscmVhZHkgaW4geW91ciB2b2NhYiBsaXN0LmApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXcgTm90aWNlKGAke3dvcmR9IGlzIGFscmVhZHkgaW4geW91ciB2b2NhYiBsaXN0LmApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlID0gbnVsbDtcblx0XHRcdHRoaXMucmVmcmVzaFZvY2FiU2lkZWJhcj8uKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWVyZ2UgZGVmaW5pdGlvbnMgYW5kIGNob29zZSBhIHJlcCBzaW1wbGlmaWVkL3RyYWRpdGlvbmFsXG5cdFx0Y29uc3QgYWxsRGVmcyA9IGVudHJpZXMuZmxhdE1hcChlID0+IGUuZGVmaW5pdGlvbnMpO1xuXHRcdGNvbnN0IHVuaXF1ZURlZnMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWxsRGVmcykpOyAvLyByZW1vdmUgZHVwbGljYXRlc1xuXHRcblx0XHRjb25zdCByZXAgPSBlbnRyaWVzWzBdOyAvLyByZXByZXNlbnRhdGl2ZSBlbnRyeSAodXN1YWxseSBmaW5lIGJ1dCB0aGUgcGlueWluIGNhbiBjaGFuZ2Ugc28gaSBzaG91bGQgaGFuZGxlIHRoYXQgaW4gdGhlIGZ1dHVyZSlcblx0XG5cdFx0Y29uc3QgbmV3RW50cnk6IFZvY2FiRW50cnkgPSB7XG5cdFx0XHRzaW1wbGlmaWVkOiByZXAuc2ltcGxpZmllZCxcblx0XHRcdHRyYWRpdGlvbmFsOiByZXAudHJhZGl0aW9uYWwsXG5cdFx0XHRwaW55aW46IHJlcC5waW55aW4sIFxuXHRcdFx0ZGVmaW5pdGlvbnM6IHVuaXF1ZURlZnMsXG5cdFx0XHRhZGRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHQuLi4odGhpcy5zZXR0aW5ncy5zYXZlU2VudGVuY2VzICYmIHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlXG5cdFx0XHRcdD8geyBleGFtcGxlU2VudGVuY2VzOiBbdGhpcy5hY3RpdmVFeGFtcGxlU2VudGVuY2VdIH1cblx0XHRcdFx0OiB7fSlcblx0XHR9O1xuXHRcblx0XHRsaXN0LnB1c2gobmV3RW50cnkpO1xuXHRcblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHBhdGgsIEpTT04uc3RyaW5naWZ5KGxpc3QsIG51bGwsIDIpKTtcblx0XHRuZXcgTm90aWNlKGBBZGRlZCAke3dvcmR9IHRvIHZvY2FiIGxpc3QhYCk7XG5cblx0XHR0aGlzLnJlZnJlc2hWb2NhYlNpZGViYXI/LigpO1xuXHRcdHRoaXMuYWN0aXZlRXhhbXBsZVNlbnRlbmNlID0gbnVsbDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZXhwb3J0Vm9jYWJUb0ZsYXNoY2FyZHMoKSB7XG5cdFx0Y29uc3QgcGF0aCA9IGAub2JzaWRpYW4vcGx1Z2lucy8ke3RoaXMubWFuaWZlc3QuaWR9L3ZvY2FiLmpzb25gO1xuXHRcdGNvbnN0IG91dHB1dFBhdGggPSBgT2JzaWRpYW4tWmhvbmd3ZW4tUmVhZGVyLVZvY2FiLURlY2subWRgOyBcblx0XG5cdFx0bGV0IGxpc3Q6IHtcblx0XHRcdHNpbXBsaWZpZWQ6IHN0cmluZztcblx0XHRcdHRyYWRpdGlvbmFsOiBzdHJpbmc7XG5cdFx0XHRkZWZpbml0aW9uczogc3RyaW5nW107XG5cdFx0XHRhZGRlZEF0OiBzdHJpbmc7XG5cdFx0fVtdID0gW107XG5cdFxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHBhdGgpO1xuXHRcdFx0bGlzdCA9IEpTT04ucGFyc2UoZmlsZSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIk5vIHZvY2FiIGxpc3QgZm91bmQuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgbGluZXM6IHN0cmluZ1tdID0gbGlzdC5tYXAoZW50cnkgPT4ge1xuXHRcdFx0Y29uc3QgZGVmcyA9IGVudHJ5LmRlZmluaXRpb25zLmpvaW4oXCI7IFwiKTtcblx0XHRcdHJldHVybiBgJHtlbnRyeS5zaW1wbGlmaWVkfTo6JHtkZWZzfWA7XG5cdFx0fSk7XG5cdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBgI0NoaW5lc2VWb2NhYlxcblxcbiR7bGluZXMuam9pbihcIlxcblxcblwiKX1gO1xuXHRcblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKG91dHB1dFBhdGgsIGNvbnRlbnQpO1xuXHRcblx0XHRuZXcgTm90aWNlKFwiRXhwb3J0ZWQgdm9jYWIgdG8gZmxhc2hjYXJkIGRlY2shXCIpO1xuXHR9XHRcblxuXHRwcml2YXRlIGV4dHJhY3RTZW50ZW5jZUZyb21UZXh0QXRPZmZzZXQodGV4dDogc3RyaW5nLCBvZmZzZXQ6IG51bWJlciwgd29yZDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcykgcmV0dXJuIFwiXCI7XG5cdFx0Ly8gRmluZCBwdW5jdHVhdGlvbiBib3VuZGFyaWVzIGFyb3VuZCB0aGUgd29yZFxuXHRcdGNvbnN0IHB1bmN0dWF0aW9uID0gL1tcdTMwMDJcdUZGMDFcdUZGMUYhP10vO1xuXHRcblx0XHRsZXQgc3RhcnQgPSBvZmZzZXQ7XG5cdFx0d2hpbGUgKHN0YXJ0ID4gMCAmJiAhcHVuY3R1YXRpb24udGVzdCh0ZXh0W3N0YXJ0IC0gMV0pKSB7XG5cdFx0XHRzdGFydC0tO1xuXHRcdH1cblx0XG5cdFx0bGV0IGVuZCA9IG9mZnNldDtcblx0XHR3aGlsZSAoZW5kIDwgdGV4dC5sZW5ndGggJiYgIXB1bmN0dWF0aW9uLnRlc3QodGV4dFtlbmRdKSkge1xuXHRcdFx0ZW5kKys7XG5cdFx0fVxuXHRcdGlmIChlbmQgPCB0ZXh0Lmxlbmd0aCkgZW5kKys7IC8vIGluY2x1ZGUgcHVuY3R1YXRpb25cblx0XG5cdFx0Y29uc3Qgc2VudGVuY2UgPSB0ZXh0LnNsaWNlKHN0YXJ0LCBlbmQpLnRyaW0oKTtcblx0XG5cdFx0Ly8gZmFsbGJhY2sgdG8gZW50aXJlIGxpbmUgaWYgc2VudGVuY2UgaXMgZW1wdHkgb3IgZG9lc25cdTIwMTl0IGNvbnRhaW4gdGhlIHdvcmRcblx0XHRpZiAoIXNlbnRlbmNlIHx8ICFzZW50ZW5jZS5pbmNsdWRlcyh3b3JkKSkge1xuXHRcdFx0aWYgKGxpbmUudHJpbSgpID09PSB3b3JkKSByZXR1cm4gXCJcIjsgLy8gZG9uJ3Qgc2F2ZSBsb25lbHkgd29yZCBsaW5lc1xuXHRcdFx0Y29uc3QgbGluZSA9IHRleHQuc3BsaXQoJ1xcbicpLmZpbmQobCA9PiBsLmluY2x1ZGVzKHdvcmQpKSA/PyB0ZXh0O1xuXHRcdFx0cmV0dXJuIGxpbmUudHJpbSgpO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIHNlbnRlbmNlO1xuXHR9XHRcblxuXHRhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG5cdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfVk9DQUJfU0lERUJBUik7XG5cdFx0aWYgKGxlYXZlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpLnNldFZpZXdTdGF0ZSh7XG5cdFx0XHRcdHR5cGU6IFZJRVdfVFlQRV9WT0NBQl9TSURFQkFSLFxuXHRcdFx0XHRhY3RpdmU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZPQ0FCX1NJREVCQVIpWzBdXG5cdFx0KTtcblx0fVxuXG5cdC8vIG5lZWRzIHRvIGJlIGFjY2Vzc2VkIGJ5IFZvY2FiU2lkZWJhclZpZXdcblx0cHVibGljIGFzeW5jIGxvYWRWb2NhYkxpc3QoKTogUHJvbWlzZTxWb2NhYkVudHJ5RmxhdFtdPiB7XG5cdFx0Y29uc3QgcGF0aCA9IGAub2JzaWRpYW4vcGx1Z2lucy8ke3RoaXMubWFuaWZlc3QuaWR9L3ZvY2FiLmpzb25gO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHBhdGgpO1xuXHRcdFx0cmV0dXJuIEpTT04ucGFyc2UoZmlsZSk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXHR9XG5cblx0Ly8gRG8gdGhpcyBzbyBzaWRlYmFyIGRvZXNudCBnZXQgZG91YmxlIHJlbmRlcmVkIHdoZW4gSSBzd2l0Y2ggbGVhdmVzXG5cdHB1YmxpYyB0cmlnZ2VyU2lkZWJhclJlZnJlc2goKSB7XG5cdFx0aWYgKHRoaXMucmVmcmVzaFRpbWVyKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmVmcmVzaFRpbWVyKTtcblxuXHRcdHRoaXMucmVmcmVzaFRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGhpcy5yZWZyZXNoVm9jYWJTaWRlYmFyPy4oKTtcblx0XHR9LCAxMDApO1xuXHR9XG5cdFxuXHRwdWJsaWMgc2Nyb2xsVG9Xb3JkSW5BY3RpdmVGaWxlKHdvcmQ6IHN0cmluZykge1xuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmN1cnJlbnRNYXJrZG93blZpZXc7XG5cdFx0Y29uc3QgbW9kZSA9IHZpZXcuZ2V0TW9kZSgpO1xuXG5cdFx0aWYgKCF2aWV3KSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJObyBhY3RpdmUgTWFya2Rvd24gdmlld1wiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdGxldCBzY3JvbGxlcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuXG5cdFx0aWYgKG1vZGUgPT09IFwic291cmNlXCIpIHtcblx0XHRcdHNjcm9sbGVyID0gdmlldy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLmNtLXNjcm9sbGVyXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzY3JvbGxlciA9IHZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5tYXJrZG93bi1wcmV2aWV3LXNpemVyXCIpO1xuXHRcdH1cblxuXHRcdGlmICghc2Nyb2xsZXIpIHJldHVybjtcblx0XG5cdFx0bGV0IGxpbmVzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50Pjtcblx0XHRpZiAobW9kZSA9PT0gXCJzb3VyY2VcIikge1xuXHRcdFx0bGluZXMgPSBzY3JvbGxlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmNtLWxpbmVcIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxpbmVzID0gc2Nyb2xsZXIucXVlcnlTZWxlY3RvckFsbChcblx0XHRcdFx0XCIuZWwtcCwgLmVsLWgxLCAuZWwtaDIsIC5lbC1oMywgLmVsLWxpLCAuZWwtYmxvY2txdW90ZSwgLmVsLXRhYmxlXCJcblx0XHRcdCk7XG5cdFx0fVxuXHRcdFxuXHRcdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdFx0aWYgKGxpbmUudGV4dENvbnRlbnQ/LmluY2x1ZGVzKHdvcmQpKSB7XG5cdFx0XHRcdChsaW5lIGFzIEhUTUxFbGVtZW50KS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcInNtb290aFwiLCBibG9jazogXCJjZW50ZXJcIiB9KTtcblx0XG5cdFx0XHRcdC8vIEhpZ2hsaWdodCB0aGUgbGluZSBicmllZmx5LCBkZWxheWVkIGJ5IDEwMCB0byBhbGxvdyBET00gdG8gc2Nyb2xsIGZpcnN0XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGxpbmUuY2xhc3NMaXN0LmFkZChcImNlZGljdC1saW5lLWhvdmVyXCIpO1xuXHRcdFx0XHRcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdGxpbmUuY2xhc3NMaXN0LnJlbW92ZShcImNlZGljdC1saW5lLWhvdmVyXCIpO1xuXHRcdFx0XHRcdH0sIDUwMDApO1xuXHRcdFx0XHR9LCAxMDApO1xuXHRcblx0XHRcdFx0Ly8gUmVzdG9yZSBmb2N1c1xuXHRcdFx0XHQvLyBzZXRUaW1lb3V0KCgpID0+IHZpZXcuZWRpdG9yPy5mb2N1cygpLCAxMDApO1xuXHRcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmNsYXNzIFZvY2FiU2lkZWJhclZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG5cdHBsdWdpbjogTXlQbHVnaW47XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNeVBsdWdpbikge1xuXHRcdHN1cGVyKGxlYWYpO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0Z2V0Vmlld1R5cGUoKSB7XG5cdFx0cmV0dXJuIFZJRVdfVFlQRV9WT0NBQl9TSURFQkFSO1xuXHR9XG5cblx0Z2V0RGlzcGxheVRleHQoKSB7XG5cdFx0cmV0dXJuIFwiVm9jYWJ1bGFyeVwiO1xuXHR9XG5cblx0Z2V0SWNvbigpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcImJvb2stb3BlblwiOyBcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHQvLyBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xuXHRcdC8vIGNvbnN0IGNvbnRlbnQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi52aWV3LWNvbnRlbnRcIikgPz8gY29udGFpbmVyLmNoaWxkcmVuWzFdO1xuXHRcdC8vIGNvbnRlbnQuZW1wdHkoKTtcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xuXHRcdGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLnZvY2FiLWVudHJ5XCIpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xuXG5cdFxuXHRcdC8vIFJlZ2lzdGVyIHRoZSByZWZyZXNoIGNhbGxiYWNrXG5cdFx0dGhpcy5wbHVnaW4ucmVmcmVzaFZvY2FiU2lkZWJhciA9ICgpID0+IHRoaXMucmVuZGVyU2lkZWJhcigpO1xuXHRcblx0XHRhd2FpdCB0aGlzLndhaXRGb3JWaWV3KCk7XG5cdFx0YXdhaXQgdGhpcy5yZW5kZXJTaWRlYmFyKCk7XHRcblx0fVxuXHRhc3luYyBvbkNsb3NlKCkge1xuXHRcdHRoaXMucGx1Z2luLnJlZnJlc2hWb2NhYlNpZGViYXIgPSBudWxsO1xuXHR9XG5cdGFzeW5jIHdhaXRGb3JWaWV3KCkge1xuXHRcdGxldCByZXRyaWVzID0gMTA7XG5cdFx0d2hpbGUgKCF0aGlzLnBsdWdpbi5jdXJyZW50TWFya2Rvd25WaWV3ICYmIHJldHJpZXMtLSA+IDApIHtcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcblx0XHR9XG5cdH1cblx0XG5cdGFzeW5jIHJlbmRlclNpZGViYXIoKSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblx0XG5cdFx0Y29uc3Qgdm9jYWJMaXN0ID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZFZvY2FiTGlzdCgpO1xuXG5cdFx0Y29uc3QgdmlldyA9IHRoaXMucGx1Z2luLmN1cnJlbnRNYXJrZG93blZpZXc7XG5cdFx0Y29uc3QgY3VycmVudEZpbGVUZXh0ID0gdmlldz8uZWRpdG9yXG5cdFx0XHQ/IHZpZXcuZWRpdG9yLmdldFZhbHVlKClcblx0XHRcdDogdmlldz8uY29udGVudEVsLnRleHRDb250ZW50ID8/IFwiXCI7XG5cblx0XHRjb25zdCBtYXRjaGluZ1ZvY2FiID0gdm9jYWJMaXN0LmZpbHRlcihlbnRyeSA9PlxuXHRcdFx0Y3VycmVudEZpbGVUZXh0LmluY2x1ZGVzKGVudHJ5LnNpbXBsaWZpZWQpXG5cdFx0KTtcblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbChcImgzXCIsIHtcblx0XHRcdHRleHQ6IFwiVm9jYWIgaW4gdGhpcyBub3RlXCIsXG5cdFx0XHRjbHM6IFwidm9jYWItaGVhZGluZ1wiXG5cdFx0fSk7XG5cdFx0Ly8gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHtcblx0XHQvLyBcdHRleHQ6IFwiVm9jYWIgaW4gdGhpcyBub3RlXCIsXG5cdFx0Ly8gXHRjbHM6IFwidm9jYWItaGVhZGluZ1wiXG5cdFx0Ly8gfSk7XG5cblx0XHRpZiAoIW1hdGNoaW5nVm9jYWIubGVuZ3RoKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyB2b2NhYiB5ZXQuXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHRmb3IgKGNvbnN0IGVudHJ5IG9mIG1hdGNoaW5nVm9jYWIpIHtcblx0XHRcdGNvbnN0IHdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidm9jYWItZW50cnlcIiB9KTtcblx0XG5cdFx0XHQvLyBUaXRsZTogc2ltcGxpZmllZCArIHRyYWRpdGlvbmFsXG5cdFx0XHR3cmFwcGVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0dGV4dDogYCR7ZW50cnkuc2ltcGxpZmllZH0gJHtlbnRyeS5zaW1wbGlmaWVkICE9PSBlbnRyeS50cmFkaXRpb25hbCA/IFwiKFwiICsgZW50cnkudHJhZGl0aW9uYWwgKyBcIilcIjogXCJcIn1gLFxuXHRcdFx0XHRjbHM6ICd2b2NhYi13b3JkJ1xuXHRcdFx0fSk7XG5cdFxuXHRcdFx0Ly8gUGlueWluXG5cdFx0XHR3cmFwcGVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0dGV4dDogdGhpcy5wbHVnaW4ucHJvY2Vzc1Bpbnlpbj8uKGVudHJ5LnBpbnlpbiA/PyBcIlwiKSxcblx0XHRcdFx0Y2xzOiAndm9jYWItcGlueWluJ1xuXHRcdFx0fSk7XG5cdFxuXHRcdFx0Ly8gRGVmaW5pdGlvbnNcblx0XHRcdHdyYXBwZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHR0ZXh0OiBlbnRyeS5kZWZpbml0aW9ucy5qb2luKFwiO1xcbiBcIiksXG5cdFx0XHRcdGNsczogJ3ZvY2FiLWRlZnMnXG5cdFx0XHR9KTtcblx0XG5cdFx0XHQvLyBEaXZpZGVyXG5cdFx0XHQvLyB3cmFwcGVyLmNyZWF0ZUVsKFwiaHJcIik7XG5cblx0XHRcdC8vIE1ha2Ugd3JhcHBlciBjbGlja2FibGVcblx0XHRcdHdyYXBwZXIuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG5cdFx0XHR3cmFwcGVyLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNjcm9sbFRvV29yZEluQWN0aXZlRmlsZShlbnRyeS5zaW1wbGlmaWVkKTtcblx0XHRcdH07XG5cdFx0fVxuXHR9XHRcbn1cblxuXG5jbGFzcyBTYW1wbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0Y29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRzdXBlcihhcHApO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuc2V0VGV4dCgnV29haCEnKTtcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbmNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBNeVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlNhdmUgZXhhbXBsZSBzZW50ZW5jZXNcIilcblx0XHRcdC5zZXREZXNjKFwiV2hlbiBzYXZpbmcgYSB2b2NhYiB3b3JkLCBhbHNvIHN0b3JlIHRoZSBzZW50ZW5jZSBpdCBhcHBlYXJzIGluLlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zYXZlU2VudGVuY2VzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2F2ZVNlbnRlbmNlcyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdH0pKTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFzRztBQUV0RyxJQUFNLDBCQUEwQjtBQXlCaEMsSUFBTSxtQkFBcUM7QUFBQSxF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QkFBZ0IsVUFBVTtBQUFBLE1BQU8sV0FDdEMsZ0JBQWdCLFNBQVMsTUFBTSxVQUFVO0FBQUEsSUFDMUM7QUFFQSxjQUFVLFNBQVMsTUFBTTtBQUFBLE1BQ3hCLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxJQUNOLENBQUM7QUFNRCxRQUFJLENBQUMsY0FBYyxRQUFRO0FBQzFCLGdCQUFVLFNBQVMsS0FBSyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDakQ7QUFBQSxJQUNEO0FBRUEsZUFBVyxTQUFTLGVBQWU7QUFDbEMsWUFBTSxVQUFVLFVBQVUsU0FBUyxPQUFPLEVBQUUsS0FBSyxjQUFjLENBQUM7QUFHaEUsY0FBUSxTQUFTLE9BQU87QUFBQSxRQUN2QixNQUFNLEdBQUcsTUFBTSxVQUFVLElBQUksTUFBTSxlQUFlLE1BQU0sY0FBYyxNQUFNLE1BQU0sY0FBYyxNQUFLLEVBQUU7QUFBQSxRQUN2RyxLQUFLO0FBQUEsTUFDTixDQUFDO0FBR0QsY0FBUSxTQUFTLE9BQU87QUFBQSxRQUN2QixPQUFNLGdCQUFLLFFBQU8sa0JBQVosNkJBQTRCLFdBQU0sV0FBTixZQUFnQjtBQUFBLFFBQ2xELEtBQUs7QUFBQSxNQUNOLENBQUM7QUFHRCxjQUFRLFNBQVMsT0FBTztBQUFBLFFBQ3ZCLE1BQU0sTUFBTSxZQUFZLEtBQUssTUFBTTtBQUFBLFFBQ25DLEtBQUs7QUFBQSxNQUNOLENBQUM7QUFNRCxjQUFRLE1BQU0sU0FBUztBQUN2QixjQUFRLFVBQVUsTUFBTTtBQUN2QixhQUFLLE9BQU8seUJBQXlCLE1BQU0sVUFBVTtBQUFBLE1BQ3REO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFDRDtBQW1CQSxJQUFNLG1CQUFOLGNBQStCLGlDQUFpQjtBQUFBLEVBRy9DLFlBQVksS0FBVSxRQUFrQjtBQUN2QyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBQyxZQUFXLElBQUk7QUFFdEIsZ0JBQVksTUFBTTtBQUVsQixRQUFJLHdCQUFRLFdBQVcsRUFDckIsUUFBUSx3QkFBd0IsRUFDaEMsUUFBUSxrRUFBa0UsRUFDMUUsVUFBVSxZQUFVLE9BQ25CLFNBQVMsS0FBSyxPQUFPLFNBQVMsYUFBYSxFQUMzQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLE9BQU8sU0FBUyxnQkFBZ0I7QUFDckMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2xDLENBQUMsQ0FBQztBQUFBLEVBQ0g7QUFDRDsiLAogICJuYW1lcyI6IFtdCn0K
